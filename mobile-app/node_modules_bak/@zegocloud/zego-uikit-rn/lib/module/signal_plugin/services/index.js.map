{"version":3,"names":["Platform","ZegoSignalingPluginCore","ZegoPluginResult","zlogerror","zloginfo","zlogwarning","ZegoUIKitCorePlugin","ZegoUIKitReport","ZegoPluginInvitationService","constructor","_defineProperty","shared","getInstance","setBackgroundMessageHandler","getZPNsPlugin","default","message","dataObj","JSON","parse","extras","payload","zim_call_id","call_id","cancelInvitation","operation_type","reportEvent","inviter","id","offlineDataHandler","getAndroidOfflineDataHandler","setThroughMessageReceivedHandler","on","setAndroidOfflineDataHandler","handler","_androidOfflineDataHandler","setIOSOfflineDataHandler","_iOSOfflineDataHandler","onCallKitAnswerCall","_callKitAnswerCallHandler","onCallKitEndCall","_callKitEndCallHandler","getIOSOfflineDataHandler","getAnswerCallHandle","getEndCallHandle","reportCallKitCallEnded","uuid","reason","getCallKitPlugin","reportCallEnded","reportIncomingCall","cxCallUpdate","Promise","reject","getZIMInstance","getVersion","init","appID","appSign","create","Object","keys","_advancedConfig","forEach","key","value","setAdvancedConfig","uninit","destroy","login","userID","userName","token","userAvatarUrl","logout","enableNotifyWhenAppRunningInBackgroundOrQuit","certificateIndex","isIOSDevelopmentEnvironment","appName","OS","setPushConfig","registerPush","CXProviderConfiguration","localizedName","iconTemplateImageName","setInitConfiguration","applyNotificationPermission","iOSEnvironment","enableIOSVoIP","msg","includes","action","fulfill","sendInvitation","inviterName","invitees","timeout","type","data","notificationConfig","length","config","extendedData","stringify","inviter_name","pushConfig","title","content","resourcesID","resourceID","voIPConfig","iOSVoIPHandleType","iOSVoIPHandleValue","iOSVoIPHasVideo","invite","map","invitee","callID","getCallIDByUserID","getLocalUser","cancel","refuseInvitation","inviterID","acceptInvitation","accept","queryCallList","count","nextFlag","renewToken","onConnectionStateChanged","callbackID","callback","onCallInvitationReceived","onCallInvitationTimeout","onCallInviteesAnsweredTimeout","onCallInvitationAccepted","onCallInvitationRejected","onCallInvitationCancelled","onRequireNewToken","onLoginSuccess","_ZegoPluginInvitationService"],"sources":["index.ts"],"sourcesContent":["import { Platform } from 'react-native';\nimport type { ZIMCallInviteConfig, ZIMCallCancelConfig, ZIMConnectionState } from 'zego-zim-react-native';\nimport type { ZPNsRegisterMessage, ZPNsMessage } from 'zego-zpns-react-native';\n\nimport ZegoSignalingPluginCore from '../core';\nimport ZegoPluginResult from '../core/defines';\nimport { zlogerror, zloginfo, zlogwarning } from '../utils/logger';\nimport { CXCallEndedReason, CXCallUpdate } from '../defines';\nimport ZegoUIKitCorePlugin from '../../components/internal/ZegoUIKitCorePlugin';\nimport ZegoUIKitReport from '../../utils/report';\n\nexport default class ZegoPluginInvitationService {\n  static shared: ZegoPluginInvitationService;\n  _androidOfflineDataHandler: (data: any) => void;\n  _iOSOfflineDataHandler: (data: any, uuid: string) => void;\n  _callKitAnswerCallHandler: (action: any) => void;\n  _callKitEndCallHandler: (action: any) => void;\n  _advancedConfig: { [index: string]: string } = {};\n\n  constructor() {\n    if (!ZegoPluginInvitationService.shared) {\n      ZegoPluginInvitationService.shared = this;\n    }\n    return ZegoPluginInvitationService.shared;\n  }\n  static getInstance() {\n    if (!ZegoPluginInvitationService.shared) {\n      ZegoPluginInvitationService.shared = new ZegoPluginInvitationService();\n    }\n    return ZegoPluginInvitationService.shared;\n  }\n\n  setBackgroundMessageHandler() {\n    zloginfo('[ZegoPluginInvitationService] ZPNs setBackgroundMessageHandler')\n    ZegoUIKitCorePlugin.getZPNsPlugin().default.setBackgroundMessageHandler((message: ZPNsMessage) => {\n      zloginfo('ZPNs backgroundMessageHandler message: ', message)\n      const dataObj = JSON.parse(message.extras.payload);\n      dataObj.zim_call_id = message.extras.call_id;\n\n      // Pre-emptively determine whether to cancel for accurate reporting\n      const cancelInvitation = dataObj && dataObj.operation_type === \"cancel_invitation\"\n      if (!cancelInvitation) {\n        ZegoUIKitReport.reportEvent('invitationReceived', {\n          'call_id': dataObj.zim_call_id,\n          'inviter': dataObj.inviter.id,\n          'app_state': 'restarted',\n          'extended_data': message.extras.payload\n        })\n      }\n\n      let offlineDataHandler = ZegoPluginInvitationService.getInstance().getAndroidOfflineDataHandler()\n      offlineDataHandler(dataObj)\n    })\n  }\n\n  setThroughMessageReceivedHandler() {\n    zloginfo('[ZegoPluginInvitationService] ZPNs setThroughMessageReceivedHandler')\n    ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().on(\"throughMessageReceived\", (message: ZPNsMessage) => {\n      zloginfo('ZPNs throughMessageReceived message: ', message)\n      const dataObj = JSON.parse(message.extras.payload);\n      dataObj.zim_call_id = message.extras.call_id;\n\n      let offlineDataHandler = ZegoPluginInvitationService.getInstance().getAndroidOfflineDataHandler()\n      offlineDataHandler(dataObj)\n    })\n  }\n\n  setAndroidOfflineDataHandler(handler: (data: any) => void) {\n    zloginfo('[ZegoPluginInvitationService] ZPNs setAndroidOfflineDataHandler')\n    this._androidOfflineDataHandler = handler;\n  }\n  getAndroidOfflineDataHandler() {\n    return this._androidOfflineDataHandler;\n  }\n  setIOSOfflineDataHandler(handler: (data: any, uuid: string) => void) {\n    zloginfo(`[ZegoPluginInvitationService][setIOSOfflineDataHandler]`)\n    this._iOSOfflineDataHandler = handler;\n  }\n  onCallKitAnswerCall(handler: (action: any) => void) {\n    this._callKitAnswerCallHandler = handler;\n  }\n  onCallKitEndCall(handler: (action: any) => void) {\n    this._callKitEndCallHandler = handler;\n  }\n  getIOSOfflineDataHandler() {\n    return this._iOSOfflineDataHandler;\n  }\n  getAnswerCallHandle() {\n    return this._callKitAnswerCallHandler;\n  }\n  getEndCallHandle() {\n    return this._callKitEndCallHandler;\n  }\n  reportCallKitCallEnded(uuid: string, reason: CXCallEndedReason) {\n    if (ZegoUIKitCorePlugin.getCallKitPlugin()) {\n      return ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().reportCallEnded(reason, uuid);\n    } else {\n      zlogwarning('[ZegoPluginInvitationService][reportCallKitCallEnded] Cannot getCallKitPlugin');\n    }\n  }\n  reportIncomingCall(cxCallUpdate: CXCallUpdate, uuid: string): Promise<any> {\n    if (ZegoUIKitCorePlugin.getCallKitPlugin()) {\n      return ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().reportIncomingCall(cxCallUpdate, uuid);\n    } else {\n      zlogwarning('[ZegoPluginInvitationService][reportIncomingCall] Cannot getCallKitPlugin');\n      return Promise.reject('Cannot get CallKit plugin');\n    }\n  }\n  getZIMInstance() {\n    return ZegoSignalingPluginCore.getInstance().getZIMInstance();\n  }\n  getVersion() {\n    return ZegoSignalingPluginCore.getInstance().getVersion();\n  }\n  init(appID: number, appSign: string) {\n    ZegoSignalingPluginCore.getInstance().create({\n      appID,\n      appSign,\n    });\n\n    // Some advanced key need to be called after create\n    Object.keys(this._advancedConfig).forEach(key => {\n      let value = this._advancedConfig[key]\n      ZegoSignalingPluginCore.getInstance().setAdvancedConfig(key, value);\n    });\n  }\n  uninit() {\n    ZegoSignalingPluginCore.getInstance().destroy();\n  }\n  login(userID: string, userName: string, token?: string) {\n    return ZegoSignalingPluginCore.getInstance().login(\n      {\n        userID: userID,\n        userName: userName,\n        userAvatarUrl: \"\",\n      },\n      token\n    );\n  }\n  logout() {\n    return ZegoSignalingPluginCore.getInstance().logout();\n  }\n\n  enableNotifyWhenAppRunningInBackgroundOrQuit(certificateIndex?: number, isIOSDevelopmentEnvironment?: boolean, appName?: string) {\n    if (!certificateIndex) {\n      certificateIndex = 1;\n    }\n    zloginfo(`[Service] enableNotifyWhenAppRunningInBackgroundOrQuit, certificateIndex: ${certificateIndex}, isIOSSandboxEnvironment: ${isIOSDevelopmentEnvironment}, appName: ${appName}`);\n    if (ZegoUIKitCorePlugin.getZPNsPlugin()) {\n      if (Platform.OS === 'android') {\n        zloginfo('[ZegoPluginInvitationService] registerPush, Android');\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.setPushConfig({ \"enableFCMPush\": true, \"enableHWPush\": false, \"enableMiPush\": false, \"enableOppoPush\": false, \"enableVivoPush\": false, \"appType\": certificateIndex });\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().registerPush({ });\n      } else if (Platform.OS === 'ios' && ZegoUIKitCorePlugin.getCallKitPlugin()) {\n        zloginfo('[ZegoPluginInvitationService] registerPush, iOS');\n        const CXProviderConfiguration = {\n          localizedName: appName ?? 'My app',\n          iconTemplateImageName: \"AppIcon\",\n        };\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.setInitConfiguration(CXProviderConfiguration);\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().applyNotificationPermission();\n        \n        // 0 - Production; 1 - Development; 2 - Automatic\n        const iOSEnvironment = isIOSDevelopmentEnvironment == null ? 2 : (isIOSDevelopmentEnvironment ? 1 : 0);\n        zloginfo('[ZegoPluginInvitationService] registerPush, isIOSSandboxEnvironment', iOSEnvironment);\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.setPushConfig({ 'appType': certificateIndex });\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().registerPush({ \n          enableIOSVoIP: true,\n          iOSEnvironment: iOSEnvironment,\n        });\n      }\n\n      ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().on(\"registered\", (message: ZPNsRegisterMessage) => {\n        zloginfo(\"[ZegoPluginInvitationService] ZPNs registered,\", message)\n        if (message.msg.includes(\"SERVICE_NOT_AVAILABLE\")) {\n          zlogwarning('[ZegoPluginInvitationService] ZPNs registered, Please check the network connectivity with FCM.')\n        }\n      });\n\n      ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().on(\"notificationArrived\", (message: ZPNsMessage) => {\n        // only support for apple, xiaomi\n        zloginfo(\"[ZegoPluginInvitationService] ZPNs notificationArrived,\", message)\n      })\n\n      // ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().on(\"notificationClicked\", (message) => {\n      //   zloginfo(\"@@@@@@@@@@@@@@@@notificationClicked>>>>>>>>>>>>>>>############\", getCallID(message))\n      //   setZpnState(\"notificationClicked: \" + getCallID(message))\n      // })\n      // ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().on(\"throughMessageReceived\", (message) => {\n      //   zloginfo(\"@@@@@@@@@@@@@@@@throughMessageReceived>>>>>>>>>>>>>>>############\", getCallID(message))\n      //   setZpnState(\"throughMessageReceived: \" + getCallID(message))\n      // })\n\n      if (ZegoUIKitCorePlugin.getCallKitPlugin()) {\n        zloginfo('[ZegoPluginInvitationService] register iOS didReceiveIncomingPush');\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"didReceiveIncomingPush\", (extras: Record<string, any>, uuid: string) => {\n          zloginfo('#########didReceiveIncomingPush', extras, uuid);\n          let { payload } = extras;\n          let { call_id } = extras;\n          const dataObj = payload ? JSON.parse(payload) : {};\n          dataObj.zim_call_id = call_id;\n          ZegoPluginInvitationService.getInstance().getIOSOfflineDataHandler()(dataObj, uuid);\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"providerDidReset\", () => {\n          zloginfo('#########providerDidReset');\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"providerDidBegin\", () => {\n          zloginfo('#########providerDidBegin');\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"didActivateAudioSession\", () => {\n          zloginfo('#########didActivateAudioSession');\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"didDeactivateAudioSession\", () => {\n          zloginfo('#########didDeactivateAudioSession');\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"timedOutPerformingAction\", (action: any) => {\n          zloginfo('#########timedOutPerformingAction', action);\n          action.fulfill();\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"performStartCallAction\", (action: any) => {\n          zloginfo('#########performStartCallAction', action);\n          action.fulfill();\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"performAnswerCallAction\", (action: any) => {\n          zloginfo('#########performAnswerCallAction', action);\n          ZegoPluginInvitationService.getInstance().getAnswerCallHandle()(action);\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"performEndCallAction\", (action: any) => {\n          zloginfo('#########performEndCallAction', action);\n          ZegoPluginInvitationService.getInstance().getEndCallHandle()(action);\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"performSetHeldCallAction\", (action: any) => {\n          zloginfo('#########performSetHeldCallAction', action);\n          action.fulfill();\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"performSetMutedCallAction\", (action: any) => {\n          zloginfo('#########performSetMutedCallAction', action);\n          action.fulfill();\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"performSetGroupCallAction\", (action: any) => {\n          zloginfo('#########performSetGroupCallAction', action);\n          action.fulfill();\n        });\n        ZegoUIKitCorePlugin.getCallKitPlugin().default.getInstance().on(\"performPlayDTMFCallAction\", (action: any) => {\n          zloginfo('#########performPlayDTMFCallAction', action);\n          action.fulfill();\n        });\n      }\n    }\n  }\n  setAdvancedConfig(key: string, value: string) {\n    if (key === 'zim_voip_call_id') {\n      this._advancedConfig[key] = value\n    } else {\n      ZegoSignalingPluginCore.getInstance().setAdvancedConfig(key, value);\n    }\n  }\n\n  sendInvitation(inviterName: string, invitees: string[], timeout: number, type: number, data?: string, notificationConfig?: any) {\n    if (!invitees.length) {\n      zlogerror('[Service]Send invitees is empty.');\n      return Promise.reject(new ZegoPluginResult());\n    }\n    \n    const config = { timeout } as ZIMCallInviteConfig;\n    config.extendedData = JSON.stringify({\n      inviter_name: inviterName,\n      type,\n      data,\n    });\n    if (ZegoUIKitCorePlugin.getZPNsPlugin()) {\n      config.pushConfig = {\n        title: notificationConfig.title ?? \"\",\n        content: notificationConfig.message ?? \"\",\n        resourcesID: notificationConfig.resourceID ?? \"\",\n        payload: data,\n        voIPConfig: {\n          iOSVoIPHandleType: 1,\n          iOSVoIPHandleValue: '',\n          iOSVoIPHasVideo: type === 1,\n        }\n      };\n    }\n    zloginfo(`[Service]Send invitation invitees: ${invitees}`);\n    zloginfo(`[Service]Send invitation config, timeout: ${timeout}, extendedData: ${config.extendedData}`);\n    zloginfo(`[Service]Send invitation config, pushConfig: ${config.pushConfig ? JSON.stringify(config.pushConfig) : ''}`);\n    \n    return ZegoSignalingPluginCore.getInstance().invite(invitees, config);\n  }\n\n  cancelInvitation(invitees: string[], data?: string, notificationConfig?: any) {\n    invitees = invitees.map((invitee) => invitee);\n    if (!invitees.length) {\n      zlogerror('[Service]Cancel invitees is empty.');\n      return Promise.reject(new ZegoPluginResult());\n    }\n    const config = { extendedData: data } as ZIMCallCancelConfig;\n    if (ZegoUIKitCorePlugin.getZPNsPlugin()) {\n      config.pushConfig = {\n        title: notificationConfig && notificationConfig.title,\n        content: notificationConfig && notificationConfig.message,\n        resourcesID: notificationConfig && notificationConfig.resourceID,\n        payload: data\n      };\n    }\n    const callID = ZegoSignalingPluginCore.getInstance().getCallIDByUserID(\n      ZegoSignalingPluginCore.getInstance().getLocalUser().userID\n    );\n    zloginfo(\n      `[Service]Cancel invitation: callID: ${callID}, invitees: ${invitees}, data: ${data}.`\n    );\n    return ZegoSignalingPluginCore.getInstance().cancel(\n      invitees,\n      callID,\n      config\n    );\n  }\n\n  refuseInvitation(inviterID: string, data?: string) {\n    let callID;\n    // Parse data and adapt automatic rejection\n    if (data) {\n      const dataObj = JSON.parse(data);\n      callID = dataObj.callID;\n    } else {\n      callID =\n        ZegoSignalingPluginCore.getInstance().getCallIDByUserID(inviterID);\n    }\n    if (!callID) {\n      zlogerror('[Service]Call id corresponding to the inviterID is empty.');\n      return Promise.reject(new ZegoPluginResult());\n    }\n    const config = { extendedData: data };\n    zloginfo(\n      `[Service]Refuse invitation: callID: ${callID}, inviter id: ${inviterID}, data: ${data}.`\n    );\n    return ZegoSignalingPluginCore.getInstance().reject(callID, config);\n  }\n\n  acceptInvitation(inviterID: string, data?: string) {\n    let callID = ZegoSignalingPluginCore.getInstance().getCallIDByUserID(inviterID);\n    if (!callID) {\n      if (data) {\n        const dataObj = JSON.parse(data);\n        callID = dataObj.callID;\n      }\n      \n      if (!callID) {\n        zlogerror('[Service]Call id corresponding to the inviterID is empty.', inviterID, data);\n        return Promise.reject(new ZegoPluginResult('', 'Call id corresponding to the inviterID is empty.'));\n      }\n    }\n\n    const config = { extendedData: data };\n    zloginfo(\n      `[Service]Accept invitation: callID: ${callID}, inviter id: ${inviterID}, data: ${data}.`\n    );\n    return ZegoSignalingPluginCore.getInstance().accept(callID, config);\n  }\n\n  queryCallList(count: number, nextFlag?: number) {\n    const config = { count: count, nextFlag: nextFlag}\n    return ZegoSignalingPluginCore.getInstance().queryCallList(config);\n  }\n\n  renewToken(token: string) {\n    return ZegoSignalingPluginCore.getInstance().renewToken(token);\n  }\n\n  onConnectionStateChanged(callbackID: string, callback: (notifyData: { state: ZIMConnectionState }) => void) {\n    ZegoSignalingPluginCore.getInstance().onConnectionStateChanged(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationReceived(callbackID: string, callback: (notifyData: {\n    callID: string;\n    type: number;\n    inviter: { name: string; id: string; };\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationReceived(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationTimeout(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationTimeout(\n      callbackID,\n      callback\n    );\n  }\n  onCallInviteesAnsweredTimeout(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitees: { id: string; name: string; }[];\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInviteesAnsweredTimeout(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationAccepted(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationAccepted(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationRejected(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationRejected(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationCancelled(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationCancelled(\n      callbackID,\n      callback\n    );\n  }\n  onRequireNewToken(callbackID: string, callback: () => string) {\n    ZegoSignalingPluginCore.getInstance().onRequireNewToken(callbackID, callback);\n  }\n  onLoginSuccess(callbackID: string, callback: () => void) {\n    ZegoSignalingPluginCore.getInstance().onLoginSuccess(callbackID, callback);\n  }\n}\n"],"mappings":"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","ignoreList":[]}