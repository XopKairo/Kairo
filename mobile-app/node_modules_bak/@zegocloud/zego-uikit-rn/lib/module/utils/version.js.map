{"version":3,"names":["NativeModules","Platform","version","ReactNativeVersion","ZegoUIKitCorePlugin","zloginfo","getPackageVersion","ZegoUIKitReport","ZegoUIKitRNModule","logComponentsVersion","extraInfo","expressVersionPromise","require","default","getVersion","zimVersionPromise","getZIMPlugin","_getCustomVersionPromise","zpnsVersionPromise","getZPNsPlugin","callkitVersionPromise","OS","getCallKitPlugin","iosBackgroundModesPromise","getBackgroundModes","reportVersionPromise","Promise","all","then","versions","versionTable","Map","Object","entries","Version","getRnVersion","forEach","component","set","displayVersion","major","minor","patch","join","prerelease","verDesc","resolve"],"sources":["version.ts"],"sourcesContent":["import { NativeModules, Platform } from 'react-native';\n// @ts-ignore\nimport {version as ReactNativeVersion} from 'react-native/Libraries/Core/ReactNativeVersion';\n\nimport ZegoUIKitCorePlugin from '../components/internal/ZegoUIKitCorePlugin';\nimport { zloginfo } from './logger';\nimport { getPackageVersion } from './package_version';\nimport ZegoUIKitReport from './report';\n\nconst { ZegoUIKitRNModule } = NativeModules;\n\nexport const logComponentsVersion = (extraInfo: Map<string, string>) => {\n    var expressVersionPromise = require('zego-express-engine-reactnative').default.getVersion()\n    var zimVersionPromise = ZegoUIKitCorePlugin.getZIMPlugin() ? ZegoUIKitCorePlugin.getZIMPlugin().default.getVersion() : _getCustomVersionPromise(\"Not installed\");\n    var zpnsVersionPromise = ZegoUIKitCorePlugin.getZPNsPlugin() ? ZegoUIKitCorePlugin.getZPNsPlugin().default.getVersion() : _getCustomVersionPromise(\"Not installed\");\n    var callkitVersionPromise = _getCustomVersionPromise('Not necessary')\n    if (Platform.OS === 'ios') {\n      callkitVersionPromise = ZegoUIKitCorePlugin.getCallKitPlugin() ? _getCustomVersionPromise(\"Unknown version\") : _getCustomVersionPromise(\"Not installed\");\n    }\n    var iosBackgroundModesPromise = ZegoUIKitRNModule.getBackgroundModes()\n    var reportVersionPromise = ZegoUIKitReport.getVersion()\n\n    Promise.all([expressVersionPromise, zimVersionPromise, zpnsVersionPromise, callkitVersionPromise, iosBackgroundModesPromise, reportVersionPromise])\n    .then(versions => {\n      let versionTable = new Map<string, string>(Object.entries({\n        'OS': `${Platform.OS} ${Platform.Version ?? ''}`,\n        'RN': getRnVersion(),\n        'Express': versions[0],\n        'ZIM': versions[1],\n        'ZPNs': versions[2],\n        'CallKit(iOS)': versions[3],\n        'BackgroundModes(iOS)': versions[4],\n        'ZegoUIKit': getPackageVersion(),\n        'Report': versions[5],\n      }));\n      extraInfo.forEach((version, component) => {\n        versionTable.set(component, version);\n      });\n\n      zloginfo('Components version: ')\n      versionTable.forEach((version, component) => {\n        zloginfo(`  ${component} => ${version}`);\n      });\n    })\n};\n\nexport const getRnVersion = () => {\n  const displayVersion =\n  [\n    ReactNativeVersion.major,\n    ReactNativeVersion.minor,\n    ReactNativeVersion.patch,\n  ].join('.') +\n  (ReactNativeVersion.prerelease != null\n    ? '-' + ReactNativeVersion.prerelease\n    : '');\n\n  return displayVersion\n}\n\nconst _getCustomVersionPromise = (verDesc: string) => {\n  return new Promise<string>((resolve) => {resolve(verDesc);})\n}"],"mappings":"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","ignoreList":[]}