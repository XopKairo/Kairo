{"version":3,"names":["_reactNative","require","_zegoZimReactNative","_defines","_interopRequireDefault","_logger","_user_in_room_attributes_core","_room_properties_core","_ZegoUIKitCorePlugin","_in_room_message_core","_enum_name","_report","_ZegoSignalingPluginCore","e","__esModule","default","_defineProperty","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","ZegoSignalingPluginCore","constructor","Map","ZIMConnectionState","Disconnected","shared","zloginfo","getInstance","_registerEngineCallback","ZegoUIKitCorePlugin","getZIMPlugin","on","zim","errorInfo","zlogerror","code","message","state","event","extendedData","getZimConnectionStateName","getZimConnectionEventName","_connectionState","_notifyConnectionStateChanged","zlogwarning","callID","inviter","timeout","_currentInvitationID","_callIDUsers","set","_callIDExtendedData","notifyData","id","extendedMap","JSON","parse","name","inviter_name","type","data","_notifyCallInvitationReceived","ZegoUIKitReport","reportEvent","AppState","currentState","result","callUserList","callerID","_getInviterIDByCallID","stringify","map","callUserInfo","callUserID","userID","callUserState","callExtendedData","ZIMCallUserState","Accepted","_loginUser","dataParsed","call_id","invitee","userName","_notifyCallInvitationAccepted","Rejected","_notifyCallInvitationRejected","Timeout","_callExtendedData","_getExtendedDataByCallID","invitees","_notifyCallInviteesAnsweredTimeout","_notifyCallInvitationTimeout","Cancelled","BeCancelled","delete","_notifyCallInvitationCancelled","second","keys","_onRequireNewTokenCallbackMap","forEach","callbackID","token","renewToken","_unregisterEngineCallback","off","_onConnectionStateChangedCallbackMap","callbackCount","_onCallInvitationReceivedCallbackMap","length","_onCallInvitationCancelledCallbackMap","_onCallInvitationAcceptedCallbackMap","_onCallInvitationRejectedCallbackMap","_onCallInvitationTimeoutCallbackMap","_onCallInviteesAnsweredTimeoutCallbackMap","_resetData","_resetDataForLogout","_isLogin","clear","get","_createHandle","ZegoPluginUserInRoomAttributesCore","ZegoPluginRoomPropertiesCore","ZegoPluginRoomMessageCore","getLocalUser","getCallIDByUserID","Array","from","key","getZIMInstance","getVersion","create","appConfig","login","userInfo","Promise","resolve","reject","then","_onLoginSuccessCallbackMap","catch","error","ZIMErrorCode","NetworkModuleUserHasAlreadyLogged","logout","destroy","setAdvancedConfig","invite","config","callInvite","errorInvitees","errorUserList","ZegoPluginResult","errorInviteeIDs","errorInvitee","desc","Offline","Inviting","push","cancel","callCancel","inviteeID","accept","callAccept","callReject","queryCallList","queryCallInvitationList","callList","nextFlag","newFlag","onConnectionStateChanged","callback","onCallInvitationReceived","onCallInvitationCancelled","onCallInvitationAccepted","onCallInvitationRejected","onCallInvitationTimeout","onCallInviteesAnsweredTimeout","onRequireNewToken","onLoginSuccess","exports"],"sources":["index.ts"],"sourcesContent":["import { AppState } from 'react-native';\nimport {\n  type ZIMAppConfig,\n  type ZIMUserInfo,\n  type ZIMCallInviteConfig,\n  type ZIMCallCancelConfig,\n  type ZIMCallAcceptConfig,\n  type ZIMCallRejectConfig,\n  type ZIMError,\n  type ZIMEventOfConnectionStateChangedResult,\n  type ZIMEventOfCallInvitationReceivedResult,\n  type ZIMEventOfCallUserStateChangedResult,\n  type ZIMCallInvitationSentResult,\n  type ZIMCallCancelSentResult,\n  type ZIMCallAcceptanceSentResult,\n  type ZIMCallRejectionSentResult,\n  type ZIMCallInvitationQueryConfig,\n  type ZIMCallInvitationListQueriedResult,\n  type ZIMCallInfo,\n  type ZIMEventOfTokenWillExpireResult,\n  ZIMCallUserState,\n  ZIMConnectionState,\n  ZIMErrorCode,\n} from 'zego-zim-react-native';\nimport ZegoPluginResult from './defines';\nimport { zlogerror, zloginfo, zlogwarning } from '../utils/logger';\nimport ZegoPluginUserInRoomAttributesCore from './user_in_room_attributes_core';\nimport ZegoPluginRoomPropertiesCore from './room_properties_core';\nimport ZegoUIKitCorePlugin from \"../../components/internal/ZegoUIKitCorePlugin\";\nimport ZegoPluginRoomMessageCore from './in_room_message_core';\nimport { getZimConnectionEventName, getZimConnectionStateName } from '../../utils/enum_name';\nimport ZegoUIKitReport from '../../utils/report';\n\nexport default class ZegoSignalingPluginCore {\n  static shared: ZegoSignalingPluginCore;\n  _loginUser = {} as ZIMUserInfo;\n  _isLogin = false;\n  _callIDUsers = new Map<string, string>(); // <zim call id, user id>\n  _callIDExtendedData = new Map<string, string>(); // <zim call id, extendedData>\n  _connectionState = ZIMConnectionState.Disconnected;\n  _onConnectionStateChangedCallbackMap: { [index: string]: (notifyData: { state: ZIMConnectionState }) => void } = {};\n  _onCallInvitationReceivedCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    type: number;\n    inviter: { name: string; id: string; };\n    data: string;\n  }) => void } = {};\n  _onCallInvitationCancelledCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    inviter: { id: string };\n    data: string;\n  }) => void } = {};\n  _onCallInvitationAcceptedCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void } = {};\n  _onCallInvitationRejectedCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void } = {};\n  _onCallInvitationTimeoutCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void } = {};\n  _onCallInviteesAnsweredTimeoutCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    invitees: { id: string; name: string; }[];\n    data: string;\n  }) => void } = {};\n  _currentInvitationID = ''\n  _onRequireNewTokenCallbackMap: { [index: string]: () => string } = {};\n  _onLoginSuccessCallbackMap: { [index: string]: () => void } = {};\n\n  constructor() {\n    if (!ZegoSignalingPluginCore.shared) {\n      zloginfo('[Core]ZegoSignalingPluginCore successful instantiation.');\n      ZegoSignalingPluginCore.shared = this;\n    }\n    return ZegoSignalingPluginCore.shared;\n  }\n  static getInstance() {\n    if (!ZegoSignalingPluginCore.shared) {\n      ZegoSignalingPluginCore.shared = new ZegoSignalingPluginCore();\n    }\n    return ZegoSignalingPluginCore.shared;\n  }\n  // ------- internal events register ------\n  _registerEngineCallback() {\n    zloginfo('[Core]Register callback for ZIM...');\n\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on('error', (zim: any, errorInfo: ZIMError) => {\n      zlogerror(\n        `[Core]Zim error, code:${errorInfo.code}, message:${errorInfo.message}.`\n      );\n    });\n\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'connectionStateChanged',\n      (zim: any, { state, event, extendedData }: ZIMEventOfConnectionStateChangedResult) => {\n        zloginfo(\n          `[Core]Connection state changed, state:${getZimConnectionStateName(state)}, event:${getZimConnectionEventName(event)}, extended data:${extendedData}`\n        );\n        this._connectionState = state;\n        this._notifyConnectionStateChanged({ state });\n        if (this._connectionState === ZIMConnectionState.Disconnected) {\n          zlogwarning('[Core]Disconnected, auto logout.');\n          // this.logout();\n        }\n      }\n    );\n\n    // Callback of the call invitation received by the invitee.\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'callInvitationReceived',\n      (zim: any, { callID, inviter, timeout, extendedData }: ZIMEventOfCallInvitationReceivedResult) => {\n        zloginfo(\n          '[Core][callInvitationReceived callback]',\n          'callID:', callID,\n          'inviter:', inviter,\n          'timeout:', timeout,\n          'extendedData:', extendedData\n        );\n        if (this._currentInvitationID == callID) {\n          return\n        } else {\n          this._currentInvitationID = callID\n        }\n        this._callIDUsers.set(callID, inviter);\n        this._callIDExtendedData.set(callID, extendedData)\n        \n        const notifyData: any = { callID, inviter: { id: inviter } };\n        if (extendedData) {\n          const extendedMap = JSON.parse(extendedData);\n          notifyData.inviter.name = extendedMap.inviter_name;\n          notifyData.type = extendedMap.type;\n          notifyData.data = extendedMap.data;\n          notifyData.timeout = timeout\n        }\n        this._notifyCallInvitationReceived(notifyData);\n        ZegoUIKitReport.reportEvent('invitationReceived', {\n          'call_id': notifyData.callID,\n          'inviter': notifyData.inviter.id,\n          'app_state': AppState.currentState,\n          'extended_data': extendedData\n        })\n      }\n    );\n\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on('callUserStateChanged', (zim: any, result: ZIMEventOfCallUserStateChangedResult) => {\n      let callID = result.callID\n      let callUserList = result.callUserList\n      let callerID = this._getInviterIDByCallID(callID)\n      zloginfo(`[SignalingPluginCore][callUserStateChanged callback], callID: ${callID}, callerID: ${callerID}, callUserList: ${JSON.stringify(callUserList)}`)\n\n      callUserList.map(callUserInfo => {\n        let callUserID = callUserInfo.userID\n        let callUserState = callUserInfo.state\n        let callExtendedData = callUserInfo.extendedData\n\n        if (callUserState === ZIMCallUserState.Accepted && callUserID !== this._loginUser.userID) {   // 1\n          // as caller, state changed to Accepted as soon as after call, and wait for the other callees to change to the Accepted state\n          // as callee, should ignore anyone state changed callback\n          zloginfo(`[SignalingPluginCore][callUserStateChanged callback], detect ${callUserID} Accepted`)\n          if (this._loginUser.userID !== callerID) {\n            zloginfo(`[SignalingPluginCore][callUserStateChanged callback], ignore`)\n          } else if (callUserID !== this._loginUser.userID) {\n            // detect other state changed\n            zloginfo(`[SignalingPluginCore][callUserStateChanged callback], notifyCallInvitationAccepted`)\n\n            let dataParsed = callExtendedData ? JSON.parse(callExtendedData) : {}\n            dataParsed.callID = callID\n            dataParsed.call_id = dataParsed.call_id ?? ''\n            dataParsed.invitee = dataParsed.invitee ?? {userID: callUserID, userName: ''}\n\n            const notifyData = {\n              callID,\n              invitee: { id: callUserID, name: '' },\n              data: JSON.stringify(dataParsed),\n            };\n            this._notifyCallInvitationAccepted(notifyData);\n          }\n        } else if (callUserState === ZIMCallUserState.Rejected) {  // 2\n          // as caller, wait for the other callees's state changed to Rejected\n          // as callee, should ignore anyone state changed callback\n          zloginfo(`[SignalingPluginCore][callUserStateChanged callback], detect ${callUserID} Rejected`)\n          if (this._loginUser.userID !== callerID) {\n            zloginfo(`[SignalingPluginCore][callUserStateChanged callback], ignore`)\n          } else {\n            // detect other state changed\n            zloginfo(`[SignalingPluginCore][callUserStateChanged callback], notifyCallInvitationRejected`)\n\n            let dataParsed = callExtendedData ? JSON.parse(callExtendedData) : {}\n            dataParsed.callID = callID\n            dataParsed.call_id = dataParsed.call_id ?? ''\n            dataParsed.invitee = dataParsed.invitee ?? {userID: callUserID, userName: ''}\n\n            const notifyData = {\n              callID,\n              invitee: { id: callUserID, name: '' },\n              data: JSON.stringify(dataParsed),\n            };\n            this._notifyCallInvitationRejected(notifyData);  \n          }\n        } else if (callUserState === ZIMCallUserState.Timeout) {  // 6\n          // as caller, wait for the other callees's state changed to the Timeout\n          // as callee, should only care own state changed to Timeout\n          zloginfo(`[SignalingPluginCore][callUserStateChanged callback], detect ${callUserID} Timeout`)\n          \n          // timeout 的 extendedData 为空，为方便后续使用，使用 callInvite 时的 extendedData\n          let _callExtendedData = this._getExtendedDataByCallID(callID)\n\n          if (this._loginUser.userID === callerID) {\n            zloginfo(`[SignalingPluginCore][callUserStateChanged callback], notifyCallInviteesAnsweredTimeout`)\n\n            let dataParsed = _callExtendedData ? JSON.parse(_callExtendedData) : {}\n            dataParsed.call_id = dataParsed.call_id ?? ''\n            dataParsed.invitees = [{userID: callUserID, userName: ''}]\n\n            const notifyData = {\n              callID,\n              invitees: [{ id: callUserID, name: '' }],\n              data: JSON.stringify(dataParsed),\n            };\n            this._notifyCallInviteesAnsweredTimeout(notifyData);  // for onOutgoingCallTimeout\n          } else if (callUserID === this._loginUser.userID) {\n            zloginfo(`[SignalingPluginCore][callUserStateChanged callback], notifyCallInvitationTimeout`)\n\n            let dataParsed = _callExtendedData ? JSON.parse(_callExtendedData) : {}\n            dataParsed.call_id = dataParsed.call_id ?? ''\n            dataParsed.inviter = [{userID: this._getInviterIDByCallID(callID), userName: ''}]\n\n            const notifyData = {\n              callID,\n              inviter: { id: this._getInviterIDByCallID(callID), name: '' },\n              data: JSON.stringify(dataParsed),\n            };\n            this._notifyCallInvitationTimeout(notifyData);        // for onIncomingCallTimeout\n          } else {\n            zloginfo(`[SignalingPluginCore][callUserStateChanged callback], ignore`)\n          }\n        } else if (callUserState === ZIMCallUserState.Cancelled || callUserState === ZIMCallUserState.BeCancelled) {  // 3 or 10\n          // |        |          Cancelled         |                                    BeCancelled                                     |\n          // | caller | caller cancel OutgoingCall | OutgoingCall cancelled by zim server (e.g. caller network disconnection)           |\n          // | callee |                            | IncomingCall cancelled by caller or zim server (e.g. caller network disconnection) |\n          \n          zloginfo(`[SignalingPluginCore][callUserStateChanged callback], detect ${callUserID} ${callUserState === ZIMCallUserState.Cancelled ? 'Cancelled' : 'BeCancelled'}`)\n          if (callUserID !== this._loginUser.userID) {\n            zloginfo(`[SignalingPluginCore][callUserStateChanged callback], ignore`)\n          } else {\n            zloginfo(`[SignalingPluginCore][callUserStateChanged callback], notifyCallInvitationCancelled`)\n            \n            let dataParsed = callExtendedData ? JSON.parse(callExtendedData) : {}\n            dataParsed.callID = callID\n            dataParsed.call_id = dataParsed.call_id ?? ''\n            dataParsed.inviter = dataParsed.inviter ?? {userID: '', userName: ''}\n            \n            // when caller cancelled, inviter is empty\n            callerID = callerID ?? dataParsed.inviter.userID\n\n            const notifyData = {\n              callID,\n              inviter: { id: callerID },\n              data: JSON.stringify(dataParsed),\n            };\n            this._callIDUsers.delete(callID);\n            this._callIDExtendedData.delete(callID)\n            this._notifyCallInvitationCancelled(notifyData);\n          }\n        }\n      })\n    });\n\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on('tokenWillExpire', (zim: any, { second }: ZIMEventOfTokenWillExpireResult) => {\n      zloginfo('zim token will expire.');\n      Object.keys(this._onRequireNewTokenCallbackMap).forEach(\n        async (callbackID) => {\n          if (this._onRequireNewTokenCallbackMap[callbackID]) {\n            const token = await this._onRequireNewTokenCallbackMap[callbackID]();\n            if (token) {\n                this.renewToken(token);\n            } else {\n              zlogerror('Renew token failed: the returned token is abnormal');\n            }\n          }\n        }\n      );\n    });\n  }\n  _unregisterEngineCallback() {\n    zloginfo('[Core]Unregister callback from ZIM...');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('error');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('connectionStateChanged');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('callUserStateChanged');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('callInvitationReceived');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('tokenWillExpire');\n  }\n  // ------- internal events exec ------\n  _notifyConnectionStateChanged(notifyData: { state: ZIMConnectionState }) {\n    Object.keys(this._onConnectionStateChangedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onConnectionStateChangedCallbackMap[callbackID]) {\n          this._onConnectionStateChangedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationReceived(notifyData: {\n    callID: string;\n    type: number;\n    inviter: { name: string; id: string; };\n    data: string;\n  }) {\n    let callbackCount = Object.keys(this._onCallInvitationReceivedCallbackMap).length;\n    zloginfo(`[ZegoSignalingPluginCore][_notifyCallInvitationReceived] notify count: ${callbackCount}`);\n\n    Object.keys(this._onCallInvitationReceivedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationReceivedCallbackMap[callbackID]) {\n          this._onCallInvitationReceivedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationCancelled(notifyData: {\n    callID: string;\n    inviter: { id: string };\n    data: string;\n  }) {\n    let callbackCount = Object.keys(this._onCallInvitationCancelledCallbackMap).length;\n    zloginfo(`[ZegoSignalingPluginCore][_notifyCallInvitationCancelled] notify count: ${callbackCount}`);\n\n    Object.keys(this._onCallInvitationCancelledCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationCancelledCallbackMap[callbackID]) {\n          this._onCallInvitationCancelledCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationAccepted(notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) {\n    Object.keys(this._onCallInvitationAcceptedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationAcceptedCallbackMap[callbackID]) {\n          this._onCallInvitationAcceptedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationRejected(notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) {\n    Object.keys(this._onCallInvitationRejectedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationRejectedCallbackMap[callbackID]) {\n          this._onCallInvitationRejectedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationTimeout(notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) {\n    Object.keys(this._onCallInvitationTimeoutCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationTimeoutCallbackMap[callbackID]) {\n          this._onCallInvitationTimeoutCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInviteesAnsweredTimeout(notifyData: {\n    callID: string;\n    invitees: { id: string; name: string; }[];\n    data: string;\n  }) {\n    Object.keys(this._onCallInviteesAnsweredTimeoutCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInviteesAnsweredTimeoutCallbackMap[callbackID]) {\n          this._onCallInviteesAnsweredTimeoutCallbackMap[callbackID](\n            notifyData\n          );\n        }\n      }\n    );\n  }\n  // ------- internal utils ------\n  _resetData() {\n    this._resetDataForLogout();\n  }\n  _resetDataForLogout() {\n    this._isLogin = false;\n    this._loginUser = {} as ZIMUserInfo;\n    this._callIDUsers.clear();\n    this._callIDExtendedData.clear()\n    this._connectionState = ZIMConnectionState.Disconnected;\n  }\n  _getInviterIDByCallID(callID: string) {\n    return this._callIDUsers.get(callID);\n  }\n  _getExtendedDataByCallID(callID: string) {\n    return this._callIDExtendedData.get(callID);\n  }\n  _createHandle() {\n    this._unregisterEngineCallback();\n    this._registerEngineCallback();\n    // live audio room\n    ZegoPluginUserInRoomAttributesCore.getInstance()._unregisterEngineCallback();\n    ZegoPluginUserInRoomAttributesCore.getInstance()._registerEngineCallback();\n    ZegoPluginRoomPropertiesCore.getInstance()._unregisterEngineCallback();\n    ZegoPluginRoomPropertiesCore.getInstance()._registerEngineCallback();\n    ZegoPluginRoomMessageCore.getInstance()._unregisterEngineCallback();\n    ZegoPluginRoomMessageCore.getInstance()._registerEngineCallback();\n  }\n  // ------- external utils ------\n  getLocalUser() {\n    return this._loginUser;\n  }\n  getCallIDByUserID(userID: string) {\n    let callID = '';\n    Array.from(this._callIDUsers.keys()).forEach((key) => {\n      const value = this._callIDUsers.get(key);\n      if (userID === value) {\n        callID = key;\n        zloginfo(`[Core]getCallIDByUserID, ${userID} => ${callID}`);\n      }\n    });\n    return callID;\n  }\n  // ------- external method ------\n  getZIMInstance() {\n    return ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance();\n  }\n  getVersion(): Promise<string> {\n    return ZegoUIKitCorePlugin.getZIMPlugin().default.getVersion();\n  }\n  create(appConfig: ZIMAppConfig) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      const zim = ZegoUIKitCorePlugin.getZIMPlugin().default.create(appConfig);\n      if (!zim) {\n        zlogerror('[Core]Create zim error.');\n      } else {\n        zloginfo('[Core]Create zim success.');\n        this._createHandle();\n      }\n    } else {\n      zlogwarning('[Core]Zim has already created.');\n      this._createHandle();\n    }\n  }\n  login(userInfo: ZIMUserInfo, token = ''): Promise<void> {\n    zloginfo('ZIM login...');\n    return new Promise((resolve, reject) => {\n      if (!this._isLogin) {\n        ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n          .login(userInfo, token)\n          .then(() => {\n            zloginfo('ZIM login success.');\n            zloginfo('[Core]Login success.');\n            this._loginUser = userInfo;\n            this._isLogin = true;\n            resolve();\n            zloginfo('notify _onLoginSuccessCallbackMap');\n            Object.keys(this._onLoginSuccessCallbackMap).forEach((callbackID) => {\n              if (this._onLoginSuccessCallbackMap[callbackID]) {\n                this._onLoginSuccessCallbackMap[callbackID]()\n              }\n            });\n          }).catch((error: ZIMError) => {\n            if (error.code == ZIMErrorCode.NetworkModuleUserHasAlreadyLogged) {\n              zloginfo('ZIM login already.');\n              zloginfo('[Core]Login already success.');\n              resolve();\n              zloginfo('notify _onLoginSuccessCallbackMap');\n              Object.keys(this._onLoginSuccessCallbackMap).forEach((callbackID) => {\n                if (this._onLoginSuccessCallbackMap[callbackID]) {\n                  this._onLoginSuccessCallbackMap[callbackID]()\n                }\n              });\n            } else {\n              zloginfo(`ZIM login fail, error: ${error.code}`);\n              reject(error);\n            }\n          });\n      } else {\n        zloginfo('[Core]Login already success.');\n        resolve();\n      }\n    });\n  }\n  logout(): Promise<void> {\n    zloginfo('ZIM logout...');\n    return ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n      .logout()\n      .then(() => {\n        zloginfo('[Core]Logout success.');\n        this._resetDataForLogout();\n        // live audio room\n        ZegoPluginUserInRoomAttributesCore.getInstance()._resetData();\n      });\n  }\n  destroy() {\n    zloginfo('ZIM destroy...');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().destroy();\n    zloginfo('[Core]Destroy success.');\n    this._resetData();\n  }\n  setAdvancedConfig(key: string, value: string) {\n    zloginfo(`[Core]setAdvancedConfig, key: ${key}, value: ${value}`);\n    ZegoUIKitCorePlugin.getZIMPlugin().default.setAdvancedConfig(key, value);\n  }\n  invite(invitees: string[], config: ZIMCallInviteConfig): Promise<{ callID: string; errorInvitees: string[]; code: string, message: string; }> {\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .callInvite(invitees, config)\n        .then(({ callID, timeout, errorInvitees, errorUserList }: ZIMCallInvitationSentResult) => {\n          ZegoUIKitReport.reportEvent('callInvite', {\n            'invitees': JSON.stringify(invitees),\n            'count': invitees.length,\n            'error_userlist': JSON.stringify(errorUserList),\n            'error_count': errorUserList.length,\n            'call_id': callID,\n            'extended_data': config.extendedData,\n            'error': 0,\n            'msg': ''\n          })\n\n          this._callIDUsers.set(callID, this._loginUser.userID);\n          this._callIDExtendedData.set(callID, config.extendedData)\n          if (!errorInvitees || !errorInvitees.length) {\n            zloginfo(`[Core]Invite done, call id: ${callID}`);\n            resolve({\n              ...new ZegoPluginResult('', ''),\n              callID,\n              errorInvitees: [],\n            });\n          } else {\n            const errorInviteeIDs: string[] = [];\n            errorInvitees.forEach((errorInvitee) => {\n              const desc =\n                errorInvitee.state === ZIMCallUserState.Offline\n                  ? 'offine'\n                  : errorInvitee.state === ZIMCallUserState.Inviting\n                  ? 'inviting'\n                  : '';\n              zlogwarning(\n                `[Core]Invite error, invitee id: ${errorInvitee.userID}, invitee state: ${errorInvitee.state}, state desc: ${desc}`\n              );\n              errorInviteeIDs.push(errorInvitee.userID);\n            });\n            resolve({\n              ...new ZegoPluginResult('', ''),\n              callID,\n              errorInvitees: errorInviteeIDs,\n            });\n          }\n        })\n        .catch((error: ZIMError) => {\n          ZegoUIKitReport.reportEvent('callInvite', {\n            'invitees': JSON.stringify(invitees),\n            'count': invitees.length,\n            'call_id': '',\n            'extended_data': config.extendedData,\n            'error': error.code,\n            'msg': error.message\n          })\n\n          reject(error);\n        });\n    });\n  }\n  cancel(invitees: string[], callID: string, config: ZIMCallCancelConfig): Promise<{ code: string, message: string; callID: string, errorInvitees: string[]; }> {\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .callCancel(invitees, callID, config)\n        .then(({ callID, errorInvitees }: ZIMCallCancelSentResult) => {\n          this._callIDUsers.delete(callID);\n          this._callIDExtendedData.delete(callID)\n          if (!errorInvitees || !errorInvitees.length) {\n            zloginfo(`[Core]Cancel invitation done, call id: ${callID}`);\n            resolve({ ...new ZegoPluginResult('', ''), callID, errorInvitees: [] });\n          } else {\n            errorInvitees.forEach((inviteeID) => {\n              zlogwarning(\n                `[Core]Cancel invitation error, invitee id: ${inviteeID}`\n              );\n            });\n            resolve({ ...new ZegoPluginResult('', ''), callID, errorInvitees });\n          }\n        })\n        .catch((error: ZIMError) => {\n          zloginfo(`[Core]Cancel invitation failed, call id: ${callID}, error: ${error}`);\n          reject(error);\n        });\n    });\n  }\n  accept(callID: string, config: ZIMCallAcceptConfig): Promise<{ code: string, message: string; }> {\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .callAccept(callID, config)\n        .then(({ callID }: ZIMCallAcceptanceSentResult) => {\n          zloginfo(`[Core]Accept invitation done, call id: ${callID}`);\n          resolve(new ZegoPluginResult('', '', {callID}));\n        })\n        .catch((error: ZIMError) => {\n          reject(error);\n        });\n    });\n  }\n  reject(callID: string, config: ZIMCallRejectConfig): Promise<{ code: string, message: string; }> {\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .callReject(callID, config)\n        .then(({ callID }: ZIMCallRejectionSentResult) => {\n          zloginfo(`[Core]Reject invitation done, call id: ${callID}`);\n          this._callIDUsers.delete(callID);\n          this._callIDExtendedData.delete(callID)\n          resolve(new ZegoPluginResult('', '', {callID}));\n        })\n        .catch((error: ZIMError) => {\n          zloginfo(`[Core]Reject invitation error, call id: ${callID}, error: ${error.code}`);\n          reject(error);\n        });\n    });\n  }\n  queryCallList(config: ZIMCallInvitationQueryConfig): Promise<{ callList: ZIMCallInfo[], nextFlag: number; }> {\n    return new Promise((resolve, reject) => {\n        ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .queryCallInvitationList(config)\n        .then(({callList, nextFlag: newFlag} : ZIMCallInvitationListQueriedResult) => {\n            zloginfo(`[Core]Query invitation list done, nextFlag: ${newFlag}, calllist: ${callList.length}`);\n            const data = {callList: callList, nextFlag: newFlag};\n            resolve(data);\n        })\n        .catch((error: ZIMError) => {\n            reject(error);\n        })\n    });\n  }\n\n  renewToken(token: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .renewToken(token)\n        .then(() => {\n          zloginfo(`Renew zim token success, token: ${token}`);\n          resolve();\n        })\n        .catch ((error: ZIMError) => {\n          zlogerror(`Renew zim token failed. code: ${error.code}, message: ${error.message}`);\n          reject(error);\n        });\n    });\n  }\n\n  // ------- external events register ------\n  onConnectionStateChanged(callbackID: string, callback: (notifyData: { state: ZIMConnectionState }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onConnectionStateChangedCallbackMap) {\n        zloginfo(\n          '[Core][onConnectionStateChanged] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onConnectionStateChangedCallbackMap[callbackID];\n      }\n    } else {\n      this._onConnectionStateChangedCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationReceived(callbackID: string, callback: (notifyData: {\n    callID: string;\n    type: number;\n    inviter: { name: string; id: string; };\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationReceivedCallbackMap) {\n        zloginfo(\n          '[Core][onCallInvitationReceived] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInvitationReceivedCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationReceivedCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationCancelled(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationCancelledCallbackMap) {\n        zloginfo('[Core][onCallInvitationCancelled] Remove callback for: [', callbackID, ']');\n        delete this._onCallInvitationCancelledCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationCancelledCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationAccepted(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationAcceptedCallbackMap) {\n        zloginfo(\n          '[Core][onCallInvitationAccepted] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInvitationAcceptedCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationAcceptedCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationRejected(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationRejectedCallbackMap) {\n        zloginfo(\n          '[Core][onCallInvitationRejected] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInvitationRejectedCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationRejectedCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationTimeout(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationTimeoutCallbackMap) {\n        zloginfo(\n          '[Core][onCallInvitationTimeout] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInvitationTimeoutCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationTimeoutCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInviteesAnsweredTimeout(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitees: { id: string; name: string; }[];\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInviteesAnsweredTimeoutCallbackMap) {\n        zloginfo(\n          '[Core][onCallInviteesAnsweredTimeout] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInviteesAnsweredTimeoutCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInviteesAnsweredTimeoutCallbackMap[callbackID] = callback;\n    }\n  }\n  onRequireNewToken(callbackID: string, callback: () => string) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onRequireNewTokenCallbackMap) {\n        zloginfo(\n          '[Core][onRequireNewToken] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onRequireNewTokenCallbackMap[callbackID];\n      }\n    } else {\n      this._onRequireNewTokenCallbackMap[callbackID] = callback;\n    }\n  }\n  onLoginSuccess(callbackID: string, callback?: () => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onLoginSuccessCallbackMap) {\n        delete this._onLoginSuccessCallbackMap[callbackID];\n        zloginfo(`[onLoginSuccess] Remove callback for: ${callbackID}`)\n      }\n    } else {\n      this._onLoginSuccessCallbackMap[callbackID] = callback;\n      if (this._isLogin) {\n        zloginfo(`[onLoginSuccess] already login, execute callback directly.`)\n        callback()\n      }\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}