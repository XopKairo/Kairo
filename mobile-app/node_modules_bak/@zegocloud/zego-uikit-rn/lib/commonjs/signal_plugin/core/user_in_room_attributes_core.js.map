{"version":3,"names":["_logger","require","_defines","_interopRequireDefault","_ZegoUIKitCorePlugin","_ZegoPluginUserInRoomAttributesCore","e","__esModule","default","_defineProperty","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","ZegoPluginUserInRoomAttributesCore","constructor","shared","getInstance","_registerEngineCallback","ZegoUIKitCorePlugin","getZIMPlugin","on","zim","roomID","infos","operatedInfo","zloginfo","_notifyUsersInRoomAttributesUpdated","map","info","attributesInfo","editor","userID","_unregisterEngineCallback","off","_resetData","_resetDataForLeaveRoom","_roomBaseInfo","_isJoinRoom","notifyData","keys","_onUsersInRoomAttributesUpdatedCallbackMap","forEach","callbackID","joinRoom","zlogerror","Promise","reject","resolve","enterRoom","roomName","then","roomInfo","baseInfo","ZegoPluginResult","catch","error","code","message","leaveRoom","leaveAllRoom","getRoomBaseInfo","setUsersInRoomAttributes","attributes","userIDs","setRoomMembersAttributes","isDeleteAfterOwnerLeft","errorUserList","queryUsersInRoomAttributes","config","queryRoomMemberAttributesList","nextFlag","resNextFlag","params","onUsersInRoomAttributesUpdated","callback","exports"],"sources":["user_in_room_attributes_core.ts"],"sourcesContent":["import type {\n  ZIMRoomInfo,\n  ZIMRoomMemberAttributesInfo,\n  ZIMRoomMemberAttributesQueryConfig,\n  ZIMEventOfRoomMembersAttributesUpdatedResult,\n  ZIMRoomEnteredResult,\n  ZIMError,\n  ZIMRoomMembersAttributesOperatedResult,\n  ZIMRoomMemberAttributesListQueriedResult,\n} from 'zego-zim-react-native';\nimport { zlogerror, zloginfo } from '../utils/logger';\nimport ZegoPluginResult from './defines';\nimport ZegoUIKitCorePlugin from \"../../components/internal/ZegoUIKitCorePlugin\";\n\nexport default class ZegoPluginUserInRoomAttributesCore {\n  static shared: ZegoPluginUserInRoomAttributesCore;\n  _isJoinRoom = false;\n  _roomBaseInfo = {} as ZIMRoomInfo; // { roomID: '', roomName: '' }\n  _onUsersInRoomAttributesUpdatedCallbackMap: { [index: string]: (notifyData: {\n    infos: ZIMRoomMemberAttributesInfo[];\n    editor: string;\n  }) => void } = {};\n  constructor() {\n    if (!ZegoPluginUserInRoomAttributesCore.shared) {\n      ZegoPluginUserInRoomAttributesCore.shared = this;\n    }\n    return ZegoPluginUserInRoomAttributesCore.shared;\n  }\n  static getInstance() {\n    if (!ZegoPluginUserInRoomAttributesCore.shared) {\n      ZegoPluginUserInRoomAttributesCore.shared =\n        new ZegoPluginUserInRoomAttributesCore();\n    }\n    return ZegoPluginUserInRoomAttributesCore.shared;\n  }\n  // ------- internal events register ------\n  _registerEngineCallback() {\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'roomMemberAttributesUpdated',\n      (zim: any, { roomID, infos, operatedInfo }: ZIMEventOfRoomMembersAttributesUpdatedResult) => {\n        zloginfo(\n          `[ZegoPluginUserInRoomAttributesCore]NotifyUsersInRoomAttributesUpdated`,\n          infos,\n          operatedInfo\n        );\n        this._notifyUsersInRoomAttributesUpdated({\n          infos: infos.map((info) => info.attributesInfo),\n          editor: operatedInfo.userID,\n        });\n      }\n    );\n    zloginfo(\n      '[ZegoPluginUserInRoomAttributesCore]Register callback for ZIM...'\n    );\n  }\n  _unregisterEngineCallback() {\n    zloginfo(\n      '[ZegoPluginUserInRoomAttributesCore]Unregister callback from ZIM...'\n    );\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('roomMemberAttributesUpdated');\n  }\n  // ------- internal utils ------\n  _resetData() {\n    this._resetDataForLeaveRoom();\n  }\n  _resetDataForLeaveRoom() {\n    this._roomBaseInfo = {} as ZIMRoomInfo;\n    this._isJoinRoom = false;\n  }\n  // ------- internal events exec ------\n  _notifyUsersInRoomAttributesUpdated(notifyData: {\n    infos: ZIMRoomMemberAttributesInfo[];\n    editor: string;\n  }) {\n    Object.keys(this._onUsersInRoomAttributesUpdatedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onUsersInRoomAttributesUpdatedCallbackMap[callbackID]) {\n          this._onUsersInRoomAttributesUpdatedCallbackMap[callbackID](\n            notifyData\n          );\n        }\n      }\n    );\n  }\n  // ------- external method ------\n  joinRoom(roomID: string) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror(\n        '[ZegoPluginUserInRoomAttributesCore]Please initialize it first.'\n      );\n      return Promise.reject();\n    }\n    return new Promise((resolve, reject) => {\n      if (!this._isJoinRoom) {\n        ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n          .enterRoom({ roomID, roomName: roomID })\n          .then(({ roomInfo }: ZIMRoomEnteredResult) => {\n            zloginfo(\n              `[ZegoPluginUserInRoomAttributesCore]Join the room successfully.`\n            );\n            this._roomBaseInfo = roomInfo.baseInfo;\n            this._isJoinRoom = true;\n            resolve(new ZegoPluginResult('', ''));\n          })\n          .catch((error: ZIMError) => {\n            zlogerror(\n              `[ZegoPluginUserInRoomAttributesCore]Failed to join the room, code: ${error.code}, message: ${error.message}`\n            );\n            reject(error);\n          });\n      } else {\n        zloginfo('[ZegoPluginUserInRoomAttributesCore]Join room already success.');\n        resolve(new ZegoPluginResult('', ''));\n      }\n    });\n  }\n  leaveRoom() {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror(\n        '[ZegoPluginUserInRoomAttributesCore]Please initialize it first.'\n      );\n      return Promise.reject();\n    }\n    if (!this._roomBaseInfo.roomID) {\n      zlogerror(\n        '[ZegoPluginUserInRoomAttributesCore]Please join the room first.'\n      );\n      return Promise.reject();\n    }\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .leaveRoom(this._roomBaseInfo.roomID)\n        .then(() => {\n          zloginfo(\n            `[ZegoPluginUserInRoomAttributesCore]Leave the room successfully.`\n          );\n          this._resetDataForLeaveRoom();\n          resolve(new ZegoPluginResult('', ''));\n        })\n        .catch((error: ZIMError) => {\n          zlogerror(\n            `[ZegoPluginUserInRoomAttributesCore]Failed to leave the room, code: ${error.code}, message: ${error.message}`\n          );\n          reject(error);\n        });\n    });\n  }\n  leaveAllRoom() {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror(\n        '[ZegoPluginUserInRoomAttributesCore]Please initialize it first.'\n      );\n      return Promise.reject();\n    }\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .leaveAllRoom()\n        .then(() => {\n          zloginfo(\n            `[ZegoPluginUserInRoomAttributesCore]Leave all room successfully.`\n          );\n          this._resetDataForLeaveRoom();\n          resolve(new ZegoPluginResult('', ''));\n        })\n        .catch((error: ZIMError) => {\n          zlogerror(\n            `[ZegoPluginUserInRoomAttributesCore]Failed to leave all room, code: ${error.code}, message: ${error.message}`\n          );\n          reject(error);\n        });\n    });\n  }\n\n  getRoomBaseInfo() {\n    return this._roomBaseInfo;\n  }\n  setUsersInRoomAttributes(attributes: Record<string, string>, userIDs: string[]) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror(\n        '[ZegoPluginUserInRoomAttributesCore]Please initialize it first.'\n      );\n      return Promise.reject();\n    }\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .setRoomMembersAttributes(\n          attributes,\n          userIDs,\n          this._roomBaseInfo.roomID,\n          { isDeleteAfterOwnerLeft: true }\n        )\n        .then(({ roomID, infos, errorUserList }: ZIMRoomMembersAttributesOperatedResult) => {\n          zloginfo(\n            `[ZegoPluginUserInRoomAttributesCore]Set attributes of users in room successfully.`\n          );\n          resolve({\n            ...new ZegoPluginResult('', ''),\n            errorUserList,\n            infos,\n          });\n        })\n        .catch((error: ZIMError) => {\n          zlogerror(\n            `[ZegoPluginUserInRoomAttributesCore]Failed to set the user's attributes, code: ${error.code}, message: ${error.message}`\n          );\n          reject(error);\n        });\n    });\n  }\n  queryUsersInRoomAttributes(config: ZIMRoomMemberAttributesQueryConfig) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror(\n        '[ZegoPluginUserInRoomAttributesCore]Please initialize it first.'\n      );\n      return Promise.reject();\n    }\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .queryRoomMemberAttributesList(this._roomBaseInfo.roomID, config)\n        .then(({ roomID, infos, nextFlag: resNextFlag }: ZIMRoomMemberAttributesListQueriedResult) => {\n          zloginfo(\n            `[ZegoPluginUserInRoomAttributesCore]Query attributes of users in room successfully.`\n          );\n          const params = {\n            ...new ZegoPluginResult('', ''),\n            nextFlag: resNextFlag,\n            infos,\n          };\n          resolve(params);\n        })\n        .catch((error: ZIMError) => {\n          zlogerror(\n            `[ZegoPluginUserInRoomAttributesCore]Failed to query the user's attributes, code: ${error.code}, message: ${error.message}`\n          );\n          reject(error);\n        });\n    });\n  }\n  // ------- external events register ------\n  onUsersInRoomAttributesUpdated(callbackID: string, callback: (notifyData: {\n    infos: ZIMRoomMemberAttributesInfo[];\n    editor: string;\n  }) => void) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror(\n        '[ZegoPluginUserInRoomAttributesCore]Please initialize it first.'\n      );\n    }\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onUsersInRoomAttributesUpdatedCallbackMap) {\n        zloginfo(\n          '[Core][onUsersInRoomAttributesUpdated] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onUsersInRoomAttributesUpdatedCallbackMap[callbackID];\n      }\n    } else {\n      this._onUsersInRoomAttributesUpdatedCallbackMap[callbackID] = callback;\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}