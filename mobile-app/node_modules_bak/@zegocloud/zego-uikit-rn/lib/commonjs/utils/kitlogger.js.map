{"version":3,"names":["_reactNative","require","_timer","LogRNModule","NativeModules","_userID","_listenerAlready","ZegoUIKitLogger","logSetUserID","userID","AppState","addEventListener","nextState","flush","logInfo","module","msg","dateFormat","getLocalDateFormat","Platform","OS","_formatLog","__DEV__","console","info","logWarning","warn","logError","error","logFlush","_default","exports","default","msgList","isPureString","i","length","_canLogToFile","join","jsonList","push","JSON","stringify","canLogTypeList","includes"],"sources":["kitlogger.ts"],"sourcesContent":["import { AppState, NativeModules, Platform } from 'react-native';\n\nimport { getLocalDateFormat } from './timer';\n\nconst { LogRNModule } = NativeModules;\n\nlet _userID = ''\nlet _listenerAlready = false\n\nconst ZegoUIKitLogger = {\n    logSetUserID: (userID: string) => {\n        _userID = userID\n\n        if (!_listenerAlready) {\n            AppState.addEventListener('change', async nextState => {\n                if (nextState === 'active' || nextState === 'background') {\n                    LogRNModule.flush();\n                }\n            });\n            _listenerAlready = true\n        }\n    },\n\n    logInfo: (module: string, ...msg: any[]) => {\n        let dateFormat = getLocalDateFormat()\n        if (Platform.OS === 'ios') {\n            LogRNModule.logInfo(`${dateFormat} I/${module}: ` + _formatLog(...msg));\n        } else {\n            LogRNModule.logInfo(`I/${module}: ` + _formatLog(...msg));\n        }\n\n        if (__DEV__) {\n            console.info(`${dateFormat} [${module}][${_userID}]`, ...msg);\n        }\n    },\n    \n    logWarning: (module: string, ...msg: any[]) => {\n        let dateFormat = getLocalDateFormat()\n        if (Platform.OS === 'ios') {\n            LogRNModule.logWarning(`${dateFormat} W/${module}: ` + _formatLog(...msg));\n        } else {\n            LogRNModule.logWarning(`W/${module}: ` + _formatLog(...msg));\n        }\n\n        if (__DEV__) {\n            console.warn(`${dateFormat} [${module}][${_userID}]`, ...msg);\n        }\n    },\n    \n    logError: (module: string, ...msg: any[]) => {\n        let dateFormat = getLocalDateFormat()\n        if (Platform.OS === 'ios') {\n            LogRNModule.logError(`${dateFormat} E/${module}: ` + _formatLog(...msg));\n        } else {\n            LogRNModule.logError(`E/${module}: ` + _formatLog(...msg));\n        }\n\n        if (__DEV__) {\n            console.error(`${dateFormat} [${module}][${_userID}]`, ...msg);\n        }\n    },\n\n    logFlush: () => {\n        LogRNModule.flush()\n    }\n}\n\nexport default ZegoUIKitLogger;\n\nfunction _formatLog(...msgList: any[]): string {\n    let isPureString = true;\n    for (let i = 0; i < msgList.length; i++) {\n        if (!_canLogToFile(msgList[i])) {\n            isPureString = false;\n            break;\n        }\n    }\n\n    if (isPureString == true) {\n        return msgList.join(\" \");\n    } else {\n        let jsonList: string[] = []\n        for (let i = 0; i < msgList.length; i++) {\n            if (_canLogToFile(msgList[i])) {\n                jsonList.push(msgList[i]);\n            } else {\n                jsonList.push(JSON.stringify(msgList[i]));\n            }\n        }\n        \n        return `(LogTruncated?) ${ jsonList.join(\" \") }`;\n    }\n}\n\nconst canLogTypeList: string[] = ['string', 'number', 'boolean']\n\nfunction _canLogToFile(msg: any) {\n    return canLogTypeList.includes(typeof msg)\n}"],"mappings":"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","ignoreList":[]}