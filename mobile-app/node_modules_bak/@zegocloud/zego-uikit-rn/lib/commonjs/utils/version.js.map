{"version":3,"names":["_reactNative","require","_ReactNativeVersion","_ZegoUIKitCorePlugin","_interopRequireDefault","_logger","_package_version","_report","e","__esModule","default","ZegoUIKitRNModule","NativeModules","logComponentsVersion","extraInfo","expressVersionPromise","getVersion","zimVersionPromise","ZegoUIKitCorePlugin","getZIMPlugin","_getCustomVersionPromise","zpnsVersionPromise","getZPNsPlugin","callkitVersionPromise","Platform","OS","getCallKitPlugin","iosBackgroundModesPromise","getBackgroundModes","reportVersionPromise","ZegoUIKitReport","Promise","all","then","versions","versionTable","Map","Object","entries","Version","getRnVersion","getPackageVersion","forEach","version","component","set","zloginfo","exports","displayVersion","ReactNativeVersion","major","minor","patch","join","prerelease","verDesc","resolve"],"sources":["version.ts"],"sourcesContent":["import { NativeModules, Platform } from 'react-native';\n// @ts-ignore\nimport {version as ReactNativeVersion} from 'react-native/Libraries/Core/ReactNativeVersion';\n\nimport ZegoUIKitCorePlugin from '../components/internal/ZegoUIKitCorePlugin';\nimport { zloginfo } from './logger';\nimport { getPackageVersion } from './package_version';\nimport ZegoUIKitReport from './report';\n\nconst { ZegoUIKitRNModule } = NativeModules;\n\nexport const logComponentsVersion = (extraInfo: Map<string, string>) => {\n    var expressVersionPromise = require('zego-express-engine-reactnative').default.getVersion()\n    var zimVersionPromise = ZegoUIKitCorePlugin.getZIMPlugin() ? ZegoUIKitCorePlugin.getZIMPlugin().default.getVersion() : _getCustomVersionPromise(\"Not installed\");\n    var zpnsVersionPromise = ZegoUIKitCorePlugin.getZPNsPlugin() ? ZegoUIKitCorePlugin.getZPNsPlugin().default.getVersion() : _getCustomVersionPromise(\"Not installed\");\n    var callkitVersionPromise = _getCustomVersionPromise('Not necessary')\n    if (Platform.OS === 'ios') {\n      callkitVersionPromise = ZegoUIKitCorePlugin.getCallKitPlugin() ? _getCustomVersionPromise(\"Unknown version\") : _getCustomVersionPromise(\"Not installed\");\n    }\n    var iosBackgroundModesPromise = ZegoUIKitRNModule.getBackgroundModes()\n    var reportVersionPromise = ZegoUIKitReport.getVersion()\n\n    Promise.all([expressVersionPromise, zimVersionPromise, zpnsVersionPromise, callkitVersionPromise, iosBackgroundModesPromise, reportVersionPromise])\n    .then(versions => {\n      let versionTable = new Map<string, string>(Object.entries({\n        'OS': `${Platform.OS} ${Platform.Version ?? ''}`,\n        'RN': getRnVersion(),\n        'Express': versions[0],\n        'ZIM': versions[1],\n        'ZPNs': versions[2],\n        'CallKit(iOS)': versions[3],\n        'BackgroundModes(iOS)': versions[4],\n        'ZegoUIKit': getPackageVersion(),\n        'Report': versions[5],\n      }));\n      extraInfo.forEach((version, component) => {\n        versionTable.set(component, version);\n      });\n\n      zloginfo('Components version: ')\n      versionTable.forEach((version, component) => {\n        zloginfo(`  ${component} => ${version}`);\n      });\n    })\n};\n\nexport const getRnVersion = () => {\n  const displayVersion =\n  [\n    ReactNativeVersion.major,\n    ReactNativeVersion.minor,\n    ReactNativeVersion.patch,\n  ].join('.') +\n  (ReactNativeVersion.prerelease != null\n    ? '-' + ReactNativeVersion.prerelease\n    : '');\n\n  return displayVersion\n}\n\nconst _getCustomVersionPromise = (verDesc: string) => {\n  return new Promise<string>((resolve) => {resolve(verDesc);})\n}"],"mappings":"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","ignoreList":[]}