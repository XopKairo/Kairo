{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_native","_zegoUikitRn","_services","_interopRequireDefault","_logger","_bell","_callevent_notify_app","_invite_state_manager","_plugins","_ZegoCallInvationForeground","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ZegoUIKitPrebuiltCallWaitingScreen","props","TAG","navigation","useNavigation","appID","appSign","ZegoUIKitPrebuiltCallService","getInstance","getInitAppInfo","userID","userName","getInitUser","initConfig","getInitConfig","avatarBuilder","waitingPageConfig","route","roomID","isVideoCall","invitees","inviterID","invitationID","callName","params","getInviteeIDList","map","invitee","grantPermissions","callback","Platform","OS","grantedAudio","PermissionsAndroid","check","PERMISSIONS","RECORD_AUDIO","grantedCamera","CAMERA","ungrantedPermissions","isAudioGranted","isVideoGranted","push","error","zloginfo","requestMultiple","then","result","hangUpHandle","ZegoUIKit","uninit","CallEventNotifyApp","notifyEvent","CallInviteStateManage","isAutoCancelInvite","getSignalingPlugin","cancelInvitation","JSON","stringify","ZegoPrebuiltPlugins","getLocalUser","updateInviteDataAfterCancel","BellManage","stopOutgoingSound","initInviteData","goBack","useEffect","playOutgoingSound","init","turnCameraOn","turnMicrophoneOn","setAudioOutputToSpeaker","unsubscribe1","addListener","unsubscribe2","unsubscribe3","handleBackButton","callbackID","String","Math","floor","random","length","onInvitationResponseTimeout","callID","data","dataParsed","parse","dataInDataParsed","call_id","onInvitationRefused","callIDs","Array","from","_invitationMap","keys","includes","reason","onInvitationCanceled","zlogwarning","onInviteCompletedWithNobody","onInvitationAccepted","state","getState","routes","name","join","isAlreadyInCall","some","navigate","origin","inviter","useFrontFacingCamera","isUsingFrontFacingCamera","backHandler","BackHandler","addEventListener","setOptions","gestureEnabled","remove","createElement","View","style","styles","container","ZegoAudioVideoView","useVideoViewAspectFill","foregroundBuilder","onHangUp","isGroupCall","topMenuContainer","ZegoSwitchCameraButton","iconBuilder","switchCameraBuilder","StyleSheet","create","width","height","flex","zIndex","paddingRight","top","alignItems"],"sources":["ZegoCallInvitationWaiting.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { StyleSheet, View, Platform, PermissionsAndroid, BackHandler } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\n\nimport ZegoUIKit, {\n  ZegoAudioVideoView,\n  ZegoSwitchCameraButton,\n} from '@zegocloud/zego-uikit-rn';\n\nimport ZegoUIKitPrebuiltCallService from '../../services';\nimport { zloginfo, zlogwarning } from '../../utils/logger';\nimport BellManage from '../services/bell';\nimport CallEventNotifyApp from '../services/callevent_notify_app';\nimport CallInviteStateManage from '../services/invite_state_manager';\nimport ZegoPrebuiltPlugins from '../services/plugins';\nimport ZegoCallInvationForeground from './ZegoCallInvationForeground';\n\nexport default function ZegoUIKitPrebuiltCallWaitingScreen(props) {\n  const TAG = 'ZegoUIKitPrebuiltCallWaitingScreen';\n\n  const navigation = useNavigation();\n  const { appID, appSign } = ZegoUIKitPrebuiltCallService.getInstance().getInitAppInfo();\n  const { userID, userName } = ZegoUIKitPrebuiltCallService.getInstance().getInitUser();\n  const initConfig = ZegoUIKitPrebuiltCallService.getInstance().getInitConfig();\n  const { avatarBuilder, waitingPageConfig } = initConfig;\n  const { route } = props;\n  const {\n    roomID,\n    isVideoCall,\n    invitees,\n    inviterID,\n    invitationID,\n    callName,\n  } = route.params;\n\n  const getInviteeIDList = () => {\n    return invitees.map(invitee => {\n      return invitee.userID\n    });\n  }\n  const grantPermissions = async (callback) => {\n    // Android: Dynamically obtaining device permissions\n    if (Platform.OS === 'android') {\n      // Check if permission granted\n      let grantedAudio = PermissionsAndroid.check(\n        PermissionsAndroid.PERMISSIONS.RECORD_AUDIO\n      );\n      let grantedCamera = PermissionsAndroid.check(\n        PermissionsAndroid.PERMISSIONS.CAMERA\n      );\n      const ungrantedPermissions = [];\n      try {\n        const isAudioGranted = await grantedAudio;\n        const isVideoGranted = await grantedCamera;\n        if (!isAudioGranted) {\n          ungrantedPermissions.push(\n            PermissionsAndroid.PERMISSIONS.RECORD_AUDIO\n          );\n        }\n        if (!isVideoGranted && isVideoCall) {\n          ungrantedPermissions.push(PermissionsAndroid.PERMISSIONS.CAMERA);\n        }\n      } catch (error) {\n        ungrantedPermissions.push(\n          PermissionsAndroid.PERMISSIONS.RECORD_AUDIO,\n          PermissionsAndroid.PERMISSIONS.CAMERA\n        );\n      }\n      // If not, request it\n      zloginfo(`[ZegoUIKitPrebuiltCallWaitingScreen] requestMultiple, ungrantedPermissions: ${ungrantedPermissions}`);\n      return PermissionsAndroid.requestMultiple(ungrantedPermissions).then(\n        (result) => {\n          zloginfo(`[ZegoUIKitPrebuiltCallWaitingScreen] requestMultiple, result: ${result}`);\n          if (callback) {\n            callback();\n          }\n        }\n      );\n    } else if (callback) {\n      callback();\n    }\n  };\n  const hangUpHandle = () => {\n    zloginfo('[ZegoUIKitPrebuiltCallWaitingScreen] hangUpHandle, Leave room on waiting page');\n\n    ZegoUIKit.uninit();\n    CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallCancelButtonPressed', navigation, roomID, invitees, isVideoCall ? 1 : 0)\n    if (CallInviteStateManage.isAutoCancelInvite(invitationID)) {\n      ZegoUIKit.getSignalingPlugin().cancelInvitation(getInviteeIDList(), JSON.stringify({\n        \"call_id\": roomID, \n        \"operation_type\": \"cancel_invitation\",\n        'inviter': {userID: ZegoPrebuiltPlugins.getLocalUser().userID, userName: ZegoPrebuiltPlugins.getLocalUser().userName}\n      }));\n      CallInviteStateManage.updateInviteDataAfterCancel(invitationID);\n    }\n    BellManage.stopOutgoingSound();\n    CallInviteStateManage.initInviteData();\n    navigation.goBack();\n  };\n\n  useEffect(() => {\n    BellManage.playOutgoingSound();\n    ZegoUIKit.init(appID, appSign, { userID, userName }).then(() => {\n      grantPermissions(() => {\n        ZegoUIKit.turnCameraOn('', isVideoCall);\n        ZegoUIKit.turnMicrophoneOn('', true);\n        ZegoUIKit.setAudioOutputToSpeaker(true);\n      });\n    });\n    const unsubscribe1 = navigation.addListener('blur', () => {  \n      zloginfo('[Navigation] ZegoUIKitPrebuiltCallWaitingScreen, blur');\n    })\n    const unsubscribe2 = navigation.addListener('focus', () => {  \n      zloginfo('[Navigation] ZegoUIKitPrebuiltCallWaitingScreen, focus');\n    })\n    const unsubscribe3 = navigation.addListener('beforeRemove', () => {  \n      zloginfo('[Navigation] ZegoUIKitPrebuiltCallWaitingScreen, beforeRemove');\n    })\n    return () => {\n      BellManage.stopOutgoingSound();\n      unsubscribe1();\n      unsubscribe2();\n      unsubscribe3();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleBackButton = () => {\n    return true;\n  }\n\n  useEffect(() => {\n    zloginfo(`ZegoUIKitPrebuiltCallWaitingScreen useEffect, invitationID: ${invitationID}`);\n\n    const callbackID =\n      'ZegoUIKitPrebuiltCallWaitingScreen' + String(Math.floor(Math.random() * 10000));\n    if (invitees.length === 1) {\n      ZegoUIKit.getSignalingPlugin().onInvitationResponseTimeout(callbackID, ({callID, invitees, data}) => {\n        zloginfo(`onInvitationResponseTimeout implement by ${TAG}, callID: ${callID}, data: ${data}`);\n\n        ZegoUIKit.uninit();\n        BellManage.stopOutgoingSound();\n        // ZegoUIKit.leaveRoom();\n        CallInviteStateManage.initInviteData();\n        navigation.goBack();\n\n        let dataParsed = data ? JSON.parse(data) : {}\n        const dataInDataParsed = dataParsed.data ? JSON.parse(dataParsed.data) : {}\n        CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallTimeout',\n          dataInDataParsed.call_id,\n          dataParsed.invitees\n        )\n\n        zloginfo(`onInvitationResponseTimeout implement by ${TAG}, process done`);\n      });\n      ZegoUIKit.getSignalingPlugin().onInvitationRefused(callbackID, ({callID, invitee, data}) => {\n        zloginfo(`onInvitationRefused implement by ${TAG}, callID: ${callID}, data: ${data}`);\n  \n        ZegoUIKit.uninit();\n        const callIDs = Array.from(CallInviteStateManage._invitationMap.keys());\n        if (callIDs.includes(callID)) {\n          BellManage.stopOutgoingSound();\n          // ZegoUIKit.leaveRoom();\n          CallInviteStateManage.initInviteData();\n          navigation.goBack();\n        }\n\n        let dataParsed = data ? JSON.parse(data) : {}\n        if (dataParsed.reason === 'busy') {\n          CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallRejectedCauseBusy', dataParsed.call_id, dataParsed.invitee)\n        } else {\n          CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallDeclined', dataParsed.call_id, dataParsed.invitee)\n        }\n      });\n\n      // After the caller initiates a call and then loses network connectivity, \n      // the server will cancel the call and notify both the caller and the callee that the call has been canceled.\n      ZegoUIKit.getSignalingPlugin().onInvitationCanceled(callbackID, (result) => {\n        zloginfo(`[ZegoUIKitPrebuiltCallWaitingScreen] onInvitationCanceled, result: ${JSON.stringify(result)}`);\n        if (result.callID !== invitationID) {\n          zlogwarning('[ZegoUIKitPrebuiltCallWaitingScreen] onInvitationCanceled, callID not match')\n          return\n        }\n\n        ZegoUIKit.uninit();\n        BellManage.stopOutgoingSound();\n        CallInviteStateManage.initInviteData();\n        navigation.goBack();\n      });\n    } else {\n      // CallInviteStateManage.onSomeoneAcceptedInvite(callbackID, () => {\n      //   zloginfo('Someone accepted the invitation');\n      //   BellManage.stopOutgoingSound();\n      // });\n      CallInviteStateManage.onInviteCompletedWithNobody(callbackID, () => {\n        zloginfo('[ZegoUIKitPrebuiltCallWaitingScreen] onInviteCompletedWithNobody');\n\n        ZegoUIKit.uninit();\n        navigation.goBack();\n      });\n    }\n    ZegoUIKit.getSignalingPlugin().onInvitationAccepted(callbackID, ({ invitee, data }) => {\n      zloginfo(`onInvitationAccepted implement by ${TAG}, invitee: ${JSON.stringify(invitee)}, data: ${data}`);\n\n      BellManage.stopOutgoingSound();\n\n        // ZegoUIKit.leaveRoom().then(() => {\n          zloginfo('Jump to call room page.');\n\n          const state = navigation.getState();\n          zloginfo(`Current navigation routes: [${state.routes.map(r => r.name).join(', ')}]`)\n          \n          const isAlreadyInCall = state.routes.some(r => r.name === 'ZegoUIKitPrebuiltCallInCallScreen');\n          if (isAlreadyInCall) {\n            zloginfo('Already in ZegoUIKitPrebuiltCallInCallScreen page, do not need to jump again.')\n          } else {\n            zloginfo('Navigate to ZegoUIKitPrebuiltCallInCallScreen')\n            navigation.navigate('ZegoUIKitPrebuiltCallInCallScreen', {\n              origin: 'ZegoUIKitPrebuiltCallWaitingScreen',\n              roomID,\n              isVideoCall,\n              invitees: getInviteeIDList(),\n              inviter: inviterID,\n              invitationID,\n              useFrontFacingCamera: ZegoUIKit.isUsingFrontFacingCamera()\n            });\n          }\n        // });\n\n      let dataParsed = data ? JSON.parse(data) : {}\n      CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallAccepted', dataParsed.call_id, dataParsed.invitee)\n\n      zloginfo(`onInvitationAccepted implement by ${TAG}, process done`);\n    });\n\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackButton);\n    navigation.setOptions({ gestureEnabled: false });\n\n    return () => {\n      ZegoUIKit.getSignalingPlugin().onInvitationResponseTimeout(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationRefused(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationCanceled(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationAccepted(callbackID);\n      CallInviteStateManage.onInviteCompletedWithNobody(callbackID);\n      backHandler.remove()\n      navigation.setOptions({ gestureEnabled: true });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      {isVideoCall ? (\n        <ZegoAudioVideoView\n          userID={userID}\n          roomID={roomID}\n          useVideoViewAspectFill={true}\n          // eslint-disable-next-line react/no-unstable-nested-components\n          foregroundBuilder={() => (\n            <ZegoCallInvationForeground\n              isVideoCall={isVideoCall}\n              invitee={invitees[0]}\n              onHangUp={hangUpHandle}\n              avatarBuilder={avatarBuilder}\n              waitingPageConfig={waitingPageConfig}\n              callName={callName}\n              isGroupCall={invitees.length > 1}\n            />\n          )}\n        />\n      ) : (\n        <ZegoCallInvationForeground\n          isVideoCall={isVideoCall}\n          invitee={invitees[0]}\n          onHangUp={hangUpHandle}\n          avatarBuilder={avatarBuilder}\n          waitingPageConfig={waitingPageConfig}\n          callName={callName}\n          isGroupCall={invitees.length > 1}\n        />\n      )}\n      {isVideoCall ? (\n        <View style={styles.topMenuContainer}>\n          <ZegoSwitchCameraButton iconBuilder={waitingPageConfig.switchCameraBuilder} />\n        </View>\n      ) : (\n        <View />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    height: '100%',\n    flex: 1,\n  },\n  topMenuContainer: {\n    zIndex: 2,\n    width: '100%',\n    paddingRight: 15,\n    top: 30,\n    alignItems: 'flex-end',\n  },\n});\n"],"mappings":"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","ignoreList":[]}