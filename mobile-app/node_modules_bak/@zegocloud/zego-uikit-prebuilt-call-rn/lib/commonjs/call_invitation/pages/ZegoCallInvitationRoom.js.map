{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_native","_zegoUikitRn","_interopRequireDefault","_call","_minimizing_helper","_prebuilt_helper","_services","_defines","_timing_helper","_logger","_bell","_defines2","_hangup_helper","_invite_state_manager","_notification_helper","_plugins","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ZegoUIKitPrebuiltCallInCallScreen","props","navigation","useNavigation","appID","appSign","ZegoUIKitPrebuiltCallService","getInstance","getInitAppInfo","userID","userName","getInitUser","initConfig","getInitConfig","requireConfig","avatarBuilder","requireInviterConfig","route","isMinimizeSwitch","MinimizingHelper","getIsMinimizeSwitch","zloginfo","JSON","stringify","params","routeParams","PrebuiltHelper","getRouteParams","origin","roomID","isVideoCall","invitees","inviter","invitationID","useFrontFacingCamera","TimingHelper","resetDuration","ZegoUIKit","isUsingFrontFacingCamera","callInvitationData","type","ZegoInvitationType","videoCall","voiceCall","callID","requireDefaultConfig","data","callConfig","length","GROUP_VIDEO_CALL_CONFIG","GROUP_VOICE_CALL_CONFIG","ONE_ON_ONE_VIDEO_CALL_CONFIG","ONE_ON_ONE_VOICE_CALL_CONFIG","config","onCallEnd","_config$timingConfig","onDurationUpdate","timingConfig","_onCallEnd","reason","duration","ZegoCallEndReason","localHangUp","hangUpHandle","callEndHandle","isMinimize","getIsMinimize","notifyDestroyPrebuilt","goBack","clearAutoHangUpTimer","AppState","currentState","currentInCallID","NotificationHelper","getCurrentInCallID","hangUp","CallInviteStateManage","isAutoCancelInvite","getSignalingPlugin","cancelInvitation","ZegoPrebuiltPlugins","getLocalUser","updateInviteDataAfterCancel","hangUpTimer","startAutoHangUpTimer","detectSeconds","clearTimeout","newTimer","setTimeout","getDuration","useEffect","callbackID","String","Math","floor","random","BellManage","playOutgoingSound","onSomeoneAcceptedInvite","stopOutgoingSound","onInviteCompletedWithNobody","HangupHelper","onAutoJump","unsubscribe1","addListener","unsubscribe2","unsubscribe3","initInviteData","createElement","onJoinRoom","enabled","onHangUpConfirmation","undefined","onUserJoin","userInfoList","foundInviterJoin","some","userInfo","_"],"sources":["ZegoCallInvitationRoom.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { AppState } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\n\nimport ZegoUIKit from '@zegocloud/zego-uikit-rn';\n\nimport ZegoUIKitPrebuiltCall from '../../call';\nimport MinimizingHelper from \"../../call/services/minimizing_helper\";\nimport PrebuiltHelper from \"../../call/services/prebuilt_helper\";\nimport ZegoUIKitPrebuiltCallService from '../../services';\nimport {\n  ONE_ON_ONE_VIDEO_CALL_CONFIG,\n  ONE_ON_ONE_VOICE_CALL_CONFIG,\n  GROUP_VIDEO_CALL_CONFIG,\n  GROUP_VOICE_CALL_CONFIG,\n  ZegoCallEndReason,\n} from '../../services/defines';\nimport TimingHelper from '../../services/timing_helper';\nimport { zloginfo } from '../../utils/logger';\nimport BellManage from '../services/bell';\nimport { ZegoInvitationType } from '../services/defines';\nimport HangupHelper from '../services/hangup_helper';\nimport CallInviteStateManage from '../services/invite_state_manager';\nimport NotificationHelper from '../services/notification_helper';\nimport ZegoPrebuiltPlugins from '../services/plugins';\n\nexport default function ZegoUIKitPrebuiltCallInCallScreen(props) {\n  const navigation = useNavigation();\n  const { appID, appSign } = ZegoUIKitPrebuiltCallService.getInstance().getInitAppInfo();\n  const { userID, userName } = ZegoUIKitPrebuiltCallService.getInstance().getInitUser();\n  const initConfig = ZegoUIKitPrebuiltCallService.getInstance().getInitConfig();\n  const { requireConfig, avatarBuilder, requireInviterConfig } = initConfig;\n  const { route } = props;\n\n  const isMinimizeSwitch = MinimizingHelper.getInstance().getIsMinimizeSwitch();\n  zloginfo(`#####ZegoUIKitPrebuiltCallInCallScreen####### isMinimizeSwitch: ${isMinimizeSwitch}, route.params: ${JSON.stringify(route.params)}`);\n  let routeParams = PrebuiltHelper.getInstance().getRouteParams();\n  if (!isMinimizeSwitch) {\n    routeParams.origin = route.params.origin;\n    routeParams.roomID = route.params.roomID;\n    routeParams.isVideoCall = route.params.isVideoCall;\n    routeParams.invitees = route.params.invitees;\n    routeParams.inviter = route.params.inviter;\n    routeParams.invitationID = route.params.invitationID;\n    routeParams.useFrontFacingCamera = route.params.useFrontFacingCamera;\n    TimingHelper.getInstance().resetDuration()\n  } else {\n    routeParams.useFrontFacingCamera = ZegoUIKit.isUsingFrontFacingCamera();\n  }\n  zloginfo(`#####ZegoUIKitPrebuiltCallInCallScreen####### routeParams: ${JSON.stringify(routeParams)}`);\n\n  const {\n    origin,\n    roomID,\n    isVideoCall,\n    invitees,\n    inviter,\n    invitationID,\n    useFrontFacingCamera\n  } = routeParams;\n  const callInvitationData = {\n    type: isVideoCall\n      ? ZegoInvitationType.videoCall\n      : ZegoInvitationType.voiceCall,\n    invitees,\n    callID: roomID,\n  };\n  const requireDefaultConfig = (data) => {\n    const callConfig =\n      data.invitees.length > 1\n        ? ZegoInvitationType.videoCall === data.type\n          ? GROUP_VIDEO_CALL_CONFIG\n          : GROUP_VOICE_CALL_CONFIG\n        : ZegoInvitationType.videoCall === data.type\n          ? ONE_ON_ONE_VIDEO_CALL_CONFIG\n          : ONE_ON_ONE_VOICE_CALL_CONFIG;\n    return {\n      ...callConfig,\n    };\n  };\n  const config = typeof requireConfig === 'function' ? {\n    ...requireDefaultConfig(callInvitationData),\n    ...requireConfig(callInvitationData),\n    requireInviterConfig\n  } : requireDefaultConfig(callInvitationData);\n\n  // Store requireConfig.onCallEnd in PrebuiltHelper.routeParams, so FloatingMinimizedView can call it before notifyDestroyPrebuilt\n  if (!isMinimizeSwitch && !routeParams.onCallEnd) {\n    routeParams.onCallEnd = config.onCallEnd\n    routeParams.onDurationUpdate = config.timingConfig?.onDurationUpdate\n  }\n\n  const _onCallEnd = (roomID, reason, duration) => {\n    // reason 0-localHangUp, 1-remoteHangUp, 2-kickOut\n    zloginfo(`[ZegoUIKitPrebuiltCallInCallScreen][_onCallEnd], roomID: ${roomID}, reason: ${reason}, duration: ${duration}`);\n    if (reason === ZegoCallEndReason.localHangUp) {\n      hangUpHandle();\n    } else {\n      callEndHandle();\n    }\n\n    // callback.\n    if (typeof config.onCallEnd == 'function') {\n      zloginfo('[ZegoUIKitPrebuiltCallInCallScreen][_onCallEnd] notify requireConfig.onCallEnd will')\n      config.onCallEnd(roomID, reason, duration);\n      zloginfo('[ZegoUIKitPrebuiltCallInCallScreen][_onCallEnd] notify requireConfig.onCallEnd succeed')\n    } else {\n      const isMinimize = MinimizingHelper.getInstance().getIsMinimize();\n      if (isMinimize) {\n        PrebuiltHelper.getInstance().notifyDestroyPrebuilt();\n      } else {\n        navigation.goBack();\n        origin === 'ZegoUIKitPrebuiltCallWaitingScreen' && navigation.goBack();\n      }\n    }\n    \n    clearAutoHangUpTimer();\n\n    zloginfo('[ZegoUIKitPrebuiltCallInCallScreen][_onCallEnd] process done');\n  };\n\n  const callEndHandle = () => {\n    if (AppState.currentState === 'background') {\n      let currentInCallID = NotificationHelper.getInstance().getCurrentInCallID()\n      if (currentInCallID) {\n        NotificationHelper.getInstance().hangUp(currentInCallID, 'other')\n      }\n    }\n  };\n\n  const hangUpHandle = () => {\n    callEndHandle();\n    // Determine if the current is Inviter\n    if (\n      inviter === userID &&\n      CallInviteStateManage.isAutoCancelInvite(invitationID)\n    ) {\n      ZegoUIKit.getSignalingPlugin().cancelInvitation(invitees, JSON.stringify({\n        \"call_id\": roomID, \n        \"operation_type\": \"cancel_invitation\",\n        'inviter': {userID: ZegoPrebuiltPlugins.getLocalUser().userID, userName: ZegoPrebuiltPlugins.getLocalUser().userName}\n      }));\n      CallInviteStateManage.updateInviteDataAfterCancel(invitationID);\n    }\n  };\n\n  let hangUpTimer = null;\n  const startAutoHangUpTimer = (detectSeconds) => {\n    if (hangUpTimer) {\n      clearTimeout(hangUpTimer);\n    }\n\n    zloginfo(`[ZegoUIKitPrebuiltCallInCallScreen] startAutoHangUpTimer, will auto hangup after ${detectSeconds} seconds if inviter does not join this call.`);\n    const newTimer = setTimeout(() => {\n      zloginfo('[ZegoUIKitPrebuiltCallInCallScreen] autoHangUp');\n      const duration = TimingHelper.getInstance().getDuration();\n      _onCallEnd(roomID, ZegoCallEndReason.localHangUp, duration);\n    }, detectSeconds * 1000);\n\n    hangUpTimer = newTimer;\n  };\n\n  const clearAutoHangUpTimer = () => {\n    if (hangUpTimer) {\n      zloginfo('[ZegoUIKitPrebuiltCallInCallScreen] clearAutoHangUpTimer');\n      clearTimeout(hangUpTimer);\n      hangUpTimer = null;\n    }\n  };\n\n  useEffect(() => {\n    zloginfo(`ZegoUIKitPrebuiltCallInCallScreen useEffect`);\n\n    const callbackID =\n      'ZegoUIKitPrebuiltCallInCallScreen ' + String(Math.floor(Math.random() * 10000));\n    \n    // if group call from `ZegoUIKitPrebuiltCallWaitingScreen`, don't need add this anymore.\n    if (invitees.length > 1 && inviter === userID && origin != 'ZegoUIKitPrebuiltCallWaitingScreen') {\n      BellManage.playOutgoingSound();\n      CallInviteStateManage.onSomeoneAcceptedInvite(callbackID, () => {\n        zloginfo('Someone accepted the invitation');\n        BellManage.stopOutgoingSound();\n      });\n      CallInviteStateManage.onInviteCompletedWithNobody(callbackID, () => {\n        zloginfo('Invite completed with nobody');\n        // navigation.navigate('ZegoInnerChildrenPage');\n        // just go back, don't need call `onCallEnd`.\n        navigation.goBack();\n        origin === 'ZegoUIKitPrebuiltCallWaitingScreen' && invitees.length === 1 && navigation.goBack();\n      });\n    }\n    HangupHelper.getInstance().onAutoJump(callbackID, () => {\n      zloginfo('########onAutoJump#########', origin, invitees.length);\n      hangUpHandle();\n\n      navigation.goBack();\n      origin === 'ZegoUIKitPrebuiltCallWaitingScreen' && invitees.length === 1 && navigation.goBack();\n    });\n\n    const unsubscribe1 = navigation.addListener('blur', () => {  \n      zloginfo('[Navigation] ZegoUIKitPrebuiltCallInCallScreen, blur');\n    })\n    const unsubscribe2 = navigation.addListener('focus', () => {  \n      zloginfo('[Navigation] ZegoUIKitPrebuiltCallInCallScreen, focus');\n    })\n    const unsubscribe3 = navigation.addListener('beforeRemove', () => {  \n      zloginfo('[Navigation] ZegoUIKitPrebuiltCallInCallScreen, beforeRemove');\n    })\n\n    return () => {\n      zloginfo('ZegoUIKitPrebuiltCallInCallScreen useEffect return');\n\n      HangupHelper.getInstance().onAutoJump(callbackID);\n      CallInviteStateManage.onSomeoneAcceptedInvite(callbackID);\n      CallInviteStateManage.onInviteCompletedWithNobody(callbackID);\n      BellManage.stopOutgoingSound();\n      CallInviteStateManage.initInviteData();\n      unsubscribe1();\n      unsubscribe2();\n      unsubscribe3();\n    };\n  }, []);\n\n  return (\n    <ZegoUIKitPrebuiltCall\n      appID={appID}\n      appSign={appSign}\n      userID={userID}\n      userName={userName}\n      callID={roomID}\n      config={{\n        ...config,\n        useFrontFacingCamera,\n        onJoinRoom: () => {\n          zloginfo('[ZegoUIKitPrebuiltCallInCallScreen] onJoinRoom');\n          // If I am not the person who initiated the call, then set a timer to hang up according to the configuration settings\n          if (userID !== inviter) {\n            if (typeof config.requireInviterConfig == 'object' \n              && config.requireInviterConfig.enabled && config.requireInviterConfig.detectSeconds > 0) {\n                startAutoHangUpTimer(config.requireInviterConfig.detectSeconds);\n              }\n          }\n        },\n        onCallEnd: (callID, reason, duration) => {\n          _onCallEnd(callID, reason, duration)\n        },\n        avatarBuilder: avatarBuilder,\n        onHangUpConfirmation: (typeof config.onHangUpConfirmation === 'function') ? () => {return config.onHangUpConfirmation()} : undefined,\n        onUserJoin: (userInfoList) => {\n          const foundInviterJoin = userInfoList.some((userInfo, _) => {\n            if (inviter === userInfo.userID) {\n              return true;\n            }\n            return false;\n          });\n\n          if (foundInviterJoin) {\n            zloginfo('[ZegoUIKitPrebuiltCallInCallScreen] found inviter joined room, will clearAutoHangUpTimer');\n            clearAutoHangUpTimer();\n          }\n        },\n      }}\n    />\n  );\n}\n"],"mappings":"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","ignoreList":[]}