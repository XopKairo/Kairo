{"version":3,"names":["_reactNative","require","_reactNativeSound","_interopRequireDefault","_logger","e","__esModule","default","ZegoUIKitPrebuiltCallRNModule","NativeModules","BellManage","_incomingCallFileName","_outgoingCallFileName","_whooshIncoming","_whooshOutgoing","vibrate","Vibration","cancleVirate","cancel","initRingtoneConfig","ringtoneConfig","incomingCallFileName","outgoingCallFileName","initIncomingSound","zloginfo","Promise","resolve","reject","Sound","MAIN_BUNDLE","error","zlogerror","setNumberOfLoops","initOutgoingSound","playIncomingSound","changeToSpeaker","play","success","stopIncomingSound","stop","playOutgoingSound","changeToReceiver","stopOutgoingSound","releaseIncomingSound","release","releaseOutgoingSound","_default","exports"],"sources":["bell.js"],"sourcesContent":["import { NativeModules, Vibration } from 'react-native';\nimport Sound from 'react-native-sound';\nimport { zloginfo, zlogerror, zlogwarning } from '../../utils/logger';\n\nconst { ZegoUIKitPrebuiltCallRNModule } = NativeModules;\n\n// console.warn('Sound', Sound);\n// console.warn('Vibration', Vibration);\n\nconst BellManage = {\n  _incomingCallFileName: '',\n  _outgoingCallFileName: '',\n  _whooshIncoming: null,\n  _whooshOutgoing: null,\n  vibrate: () => {\n    Vibration.vibrate([0, 500, 1000, 500], true);\n  },\n  cancleVirate: () => {\n    Vibration.cancel();\n  },\n  initRingtoneConfig: (ringtoneConfig) => {\n    BellManage._incomingCallFileName = ringtoneConfig.incomingCallFileName;\n    BellManage._outgoingCallFileName = ringtoneConfig.outgoingCallFileName;\n  },\n  initIncomingSound: () => {\n    zloginfo('[BellManage][initIncomingSound]')\n    // Sound.setCategory('Playback');\n    return new Promise((resolve, reject) => {\n      BellManage._whooshIncoming = new Sound(\n        BellManage._incomingCallFileName,\n        Sound.MAIN_BUNDLE,\n        (error) => {\n          if (error) {\n            zlogerror('Failed to load the sound of zego_incoming', error);\n            reject();\n          } else {\n            zloginfo('Load the sound of zego_incoming successfully');\n            BellManage._whooshIncoming.setNumberOfLoops(-1);\n            resolve(BellManage._whooshIncoming);\n          }\n        }\n      );\n    });\n  },\n  initOutgoingSound: () => {\n    return new Promise((resolve, reject) => {\n      BellManage._whooshOutgoing = new Sound(\n        BellManage._outgoingCallFileName,\n        Sound.MAIN_BUNDLE,\n        (error) => {\n          if (error) {\n            zlogerror('Failed to load the sound of zego_outgoing', error);\n            reject();\n          } else {\n            zloginfo('Load the sound of zego_outgoing successfully');\n            BellManage._whooshOutgoing.setNumberOfLoops(-1);\n            resolve(BellManage._whooshOutgoing);\n          }\n        }\n      );\n    });\n  },\n  playIncomingSound: () => {\n    ZegoUIKitPrebuiltCallRNModule.changeToSpeaker()\n    \n    BellManage._whooshIncoming.play((success) => {\n      if (success) {\n        zloginfo('successfully finished playing zego_incoming');\n      } else {\n        zloginfo(\n          'playback zego_incoming failed due to audio decoding errors'\n        );\n      }\n    });\n    zloginfo('successfully playing zego_incoming');\n  },\n  stopIncomingSound: () => {\n    if (!BellManage._whooshIncoming) {\n      zloginfo('[BellManage][stopOutgoingSound] _whooshIncoming is null');\n      return\n    }\n    BellManage._whooshIncoming.stop(() => {\n      zloginfo('successfully stop playing zego_incoming');\n    });\n  },\n  playOutgoingSound: () => {\n    ZegoUIKitPrebuiltCallRNModule.changeToReceiver()\n\n    BellManage._whooshOutgoing.play((success) => {\n      if (success) {\n        zloginfo('successfully finished playing zego_outgoing');\n      } else {\n        zloginfo(\n          'playback zego_outgoing failed due to audio decoding errors'\n        );\n      }\n    });\n    zloginfo('successfully playing zego_outgoing');\n  },\n  stopOutgoingSound: () => {\n    BellManage._whooshOutgoing.stop(() => {\n      zloginfo('successfully stop playing zego_outgoing');\n    });\n  },\n  releaseIncomingSound: () => {\n    zloginfo('[BellManage][releaseIncomingSound]')\n    BellManage._whooshIncoming.release();\n    BellManage._whooshIncoming = null;\n    zloginfo('successfully release the audio player resource');\n  },\n  releaseOutgoingSound: () => {\n    BellManage._whooshOutgoing.release();\n    BellManage._whooshOutgoing = null;\n    zloginfo('successfully release the audio player resource');\n  },\n};\n\nexport default BellManage;\n"],"mappings":"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","ignoreList":[]}