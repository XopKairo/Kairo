{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_utils","_timing_helper","_interopRequireDefault","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ZegoCountdownLabel","props","maxDuration","onCountdownFinished","duration","setDuration","useState","Math","max","TimingHelper","getInstance","getDuration","countdownFinished","setCountdownFinished","useEffect","onDurationUpdate","v","createElement","View","style","styles","container","pointerEvents","SafeAreaView","Text","timing","durationFormat","StyleSheet","create","flex","position","width","height","top","zIndex","alignItems","color"],"sources":["ZegoCountdownLabel.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, StyleSheet, Text, SafeAreaView } from 'react-native';\nimport { durationFormat } from \"../utils\";\nimport TimingHelper, { } from \"../services/timing_helper\"\n\nexport default function ZegoCountdownLabel(props) {\n    const { maxDuration, onCountdownFinished } = props;\n    const [duration, setDuration] = useState(Math.max(maxDuration - TimingHelper.getInstance().getDuration(), 0));\n    const [countdownFinished, setCountdownFinished] = useState(false);\n    useEffect(() => {\n        TimingHelper.getInstance().onDurationUpdate(\"ZegoCountdownLabelDuration\", (v) => {\n            if (v == maxDuration) {\n                if (typeof onCountdownFinished === \"function\") {\n                    onCountdownFinished()\n                }\n            }\n             else if (v > maxDuration) return;\n            \n            setDuration(Math.max(maxDuration - v, 0))\n        });\n\n        return () => {\n            TimingHelper.getInstance().onDurationUpdate(\"ZegoCountdownLabelDuration\");\n        }\n    }, [])\n\n    return (\n        <View style={styles.container} pointerEvents={'box-none'}>\n            <SafeAreaView ><Text style={styles.timing}>{durationFormat(duration)}</Text></SafeAreaView>\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        top: 26,\n        zIndex: 5,\n        alignItems: 'center',\n    },\n    timing: {\n        color: 'white',\n    },\n});"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AACA,IAAAG,cAAA,GAAAC,sBAAA,CAAAJ,OAAA;AAAyD,SAAAI,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAN,wBAAAM,CAAA,EAAAG,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAV,uBAAA,YAAAA,CAAAM,CAAA,EAAAG,CAAA,SAAAA,CAAA,IAAAH,CAAA,IAAAA,CAAA,CAAAC,UAAA,SAAAD,CAAA,MAAAO,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAR,OAAA,EAAAF,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAS,CAAA,MAAAF,CAAA,GAAAJ,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAE,CAAA,CAAAI,GAAA,CAAAX,CAAA,UAAAO,CAAA,CAAAK,GAAA,CAAAZ,CAAA,GAAAO,CAAA,CAAAM,GAAA,CAAAb,CAAA,EAAAS,CAAA,gBAAAN,CAAA,IAAAH,CAAA,gBAAAG,CAAA,OAAAW,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAG,CAAA,OAAAK,CAAA,IAAAD,CAAA,GAAAS,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAG,CAAA,OAAAK,CAAA,CAAAI,GAAA,IAAAJ,CAAA,CAAAK,GAAA,IAAAN,CAAA,CAAAE,CAAA,EAAAN,CAAA,EAAAK,CAAA,IAAAC,CAAA,CAAAN,CAAA,IAAAH,CAAA,CAAAG,CAAA,WAAAM,CAAA,KAAAT,CAAA,EAAAG,CAAA;AAE1C,SAASgB,kBAAkBA,CAACC,KAAK,EAAE;EAC9C,MAAM;IAAEC,WAAW;IAAEC;EAAoB,CAAC,GAAGF,KAAK;EAClD,MAAM,CAACG,QAAQ,EAAEC,WAAW,CAAC,GAAG,IAAAC,eAAQ,EAACC,IAAI,CAACC,GAAG,CAACN,WAAW,GAAGO,sBAAY,CAACC,WAAW,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAC7G,MAAM,CAACC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG,IAAAP,eAAQ,EAAC,KAAK,CAAC;EACjE,IAAAQ,gBAAS,EAAC,MAAM;IACZL,sBAAY,CAACC,WAAW,CAAC,CAAC,CAACK,gBAAgB,CAAC,4BAA4B,EAAGC,CAAC,IAAK;MAC7E,IAAIA,CAAC,IAAId,WAAW,EAAE;QAClB,IAAI,OAAOC,mBAAmB,KAAK,UAAU,EAAE;UAC3CA,mBAAmB,CAAC,CAAC;QACzB;MACJ,CAAC,MACK,IAAIa,CAAC,GAAGd,WAAW,EAAE;MAE3BG,WAAW,CAACE,IAAI,CAACC,GAAG,CAACN,WAAW,GAAGc,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7C,CAAC,CAAC;IAEF,OAAO,MAAM;MACTP,sBAAY,CAACC,WAAW,CAAC,CAAC,CAACK,gBAAgB,CAAC,4BAA4B,CAAC;IAC7E,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,oBACIzC,MAAA,CAAAS,OAAA,CAAAkC,aAAA,CAACxC,YAAA,CAAAyC,IAAI;IAACC,KAAK,EAAEC,MAAM,CAACC,SAAU;IAACC,aAAa,EAAE;EAAW,gBACrDhD,MAAA,CAAAS,OAAA,CAAAkC,aAAA,CAACxC,YAAA,CAAA8C,YAAY,qBAAEjD,MAAA,CAAAS,OAAA,CAAAkC,aAAA,CAACxC,YAAA,CAAA+C,IAAI;IAACL,KAAK,EAAEC,MAAM,CAACK;EAAO,GAAE,IAAAC,qBAAc,EAACtB,QAAQ,CAAQ,CAAe,CACxF,CAAC;AAEf;AAEA,MAAMgB,MAAM,GAAGO,uBAAU,CAACC,MAAM,CAAC;EAC7BP,SAAS,EAAE;IACPQ,IAAI,EAAE,CAAC;IACPC,QAAQ,EAAE,UAAU;IACpBC,KAAK,EAAE,MAAM;IACbC,MAAM,EAAE,MAAM;IACdC,GAAG,EAAE,EAAE;IACPC,MAAM,EAAE,CAAC;IACTC,UAAU,EAAE;EAChB,CAAC;EACDV,MAAM,EAAE;IACJW,KAAK,EAAE;EACX;AACJ,CAAC,CAAC","ignoreList":[]}