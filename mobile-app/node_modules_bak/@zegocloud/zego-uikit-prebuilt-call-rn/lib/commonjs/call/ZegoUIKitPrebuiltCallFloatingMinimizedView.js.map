{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_zegoUikitRn","_defines","_timing_helper","_interopRequireDefault","_logger","_minimizing_helper","_prebuilt_helper","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","ZegoUIKitPrebuiltCallFloatingMinimizedView","props","window","useWindowDimensions","width","height","borderRadius","left","top","showSoundWaveInAudioMode","useVideoViewAspectFill","isInit","setIsInit","useState","isVisable","setIsVisable","layout","setLayout","floatViewInfo","setFloatViewInfo","activeUserID","setActiveUserID","isMoving","setIsMoving","panResponder","PanResponder","create","onStartShouldSetPanResponder","evt","gestureState","onMoveShouldSetPanResponder","onPanResponderGrant","zloginfo","onPanResponderMove","Math","abs","dx","dy","newLeft","newTop","onPanResponderEnd","onPanResponderRelease","pressedHandle","callbackID","String","floor","random","layoutHandle","useCallback","x","y","nativeEvent","MinimizingHelper","getInstance","notifyMaximize","useEffect","onPrebuiltInit","TimingHelper","onDurationUpdate","duration","isMinimize","getIsMinimize","routeParams","PrebuiltHelper","getRouteParams","onWindowMinimized","initConfig","getInitConfig","setIsMinimizeSwitch","setTimeout","ZegoUIKit","forceRenderVideoView","onWindowMaximized","keys","onEntryNormal","onActiveUserIDUpdate","onOnlySelfInRoom","getDuration","onCallEnd","roomID","ZegoCallEndReason","remoteHangUp","notifyDestroyPrebuilt","onMeRemovedFromRoom","kickOut","createElement","Animated","View","style","position","display","onLayout","panHandlers","styles","floatAudioView","ZegoAudioVideoView","key","userID","showSoundWave","StyleSheet","overflow","zIndex","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"sources":["ZegoUIKitPrebuiltCallFloatingMinimizedView.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport {\n    Animated,\n    LayoutChangeEvent,\n    PanResponder,\n    StyleSheet,\n    useWindowDimensions,\n    View,\n} from 'react-native';\n\nimport ZegoUIKit, { ZegoAudioVideoView } from '@zegocloud/zego-uikit-rn';\n\nimport { ZegoCallEndReason } from '../services/defines';\nimport TimingHelper from '../services/timing_helper';\nimport { zloginfo } from \"../utils/logger\";\nimport MinimizingHelper from \"./services/minimizing_helper\";\nimport PrebuiltHelper from './services/prebuilt_helper';\n\nexport default function ZegoUIKitPrebuiltCallFloatingMinimizedView(props: any) {\n    const window = useWindowDimensions();\n    const {\n        width = 90,\n        height = 160,\n        borderRadius = 10,\n        left = window.width / 2 || 100,\n        top = 10,\n        showSoundWaveInAudioMode = true,\n        useVideoViewAspectFill = true,\n    } = props;\n    const [isInit, setIsInit] = useState(false);\n    const [isVisable, setIsVisable] = useState(false);\n    const [layout, setLayout] = useState({\n        left,\n        top,\n    });\n    const [floatViewInfo, setFloatViewInfo] = useState({\n        width: 0, height: 0,\n    });\n    const [activeUserID, setActiveUserID] = useState('');\n    const [isMoving, setIsMoving] = useState(false);\n\n    const panResponder = PanResponder.create({\n        onStartShouldSetPanResponder: (evt, gestureState) => true,\n        onMoveShouldSetPanResponder: (evt, gestureState) => true,\n        onPanResponderGrant: (evt, gestureState) => {\n            zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView] onPanResponderGrant gestureState', gestureState);\n            setIsMoving(false);\n        },\n        onPanResponderMove: (evt, gestureState) => {\n            // zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView] onPanResponderMove layout', layout);\n            // zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView] onPanResponderMove gestureState', gestureState);\n            if (\n                Math.abs(gestureState.dx) < 5 &&\n                Math.abs(gestureState.dy) < 5 &&\n                !isMoving\n            ) {\n                setIsMoving(false);\n            } else {\n                setIsMoving(true);\n                const newLeft = layout.left + gestureState.dx;\n                const newTop = layout.top + gestureState.dy;\n                if (newLeft >= (window.width - floatViewInfo.width) || newTop >= (window.height - floatViewInfo.height) || newLeft <= 0 || newTop <= 0) return;\n                setLayout({\n                    left: newLeft,\n                    top: newTop,\n                });\n            }\n        },\n        onPanResponderEnd: (evt, gestureState) => {\n            zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView] onPanResponderEnd layout', layout);\n            zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView] onPanResponderEnd gestureState', gestureState);\n        },\n        onPanResponderRelease: () => {\n            if (!isMoving) {\n                // Click\n                pressedHandle();\n            }\n            setIsMoving(false);\n        },\n    });\n\n    const callbackID = 'ZegoMinimizeRoom' + String(Math.floor(Math.random() * 10000));\n    \n    const layoutHandle = useCallback((e: LayoutChangeEvent) => {\n        const  { x, y, width, height } = e.nativeEvent.layout;\n        setFloatViewInfo({ width, height });\n    }, []);\n    const pressedHandle = async () => {\n        zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView] pressedHandle');\n        MinimizingHelper.getInstance().notifyMaximize();\n    }\n\n    useEffect(() => {\n        MinimizingHelper.getInstance().onPrebuiltInit(callbackID, () => {\n            zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView] init success');\n            setIsInit(true);\n        });\n        TimingHelper.getInstance().onDurationUpdate(callbackID, (duration: number) => {\n            const isMinimize = MinimizingHelper.getInstance().getIsMinimize();\n            let routeParams = PrebuiltHelper.getInstance().getRouteParams();\n            if (isMinimize && typeof routeParams.onDurationUpdate == 'function') {\n                routeParams.onDurationUpdate(duration);\n            }\n        })\n\n        return () => {\n            // It will never be executed because this view is persistent.\n            MinimizingHelper.getInstance().onPrebuiltInit(callbackID);\n            TimingHelper.getInstance().onDurationUpdate(callbackID)\n        };\n    }, []);\n\n    useEffect(() => {\n        if (isInit) {\n            MinimizingHelper.getInstance().onWindowMinimized(callbackID, () => {\n                const initConfig = MinimizingHelper.getInstance().getInitConfig();\n                const { onWindowMinimized } = initConfig;\n                \n                if (typeof onWindowMinimized !== 'function') {\n                    zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onWindowMinimized] onWindowMinimized is not a function, ignore call it')\n                    return;\n                }\n\n                zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onWindowMinimized]')\n                setIsVisable(true);\n                MinimizingHelper.getInstance().setIsMinimizeSwitch(true, 'onWindowMinimized');\n\n                zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onWindowMinimized] execute requireConfig.onWindowMinimized will')\n                onWindowMinimized();\n                zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onWindowMinimized] execute requireConfig.onWindowMinimized succeed')\n\n                setTimeout(() => {\n                    ZegoUIKit.forceRenderVideoView();\n                }, 100);\n            });\n            MinimizingHelper.getInstance().onWindowMaximized(callbackID, () => {\n                zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onWindowMaximized]')\n\n                setIsVisable(false);\n                const initConfig = MinimizingHelper.getInstance().getInitConfig();\n                const { onWindowMaximized } = initConfig;\n\n                const routeParams = PrebuiltHelper.getInstance().getRouteParams();\n                // if routeParams is empty, do not call onWindowMaximized, to avoid exception in ZegoUIKitPrebuiltCallInCallScreen\n                // In MinimizeSwitch mode, MinimizeView will gone after clearRouteParams\n                if (typeof onWindowMaximized === 'function' && Object.keys(routeParams).length > 0) {\n                    zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onWindowMaximized] execute initConfig.onWindowMaximized will')\n                    onWindowMaximized();\n                    zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onWindowMaximized] execute initConfig.onWindowMaximized succeed')\n                    MinimizingHelper.getInstance().setIsMinimizeSwitch(true, 'onWindowMaximized');\n                } else {\n                    zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onWindowMaximized] onWindowMaximized not a function or routeParams is empty');\n                    // Since the room can't be restored and the option to maximize the entrance has already invisable, to avoid exception leater, the minimized state should be restored to false.\n                    MinimizingHelper.getInstance().setIsMinimizeSwitch(false, 'onWindowMaximized not a function');\n                }\n            });\n            MinimizingHelper.getInstance().onEntryNormal(callbackID, () => {\n                setIsVisable(false);\n            });\n            MinimizingHelper.getInstance().onActiveUserIDUpdate(callbackID, (activeUserID) => {\n                // zloginfo(`[ZegoUIKitPrebuiltCallFloatingMinimizedView] onActiveUserIDUpdate`, activeUserID);\n                setActiveUserID(activeUserID);\n            });\n        }\n        return () => {\n            MinimizingHelper.getInstance().onWindowMinimized(callbackID);\n            MinimizingHelper.getInstance().onWindowMaximized(callbackID);\n            MinimizingHelper.getInstance().onEntryNormal(callbackID);\n            MinimizingHelper.getInstance().onActiveUserIDUpdate(callbackID);\n        }\n    }, [isInit]);\n\n    useEffect(() => {\n      ZegoUIKit.onOnlySelfInRoom(callbackID, () => {\n        zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onOnlySelfInRoom] callbackID:', callbackID)\n\n        const isMinimize = MinimizingHelper.getInstance().getIsMinimize();\n        let routeParams = PrebuiltHelper.getInstance().getRouteParams();\n        const duration = TimingHelper.getInstance().getDuration()\n        if (isMinimize && typeof routeParams.onCallEnd == 'function') {\n            zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onOnlySelfInRoom] notify requireConfig.onCallEnd will')\n            routeParams.onCallEnd(routeParams.roomID, ZegoCallEndReason.remoteHangUp, duration);\n            zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onOnlySelfInRoom] notify requireConfig.onCallEnd succeed')      \n    \n            PrebuiltHelper.getInstance().notifyDestroyPrebuilt();\n        }\n      })\n      \n      ZegoUIKit.onMeRemovedFromRoom(callbackID, () => {\n        zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onMeRemovedFromRoom] callbackID:', callbackID)\n\n        const isMinimize = MinimizingHelper.getInstance().getIsMinimize();\n        let routeParams = PrebuiltHelper.getInstance().getRouteParams();\n        const duration = TimingHelper.getInstance().getDuration()\n        if (isMinimize && typeof routeParams.onCallEnd == 'function') {\n            zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onMeRemovedFromRoom] notify requireConfig.onCallEnd will')\n            routeParams.onCallEnd(routeParams.roomID, ZegoCallEndReason.kickOut, duration);\n            zloginfo('[ZegoUIKitPrebuiltCallFloatingMinimizedView][onMeRemovedFromRoom] notify requireConfig.onCallEnd succeed')      \n\n            PrebuiltHelper.getInstance().notifyDestroyPrebuilt();\n        }\n      });\n\n      return () => {\n        // It will never be executed because this view is persistent.\n        ZegoUIKit.onOnlySelfInRoom(callbackID)\n        ZegoUIKit.onMeRemovedFromRoom(callbackID)\n      }\n    }, [])\n\n    return (\n        <Animated.View\n            style={[\n                { position: 'absolute', left: layout.left, top: layout.top },\n                { display: isVisable ? 'flex' : 'none' },\n            ]}\n            onLayout={layoutHandle}\n            {...panResponder.panHandlers}\n        >\n            <View\n                style={[\n                    styles.floatAudioView,\n                    {\n                        width,\n                        height,\n                        borderRadius,\n                    }\n                ]}\n            >\n                {\n                    activeUserID ? <ZegoAudioVideoView\n                        key={activeUserID}\n                        userID={activeUserID}\n                        useVideoViewAspectFill={useVideoViewAspectFill}\n                        showSoundWave={showSoundWaveInAudioMode}\n                    /> : <View />\n                }\n            </View>\n        </Animated.View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    floatAudioView: {\n        overflow: 'hidden',\n        zIndex: 10000,\n        shadowColor: \"#000\",\n        shadowOffset: {\n            width: 0,\n            height: 2,\n        },\n        shadowOpacity: 0.25,\n        shadowRadius: 3.84,\n        elevation: 8\n    },\n});\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AASA,IAAAE,YAAA,GAAAH,uBAAA,CAAAC,OAAA;AAEA,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,cAAA,GAAAC,sBAAA,CAAAL,OAAA;AACA,IAAAM,OAAA,GAAAN,OAAA;AACA,IAAAO,kBAAA,GAAAF,sBAAA,CAAAL,OAAA;AACA,IAAAQ,gBAAA,GAAAH,sBAAA,CAAAL,OAAA;AAAwD,SAAAK,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAV,wBAAAU,CAAA,EAAAG,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAd,uBAAA,YAAAA,CAAAU,CAAA,EAAAG,CAAA,SAAAA,CAAA,IAAAH,CAAA,IAAAA,CAAA,CAAAC,UAAA,SAAAD,CAAA,MAAAO,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAR,OAAA,EAAAF,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAS,CAAA,MAAAF,CAAA,GAAAJ,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAE,CAAA,CAAAI,GAAA,CAAAX,CAAA,UAAAO,CAAA,CAAAK,GAAA,CAAAZ,CAAA,GAAAO,CAAA,CAAAM,GAAA,CAAAb,CAAA,EAAAS,CAAA,gBAAAN,CAAA,IAAAH,CAAA,gBAAAG,CAAA,OAAAW,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAG,CAAA,OAAAK,CAAA,IAAAD,CAAA,GAAAS,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAG,CAAA,OAAAK,CAAA,CAAAI,GAAA,IAAAJ,CAAA,CAAAK,GAAA,IAAAN,CAAA,CAAAE,CAAA,EAAAN,CAAA,EAAAK,CAAA,IAAAC,CAAA,CAAAN,CAAA,IAAAH,CAAA,CAAAG,CAAA,WAAAM,CAAA,KAAAT,CAAA,EAAAG,CAAA;AAAA,SAAAgB,SAAA,WAAAA,QAAA,GAAAH,MAAA,CAAAI,MAAA,GAAAJ,MAAA,CAAAI,MAAA,CAAAC,IAAA,eAAAf,CAAA,aAAAN,CAAA,MAAAA,CAAA,GAAAsB,SAAA,CAAAC,MAAA,EAAAvB,CAAA,UAAAG,CAAA,GAAAmB,SAAA,CAAAtB,CAAA,YAAAK,CAAA,IAAAF,CAAA,OAAAW,cAAA,CAAAC,IAAA,CAAAZ,CAAA,EAAAE,CAAA,MAAAC,CAAA,CAAAD,CAAA,IAAAF,CAAA,CAAAE,CAAA,aAAAC,CAAA,KAAAa,QAAA,CAAAK,KAAA,OAAAF,SAAA;AAEzC,SAASG,0CAA0CA,CAACC,KAAU,EAAE;EAC3E,MAAMC,MAAM,GAAG,IAAAC,gCAAmB,EAAC,CAAC;EACpC,MAAM;IACFC,KAAK,GAAG,EAAE;IACVC,MAAM,GAAG,GAAG;IACZC,YAAY,GAAG,EAAE;IACjBC,IAAI,GAAGL,MAAM,CAACE,KAAK,GAAG,CAAC,IAAI,GAAG;IAC9BI,GAAG,GAAG,EAAE;IACRC,wBAAwB,GAAG,IAAI;IAC/BC,sBAAsB,GAAG;EAC7B,CAAC,GAAGT,KAAK;EACT,MAAM,CAACU,MAAM,EAAEC,SAAS,CAAC,GAAG,IAAAC,eAAQ,EAAC,KAAK,CAAC;EAC3C,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG,IAAAF,eAAQ,EAAC,KAAK,CAAC;EACjD,MAAM,CAACG,MAAM,EAAEC,SAAS,CAAC,GAAG,IAAAJ,eAAQ,EAAC;IACjCN,IAAI;IACJC;EACJ,CAAC,CAAC;EACF,MAAM,CAACU,aAAa,EAAEC,gBAAgB,CAAC,GAAG,IAAAN,eAAQ,EAAC;IAC/CT,KAAK,EAAE,CAAC;IAAEC,MAAM,EAAE;EACtB,CAAC,CAAC;EACF,MAAM,CAACe,YAAY,EAAEC,eAAe,CAAC,GAAG,IAAAR,eAAQ,EAAC,EAAE,CAAC;EACpD,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAG,IAAAV,eAAQ,EAAC,KAAK,CAAC;EAE/C,MAAMW,YAAY,GAAGC,yBAAY,CAACC,MAAM,CAAC;IACrCC,4BAA4B,EAAEA,CAACC,GAAG,EAAEC,YAAY,KAAK,IAAI;IACzDC,2BAA2B,EAAEA,CAACF,GAAG,EAAEC,YAAY,KAAK,IAAI;IACxDE,mBAAmB,EAAEA,CAACH,GAAG,EAAEC,YAAY,KAAK;MACxC,IAAAG,gBAAQ,EAAC,+EAA+E,EAAEH,YAAY,CAAC;MACvGN,WAAW,CAAC,KAAK,CAAC;IACtB,CAAC;IACDU,kBAAkB,EAAEA,CAACL,GAAG,EAAEC,YAAY,KAAK;MACvC;MACA;MACA,IACIK,IAAI,CAACC,GAAG,CAACN,YAAY,CAACO,EAAE,CAAC,GAAG,CAAC,IAC7BF,IAAI,CAACC,GAAG,CAACN,YAAY,CAACQ,EAAE,CAAC,GAAG,CAAC,IAC7B,CAACf,QAAQ,EACX;QACEC,WAAW,CAAC,KAAK,CAAC;MACtB,CAAC,MAAM;QACHA,WAAW,CAAC,IAAI,CAAC;QACjB,MAAMe,OAAO,GAAGtB,MAAM,CAACT,IAAI,GAAGsB,YAAY,CAACO,EAAE;QAC7C,MAAMG,MAAM,GAAGvB,MAAM,CAACR,GAAG,GAAGqB,YAAY,CAACQ,EAAE;QAC3C,IAAIC,OAAO,IAAKpC,MAAM,CAACE,KAAK,GAAGc,aAAa,CAACd,KAAM,IAAImC,MAAM,IAAKrC,MAAM,CAACG,MAAM,GAAGa,aAAa,CAACb,MAAO,IAAIiC,OAAO,IAAI,CAAC,IAAIC,MAAM,IAAI,CAAC,EAAE;QACxItB,SAAS,CAAC;UACNV,IAAI,EAAE+B,OAAO;UACb9B,GAAG,EAAE+B;QACT,CAAC,CAAC;MACN;IACJ,CAAC;IACDC,iBAAiB,EAAEA,CAACZ,GAAG,EAAEC,YAAY,KAAK;MACtC,IAAAG,gBAAQ,EAAC,uEAAuE,EAAEhB,MAAM,CAAC;MACzF,IAAAgB,gBAAQ,EAAC,6EAA6E,EAAEH,YAAY,CAAC;IACzG,CAAC;IACDY,qBAAqB,EAAEA,CAAA,KAAM;MACzB,IAAI,CAACnB,QAAQ,EAAE;QACX;QACAoB,aAAa,CAAC,CAAC;MACnB;MACAnB,WAAW,CAAC,KAAK,CAAC;IACtB;EACJ,CAAC,CAAC;EAEF,MAAMoB,UAAU,GAAG,kBAAkB,GAAGC,MAAM,CAACV,IAAI,CAACW,KAAK,CAACX,IAAI,CAACY,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;EAEjF,MAAMC,YAAY,GAAG,IAAAC,kBAAW,EAAEzE,CAAoB,IAAK;IACvD,MAAO;MAAE0E,CAAC;MAAEC,CAAC;MAAE9C,KAAK;MAAEC;IAAO,CAAC,GAAG9B,CAAC,CAAC4E,WAAW,CAACnC,MAAM;IACrDG,gBAAgB,CAAC;MAAEf,KAAK;MAAEC;IAAO,CAAC,CAAC;EACvC,CAAC,EAAE,EAAE,CAAC;EACN,MAAMqC,aAAa,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAAV,gBAAQ,EAAC,4DAA4D,CAAC;IACtEoB,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACC,cAAc,CAAC,CAAC;EACnD,CAAC;EAED,IAAAC,gBAAS,EAAC,MAAM;IACZH,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACG,cAAc,CAACb,UAAU,EAAE,MAAM;MAC5D,IAAAX,gBAAQ,EAAC,2DAA2D,CAAC;MACrEpB,SAAS,CAAC,IAAI,CAAC;IACnB,CAAC,CAAC;IACF6C,sBAAY,CAACJ,WAAW,CAAC,CAAC,CAACK,gBAAgB,CAACf,UAAU,EAAGgB,QAAgB,IAAK;MAC1E,MAAMC,UAAU,GAAGR,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACQ,aAAa,CAAC,CAAC;MACjE,IAAIC,WAAW,GAAGC,wBAAc,CAACV,WAAW,CAAC,CAAC,CAACW,cAAc,CAAC,CAAC;MAC/D,IAAIJ,UAAU,IAAI,OAAOE,WAAW,CAACJ,gBAAgB,IAAI,UAAU,EAAE;QACjEI,WAAW,CAACJ,gBAAgB,CAACC,QAAQ,CAAC;MAC1C;IACJ,CAAC,CAAC;IAEF,OAAO,MAAM;MACT;MACAP,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACG,cAAc,CAACb,UAAU,CAAC;MACzDc,sBAAY,CAACJ,WAAW,CAAC,CAAC,CAACK,gBAAgB,CAACf,UAAU,CAAC;IAC3D,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,IAAAY,gBAAS,EAAC,MAAM;IACZ,IAAI5C,MAAM,EAAE;MACRyC,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACY,iBAAiB,CAACtB,UAAU,EAAE,MAAM;QAC/D,MAAMuB,UAAU,GAAGd,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACc,aAAa,CAAC,CAAC;QACjE,MAAM;UAAEF;QAAkB,CAAC,GAAGC,UAAU;QAExC,IAAI,OAAOD,iBAAiB,KAAK,UAAU,EAAE;UACzC,IAAAjC,gBAAQ,EAAC,qHAAqH,CAAC;UAC/H;QACJ;QAEA,IAAAA,gBAAQ,EAAC,iEAAiE,CAAC;QAC3EjB,YAAY,CAAC,IAAI,CAAC;QAClBqC,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACe,mBAAmB,CAAC,IAAI,EAAE,mBAAmB,CAAC;QAE7E,IAAApC,gBAAQ,EAAC,8GAA8G,CAAC;QACxHiC,iBAAiB,CAAC,CAAC;QACnB,IAAAjC,gBAAQ,EAAC,iHAAiH,CAAC;QAE3HqC,UAAU,CAAC,MAAM;UACbC,oBAAS,CAACC,oBAAoB,CAAC,CAAC;QACpC,CAAC,EAAE,GAAG,CAAC;MACX,CAAC,CAAC;MACFnB,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACmB,iBAAiB,CAAC7B,UAAU,EAAE,MAAM;QAC/D,IAAAX,gBAAQ,EAAC,iEAAiE,CAAC;QAE3EjB,YAAY,CAAC,KAAK,CAAC;QACnB,MAAMmD,UAAU,GAAGd,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACc,aAAa,CAAC,CAAC;QACjE,MAAM;UAAEK;QAAkB,CAAC,GAAGN,UAAU;QAExC,MAAMJ,WAAW,GAAGC,wBAAc,CAACV,WAAW,CAAC,CAAC,CAACW,cAAc,CAAC,CAAC;QACjE;QACA;QACA,IAAI,OAAOQ,iBAAiB,KAAK,UAAU,IAAIjF,MAAM,CAACkF,IAAI,CAACX,WAAW,CAAC,CAAChE,MAAM,GAAG,CAAC,EAAE;UAChF,IAAAkC,gBAAQ,EAAC,2GAA2G,CAAC;UACrHwC,iBAAiB,CAAC,CAAC;UACnB,IAAAxC,gBAAQ,EAAC,8GAA8G,CAAC;UACxHoB,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACe,mBAAmB,CAAC,IAAI,EAAE,mBAAmB,CAAC;QACjF,CAAC,MAAM;UACH,IAAApC,gBAAQ,EAAC,0HAA0H,CAAC;UACpI;UACAoB,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACe,mBAAmB,CAAC,KAAK,EAAE,kCAAkC,CAAC;QACjG;MACJ,CAAC,CAAC;MACFhB,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACqB,aAAa,CAAC/B,UAAU,EAAE,MAAM;QAC3D5B,YAAY,CAAC,KAAK,CAAC;MACvB,CAAC,CAAC;MACFqC,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACsB,oBAAoB,CAAChC,UAAU,EAAGvB,YAAY,IAAK;QAC9E;QACAC,eAAe,CAACD,YAAY,CAAC;MACjC,CAAC,CAAC;IACN;IACA,OAAO,MAAM;MACTgC,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACY,iBAAiB,CAACtB,UAAU,CAAC;MAC5DS,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACmB,iBAAiB,CAAC7B,UAAU,CAAC;MAC5DS,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACqB,aAAa,CAAC/B,UAAU,CAAC;MACxDS,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACsB,oBAAoB,CAAChC,UAAU,CAAC;IACnE,CAAC;EACL,CAAC,EAAE,CAAChC,MAAM,CAAC,CAAC;EAEZ,IAAA4C,gBAAS,EAAC,MAAM;IACde,oBAAS,CAACM,gBAAgB,CAACjC,UAAU,EAAE,MAAM;MAC3C,IAAAX,gBAAQ,EAAC,4EAA4E,EAAEW,UAAU,CAAC;MAElG,MAAMiB,UAAU,GAAGR,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACQ,aAAa,CAAC,CAAC;MACjE,IAAIC,WAAW,GAAGC,wBAAc,CAACV,WAAW,CAAC,CAAC,CAACW,cAAc,CAAC,CAAC;MAC/D,MAAML,QAAQ,GAAGF,sBAAY,CAACJ,WAAW,CAAC,CAAC,CAACwB,WAAW,CAAC,CAAC;MACzD,IAAIjB,UAAU,IAAI,OAAOE,WAAW,CAACgB,SAAS,IAAI,UAAU,EAAE;QAC1D,IAAA9C,gBAAQ,EAAC,oGAAoG,CAAC;QAC9G8B,WAAW,CAACgB,SAAS,CAAChB,WAAW,CAACiB,MAAM,EAAEC,0BAAiB,CAACC,YAAY,EAAEtB,QAAQ,CAAC;QACnF,IAAA3B,gBAAQ,EAAC,uGAAuG,CAAC;QAEjH+B,wBAAc,CAACV,WAAW,CAAC,CAAC,CAAC6B,qBAAqB,CAAC,CAAC;MACxD;IACF,CAAC,CAAC;IAEFZ,oBAAS,CAACa,mBAAmB,CAACxC,UAAU,EAAE,MAAM;MAC9C,IAAAX,gBAAQ,EAAC,+EAA+E,EAAEW,UAAU,CAAC;MAErG,MAAMiB,UAAU,GAAGR,0BAAgB,CAACC,WAAW,CAAC,CAAC,CAACQ,aAAa,CAAC,CAAC;MACjE,IAAIC,WAAW,GAAGC,wBAAc,CAACV,WAAW,CAAC,CAAC,CAACW,cAAc,CAAC,CAAC;MAC/D,MAAML,QAAQ,GAAGF,sBAAY,CAACJ,WAAW,CAAC,CAAC,CAACwB,WAAW,CAAC,CAAC;MACzD,IAAIjB,UAAU,IAAI,OAAOE,WAAW,CAACgB,SAAS,IAAI,UAAU,EAAE;QAC1D,IAAA9C,gBAAQ,EAAC,uGAAuG,CAAC;QACjH8B,WAAW,CAACgB,SAAS,CAAChB,WAAW,CAACiB,MAAM,EAAEC,0BAAiB,CAACI,OAAO,EAAEzB,QAAQ,CAAC;QAC9E,IAAA3B,gBAAQ,EAAC,0GAA0G,CAAC;QAEpH+B,wBAAc,CAACV,WAAW,CAAC,CAAC,CAAC6B,qBAAqB,CAAC,CAAC;MACxD;IACF,CAAC,CAAC;IAEF,OAAO,MAAM;MACX;MACAZ,oBAAS,CAACM,gBAAgB,CAACjC,UAAU,CAAC;MACtC2B,oBAAS,CAACa,mBAAmB,CAACxC,UAAU,CAAC;IAC3C,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACI/E,MAAA,CAAAa,OAAA,CAAA4G,aAAA,CAACtH,YAAA,CAAAuH,QAAQ,CAACC,IAAI,EAAA7F,QAAA;IACV8F,KAAK,EAAE,CACH;MAAEC,QAAQ,EAAE,UAAU;MAAElF,IAAI,EAAES,MAAM,CAACT,IAAI;MAAEC,GAAG,EAAEQ,MAAM,CAACR;IAAI,CAAC,EAC5D;MAAEkF,OAAO,EAAE5E,SAAS,GAAG,MAAM,GAAG;IAAO,CAAC,CAC1C;IACF6E,QAAQ,EAAE5C;EAAa,GACnBvB,YAAY,CAACoE,WAAW,gBAE5BhI,MAAA,CAAAa,OAAA,CAAA4G,aAAA,CAACtH,YAAA,CAAAwH,IAAI;IACDC,KAAK,EAAE,CACHK,MAAM,CAACC,cAAc,EACrB;MACI1F,KAAK;MACLC,MAAM;MACNC;IACJ,CAAC;EACH,GAGEc,YAAY,gBAAGxD,MAAA,CAAAa,OAAA,CAAA4G,aAAA,CAACrH,YAAA,CAAA+H,kBAAkB;IAC9BC,GAAG,EAAE5E,YAAa;IAClB6E,MAAM,EAAE7E,YAAa;IACrBV,sBAAsB,EAAEA,sBAAuB;IAC/CwF,aAAa,EAAEzF;EAAyB,CAC3C,CAAC,gBAAG7C,MAAA,CAAAa,OAAA,CAAA4G,aAAA,CAACtH,YAAA,CAAAwH,IAAI,MAAE,CAEd,CACK,CAAC;AAExB;AAEA,MAAMM,MAAM,GAAGM,uBAAU,CAACzE,MAAM,CAAC;EAC7BoE,cAAc,EAAE;IACZM,QAAQ,EAAE,QAAQ;IAClBC,MAAM,EAAE,KAAK;IACbC,WAAW,EAAE,MAAM;IACnBC,YAAY,EAAE;MACVnG,KAAK,EAAE,CAAC;MACRC,MAAM,EAAE;IACZ,CAAC;IACDmG,aAAa,EAAE,IAAI;IACnBC,YAAY,EAAE,IAAI;IAClBC,SAAS,EAAE;EACf;AACJ,CAAC,CAAC","ignoreList":[]}