{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeSafeAreaContext","_zegoUikitRn","_ZegoMoreButton","_interopRequireDefault","_ZegoMenuBarButtonName","_ZegoMessageButton","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ZegoBottomBar","props","insets","useSafeAreaInsets","menuBarButtonsMaxCount","menuBarButtons","menuBarExtendedButtons","onHangUp","onHangUpConfirmation","turnOnCameraWhenJoining","turnOnMicrophoneWhenJoining","useSpeakerWhenJoining","onMorePress","onSwitchCamera","onMessagePress","buttonBuilders","isNormalStyle","setIsNormalStyle","useState","getButtonByButtonIndex","buttonIndex","ZegoMenuBarButtonName","toggleCameraButton","createElement","ZegoToggleCameraButton","key","isOn","toggleMicrophoneButton","ZegoToggleMicrophoneButton","hangUpButton","ZegoLeaveButton","onLeaveConfirmation","onPressed","iconBuilder","hangupBuilder","switchAudioOutputButton","ZegoSwitchAudioOutputButton","useSpeaker","switchCameraButton","ZegoSwitchCameraButton","onPress","messageButton","getDisplayButtons","maxCount","needMoreButton","length","firstLevelButtons","secondLevelButtons","forEach","limitCount","push","button","getButtonStyle","btnStyles","styles","ctrlBtn1","ctrlBtn2","ctrlBtn3","ctrlBtn4","ctrlBtn5","allButtons","View","style","normalBar","bottom","map","index","popupContainer","fillParent","popupMask","TouchableOpacity","popupBar","marginBottom","marginRight","marginLeft","StyleSheet","create","flex","position","flexDirection","justifyContent","alignItems","width","height","zIndex","backgroundColor","opacity","paddingTop","paddingBottom","paddingLeft","paddingRight","flexWrap"],"sources":["ZegoBottomBar.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { View, StyleSheet, TouchableOpacity } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\"\n\nimport {\n    ZegoLeaveButton,\n    ZegoSwitchAudioOutputButton,\n    ZegoSwitchCameraButton,\n    ZegoToggleCameraButton,\n    ZegoToggleMicrophoneButton\n} from '@zegocloud/zego-uikit-rn'\n\nimport ZegoMoreButton from './ZegoMoreButton';\nimport ZegoMenuBarButtonName from \"./ZegoMenuBarButtonName\";\nimport ZegoMessageButton from \"./ZegoMessageButton\";\n\n\nexport default function ZegoBottomBar(props) {\n    const insets = useSafeAreaInsets();\n\n    const {\n        menuBarButtonsMaxCount = 5,\n        menuBarButtons = [],\n        menuBarExtendedButtons = [],\n        onHangUp,\n        onHangUpConfirmation,\n        turnOnCameraWhenJoining,\n        turnOnMicrophoneWhenJoining,\n        useSpeakerWhenJoining,\n        onMorePress,\n        onSwitchCamera,\n        onMessagePress,\n        buttonBuilders = {},\n    } = props;\n    const [isNormalStyle, setIsNormalStyle] = useState(true);\n\n    const getButtonByButtonIndex = (buttonIndex) => {\n        switch (buttonIndex) {\n            case ZegoMenuBarButtonName.toggleCameraButton:\n                return <ZegoToggleCameraButton key={1} isOn={turnOnCameraWhenJoining} />;\n            case ZegoMenuBarButtonName.toggleMicrophoneButton:\n                return <ZegoToggleMicrophoneButton key={2} isOn={turnOnMicrophoneWhenJoining} />;\n            case ZegoMenuBarButtonName.hangUpButton:\n                return <ZegoLeaveButton key={0} onLeaveConfirmation={onHangUpConfirmation} onPressed={onHangUp} iconBuilder={buttonBuilders.hangupBuilder} />\n            case ZegoMenuBarButtonName.switchAudioOutputButton:\n                return <ZegoSwitchAudioOutputButton key={4} useSpeaker={useSpeakerWhenJoining} />\n            case ZegoMenuBarButtonName.switchCameraButton:\n                return <ZegoSwitchCameraButton key={3} onPress={onSwitchCamera}/>\n            case ZegoMenuBarButtonName.messageButton:\n                return <ZegoMessageButton key={7} onPress={onMessagePress} />\n        }\n    }\n    const getDisplayButtons = () => {\n        var maxCount = menuBarButtonsMaxCount < 1 ? 1 : menuBarButtonsMaxCount;\n        maxCount = maxCount > 5 ? 5 : maxCount;\n        const needMoreButton = (menuBarButtons.length + menuBarExtendedButtons.length) > maxCount;\n        const firstLevelButtons = [];\n        const secondLevelButtons = [];\n        menuBarButtons.forEach(buttonIndex => {\n            const limitCount = needMoreButton ? maxCount - 1 : maxCount;\n            if (firstLevelButtons.length < limitCount) {\n                firstLevelButtons.push(getButtonByButtonIndex(buttonIndex));\n            } else {\n                secondLevelButtons.push(getButtonByButtonIndex(buttonIndex));\n            }\n        });\n        menuBarExtendedButtons.forEach(button => {\n            const limitCount = needMoreButton ? maxCount - 1 : maxCount;\n            if (firstLevelButtons.length < limitCount) {\n                firstLevelButtons.push(button);\n            } else {\n                secondLevelButtons.push(button);\n            }\n        });\n        if (needMoreButton) {\n            firstLevelButtons.push(<ZegoMoreButton onPress={() => { setIsNormalStyle(false); if (onMorePress) onMorePress() }} />)\n        }\n        return {\n            firstLevelButtons: firstLevelButtons,\n            secondLevelButtons: secondLevelButtons\n        }\n    }\n    const getButtonStyle = () => {\n        const btnStyles = [styles.ctrlBtn1, styles.ctrlBtn2, styles.ctrlBtn3, styles.ctrlBtn4, styles.ctrlBtn5,]\n        return btnStyles[firstLevelButtons.length - 1]\n    }\n\n    var allButtons = getDisplayButtons();\n    var firstLevelButtons = allButtons['firstLevelButtons']\n    var secondLevelButtons = allButtons['secondLevelButtons']\n\n    return (\n        isNormalStyle ?\n            <View style={[styles.normalBar, {bottom: insets.bottom}]}>\n                {firstLevelButtons.map((button, index) => (\n                    <View key={index} style={getButtonStyle()}>\n                        {button}\n                    </View>\n                ))}\n            </View> :\n            <View style={[styles.popupContainer, styles.fillParent]}>\n                <View style={[styles.popupMask, styles.fillParent]} >\n                    <TouchableOpacity style={styles.fillParent} onPress={() => { setIsNormalStyle(true) }} />\n                </View>\n                <View style={styles.popupBar}>\n                    {secondLevelButtons.map((button, index) => (\n                        <View key={index} style={{ marginBottom: 20, marginRight: 32 / 2, marginLeft: 32 / 2 }}>\n                            {button}\n                        </View>\n                    ))}\n                </View>\n            </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    normalBar: {\n        flex: 1,\n        position: 'absolute',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'flex-end',\n        marginBottom: 50,\n        width: '100%',\n        height: 50,\n        zIndex: 2,\n    },\n    popupContainer: {\n        flex: 1,\n        justifyContent: 'flex-end',\n    },\n    fillParent: {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n    },\n    popupMask: {\n        backgroundColor: '#262A2D',\n        opacity: 0.3,\n    },\n    popupBar: {\n        flex: 1,\n        paddingTop: 27,\n        paddingBottom: 3,\n        paddingLeft: 28.5,\n        paddingRight: 28.5,\n        position: 'absolute',\n        flexDirection: 'row',\n        flexWrap: \"wrap\",\n        justifyContent: 'flex-start',\n        alignItems: 'flex-end',\n        width: '100%',\n        bottom: 0,\n        zIndex: 2,\n        backgroundColor: '#262A2D'\n    },\n    ctrlBtn1: {\n        marginLeft: 0,\n        marginRight: 0,\n    },\n    ctrlBtn2: {\n        marginLeft: 79 / 2,\n        marginRight: 79 / 2,\n    },\n    ctrlBtn3: {\n        marginLeft: 59.5 / 2,\n        marginRight: 59.5 / 2,\n    },\n    ctrlBtn4: {\n        marginLeft: 37 / 2,\n        marginRight: 37 / 2,\n    },\n    ctrlBtn5: {\n        marginLeft: 23 / 2,\n        marginRight: 23 / 2,\n    }\n});"],"mappings":"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","ignoreList":[]}