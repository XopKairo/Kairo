{"version":3,"names":["_reactNative","require","_zegoUikitRn","_interopRequireWildcard","_minimizing_helper","_interopRequireDefault","_prebuilt_helper","_bell","_callevent_notify_app","_callkit","_hangup_helper","_inner_text_helper","_invite_state_manager","_notification_helper","_offline_call_event_listener","_plugins","_logger","_report","_package_version","_defines","_invitation","_timing_helper","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_defineProperty","_toPropertyKey","value","enumerable","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","ZegoUIKitPrebuiltCallService","constructor","ringtoneConfig","incomingCallFileName","outgoingCallFileName","innerText","androidNotificationConfig","channelID","channelName","notifyWhenAppRunningInBackgroundOrQuit","isIOSSandboxEnvironment","undefined","waitingPageConfig","getInstance","_instance","getModuleName","useSystemCallingUI","plugins","zloginfo","ZegoUIKitLogger","logFlush","OfflineCallEventListener","init","appID","appSign","userID","userName","config","logSetUserID","isInit","notifyInit","assign","Promise","resolve","appInfo","localUser","certificateIndex","InnerTextHelper","instance","subscription","AppState","addEventListener","nextAppState","ZegoPrebuiltPlugins","reconnectIfDisconnected","ZegoUIKit","getPluginName","getSignalingPlugin","enableNotifyWhenAppRunningInBackgroundOrQuit","appName","Platform","OS","NotificationHelper","PrebuiltCallReport","create","getPackageVersion","eventBegin","Date","now","reject","setTimeout","then","reportEvent","CallEventNotifyApp","CallInviteStateManage","BellManage","initRingtoneConfig","initIncomingSound","initOutgoingSound","catch","uninit","releaseIncomingSound","releaseOutgoingSound","remove","getInitUser","getInitAppInfo","getInitConfig","keys","onInitCallbackMap","forEach","callbackID","onInit","callback","hangUp","showConfirmation","debounce","HangupHelper","getDebounce","requireConfig","onCallEnd","onHangUpConfirmation","hangUpConfirmInfo","routeParams","PrebuiltHelper","getRouteParams","roomID","setDebounce","_hangupProcess","ZegoCallEndReason","localHangUp","temp","showLeaveAlert","bind","minimizeWindow","MinimizingHelper","sendCallInvitation","invitees","isVideoCall","navigation","options","ZegoUIKitPrebuiltCallInvitation","requestSystemAlertWindow","alert","RNCallKit","message","allow","deny","endReason","isMinimize","getIsMinimize","duration","TimingHelper","getDuration","notifyAutoJump","notifyDestroyPrebuilt","exports"],"sources":["index.js"],"sourcesContent":["import { AppState } from 'react-native';\nimport ZegoUIKit, {ZegoUIKitLogger} from '@zegocloud/zego-uikit-rn';\nimport MinimizingHelper from \"../call/services/minimizing_helper\";\nimport PrebuiltHelper from '../call/services/prebuilt_helper';\nimport BellManage from '../call_invitation/services/bell';\nimport CallEventNotifyApp from '../call_invitation/services/callevent_notify_app';\nimport RNCallKit from '../call_invitation/services/callkit'\nimport HangupHelper from \"../call_invitation/services/hangup_helper\";\nimport InnerTextHelper from '../call_invitation/services/inner_text_helper';\nimport CallInviteStateManage from '../call_invitation/services/invite_state_manager';\nimport NotificationHelper from '../call_invitation/services/notification_helper';\nimport OfflineCallEventListener from '../call_invitation/services/offline_call_event_listener';\nimport ZegoPrebuiltPlugins from \"../call_invitation/services/plugins\";\nimport { zloginfo } from '../utils/logger';\nimport PrebuiltCallReport from '../utils/report';\nimport {getPackageVersion} from '../utils/package_version';\nimport { ZegoCallEndReason } from \"./defines\";\nimport ZegoUIKitPrebuiltCallInvitation from \"./invitation\";\nimport TimingHelper from \"./timing_helper\";\n\nexport default class ZegoUIKitPrebuiltCallService {\n    _instance;\n    appInfo = {};\n    localUser = {};\n    config = {\n        ringtoneConfig: {\n            incomingCallFileName: 'zego_incoming.mp3',\n            outgoingCallFileName: 'zego_outgoing.mp3',\n        },\n        innerText: {},\n        androidNotificationConfig: {\n            channelID: \"CallInvitation\",\n            channelName: \"CallInvitation\",\n        },\n        notifyWhenAppRunningInBackgroundOrQuit: true, // false not supported\n        isIOSSandboxEnvironment: undefined,\n        waitingPageConfig: {\n          // avatarBuilder\n          // nameBuilder\n          // stateBuilder\n          // hangupBuilder\n          // switchCameraBuilder,\n          // backgroundColor,\n          // foregroundBuilder,\n        },\n        // onIncomingCallDeclineButtonPressed,\n        // onIncomingCallAcceptButtonPressed,\n        // onIncomingCallReceived,\n        // onIncomingCallCanceled,\n        // onIncomingCallTimeout,\n        // onOutgoingCallCancelButtonPressed,\n        // onOutgoingCallAccepted,\n        // onOutgoingCallRejectedCauseBusy,\n        // onOutgoingCallDeclined,\n        // onOutgoingCallTimeout,\n    };\n    isInit = false;\n    subscription = null;\n    onInitCallbackMap = {};\n    onRouteChangeCallbackMap = {};\n    constructor() { }\n    static getInstance() {\n        return this._instance || (this._instance = new ZegoUIKitPrebuiltCallService());\n    }\n    getModuleName() {\n        return 'PrebuiltCall';\n    }\n    useSystemCallingUI(plugins) {\n        zloginfo(`[ZegoUIKitPrebuiltCallService][useSystemCallingUI] plugins: ${plugins}`)\n        ZegoUIKitLogger.logFlush()\n\n        OfflineCallEventListener.getInstance().useSystemCallingUI(plugins);\n    }\n    init(appID, appSign, userID, userName, plugins, config = {}) {\n        ZegoUIKitLogger.logSetUserID(userID)\n\n        if (this.isInit) {\n            this.notifyInit();\n            Object.assign(this.config, config);\n            return Promise.resolve();\n        }\n\n        zloginfo(`[ZegoUIKitPrebuiltCallService][init] appID: ${appID}, userID: ${userID}, userName: ${userName}, plugins: ${plugins}`)\n\n        this.appInfo = { appID, appSign };\n        this.localUser = { userID, userName };\n        Object.assign(this.config, config);\n\n        // Call invitation\n        const {\n            ringtoneConfig,\n            innerText,\n            notifyWhenAppRunningInBackgroundOrQuit,\n            certificateIndex,\n            isIOSSandboxEnvironment,\n        } = this.config;\n        // Init inner text helper\n        InnerTextHelper.instance().init(innerText);\n        // Monitor application status\n        this.subscription = AppState.addEventListener(\n            'change',\n            (nextAppState) => {\n                if (nextAppState === 'active') {\n                  ZegoPrebuiltPlugins.reconnectIfDisconnected();\n                }\n            }\n        );\n\n        if (ZegoUIKit.getPluginName('ZPNs')) {\n          // Enable offline notification\n          ZegoUIKit.getSignalingPlugin().enableNotifyWhenAppRunningInBackgroundOrQuit(certificateIndex, isIOSSandboxEnvironment, this.config.appName);\n        } else {\n          zloginfo('[ZegoUIKitPrebuiltCallService] ZPNs not installed')\n        }\n\n        if (Platform.OS === 'ios' && !ZegoUIKit.getPluginName('CallKit')) {\n          zloginfo('[ZegoUIKitPrebuiltCallService] iOS CallKit not installed')\n        }\n\n        NotificationHelper.getInstance().init()\n\n        PrebuiltCallReport.create(appID, appSign, {\n          'call_version': getPackageVersion(),\n          'user_id': userID\n        });\n        \n        const eventBegin = Date.now();\n        return new Promise((resolve, reject) => {\n          setTimeout(() => {\n            ZegoPrebuiltPlugins.init(appID, appSign, userID, userName, plugins).then(() => {\n              PrebuiltCallReport.reportEvent('call/init', {\n                'error': 0,\n                'msg': '',\n                'start_time': eventBegin\n              });\n              resolve();\n\n              OfflineCallEventListener.getInstance().init(this.config);\n              CallEventNotifyApp.getInstance().init(this.config)\n  \n              CallInviteStateManage.init();\n              BellManage.initRingtoneConfig(ringtoneConfig);\n              BellManage.initIncomingSound();\n              BellManage.initOutgoingSound();\n              this.isInit = true;\n              this.notifyInit();\n            }).catch(() => {\n              PrebuiltCallReport.reportEvent('call/init', {\n                'error': -1,\n                'msg': 'unknown',\n                'start_time': eventBegin\n              });\n              reject();\n            });\n          }, 500);\n        });\n    }\n    uninit() {\n        PrebuiltCallReport.reportEvent('call/unInit', null);\n        if (this.isInit) {\n            ZegoPrebuiltPlugins.uninit();\n            BellManage.releaseIncomingSound();\n            BellManage.releaseOutgoingSound();\n            CallInviteStateManage.uninit();\n            this.subscription.remove();\n            OfflineCallEventListener.getInstance().uninit();\n            this.isInit = false;\n        }\n    }\n    getInitUser() {\n        return this.localUser;\n    }\n    getInitAppInfo() {\n        return this.appInfo;\n    }\n    getInitConfig() {\n        return this.config;\n    }\n    notifyInit() {\n        Object.keys(this.onInitCallbackMap).forEach((callbackID) => {\n            if (this.onInitCallbackMap[callbackID]) {\n                this.onInitCallbackMap[callbackID]();\n            }\n        });\n    }\n    onInit(callbackID, callback) {\n        if (typeof callback !== 'function') {\n            delete this.onInitCallbackMap[callbackID];\n        } else {\n            this.onInitCallbackMap[callbackID] = callback;\n        }\n    }\n    hangUp(showConfirmation = false) {\n        zloginfo(`[ZegoUIKitPrebuiltCallService][hangUp] showConfirmation: ${showConfirmation}`)\n\n        const debounce = HangupHelper.getInstance().getDebounce();\n        const config = this.config.requireConfig ? this.config.requireConfig({}) : {};\n        const { onCallEnd, onHangUpConfirmation, hangUpConfirmInfo } = config;\n\n        if (debounce) {\n          zloginfo(`[ZegoUIKitPrebuiltCallService][hangUp] debounce: ${debounce}, return`)\n          return;\n        }\n        \n        let routeParams = PrebuiltHelper.getInstance().getRouteParams();\n        if (!routeParams.roomID) {\n          zloginfo(`[ZegoUIKitPrebuiltCallService][hangUp] can't get roomID from routeParams, return`)\n          return\n        }\n\n        if (!showConfirmation) {\n            HangupHelper.getInstance().setDebounce(true);\n            this._hangupProcess(onCallEnd, routeParams.roomID, ZegoCallEndReason.localHangUp);\n            HangupHelper.getInstance().setDebounce(false);\n        } else {\n            HangupHelper.getInstance().setDebounce(true);\n            const temp = onHangUpConfirmation || HangupHelper.getInstance().showLeaveAlert.bind(this, hangUpConfirmInfo);\n            temp().then(() => {\n                this._hangupProcess(onCallEnd, routeParams.roomID, ZegoCallEndReason.localHangUp);\n                HangupHelper.getInstance().setDebounce(false);\n            });\n        }\n    }\n    minimizeWindow () {\n        MinimizingHelper.getInstance().minimizeWindow();\n    }\n\n    sendCallInvitation(invitees, isVideoCall, navigation, options) {\n      return ZegoUIKitPrebuiltCallInvitation.getInstance().sendCallInvitation(\n        invitees, \n        isVideoCall, \n        navigation, \n        options\n      );\n    }\n\n    requestSystemAlertWindow(alert) {\n      // System Alert\n      RNCallKit.requestSystemAlertWindow(alert.message, alert.allow, alert.deny);\n    }\n\n    _hangupProcess(onCallEnd, roomID, endReason) {\n      const isMinimize = MinimizingHelper.getInstance().getIsMinimize();\n      zloginfo('[ZegoUIKitPrebuiltCallService][_hangupProcess] roomID: ', roomID, 'endReason: ', endReason, 'isMinimize: ', isMinimize)\n      const duration = TimingHelper.getInstance().getDuration();\n\n      if (typeof onCallEnd !== 'function') {\n        HangupHelper.getInstance().notifyAutoJump();\n      } else {\n        zloginfo('[ZegoUIKitPrebuiltCallService][hangUp] notify requireConfig.onCallEnd will')\n        onCallEnd(roomID, endReason, duration);\n        zloginfo('[ZegoUIKitPrebuiltCallService][hangUp] notify requireConfig.onCallEnd succeed')\n\n        if (isMinimize) {\n          PrebuiltHelper.getInstance().notifyDestroyPrebuilt();\n        }\n      }\n    }\n}"],"mappings":";;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAC,uBAAA,CAAAF,OAAA;AACA,IAAAG,kBAAA,GAAAC,sBAAA,CAAAJ,OAAA;AACA,IAAAK,gBAAA,GAAAD,sBAAA,CAAAJ,OAAA;AACA,IAAAM,KAAA,GAAAF,sBAAA,CAAAJ,OAAA;AACA,IAAAO,qBAAA,GAAAH,sBAAA,CAAAJ,OAAA;AACA,IAAAQ,QAAA,GAAAJ,sBAAA,CAAAJ,OAAA;AACA,IAAAS,cAAA,GAAAL,sBAAA,CAAAJ,OAAA;AACA,IAAAU,kBAAA,GAAAN,sBAAA,CAAAJ,OAAA;AACA,IAAAW,qBAAA,GAAAP,sBAAA,CAAAJ,OAAA;AACA,IAAAY,oBAAA,GAAAR,sBAAA,CAAAJ,OAAA;AACA,IAAAa,4BAAA,GAAAT,sBAAA,CAAAJ,OAAA;AACA,IAAAc,QAAA,GAAAV,sBAAA,CAAAJ,OAAA;AACA,IAAAe,OAAA,GAAAf,OAAA;AACA,IAAAgB,OAAA,GAAAZ,sBAAA,CAAAJ,OAAA;AACA,IAAAiB,gBAAA,GAAAjB,OAAA;AACA,IAAAkB,QAAA,GAAAlB,OAAA;AACA,IAAAmB,WAAA,GAAAf,sBAAA,CAAAJ,OAAA;AACA,IAAAoB,cAAA,GAAAhB,sBAAA,CAAAJ,OAAA;AAA2C,SAAAI,uBAAAiB,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAnB,wBAAAmB,CAAA,EAAAG,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAvB,uBAAA,YAAAA,CAAAmB,CAAA,EAAAG,CAAA,SAAAA,CAAA,IAAAH,CAAA,IAAAA,CAAA,CAAAC,UAAA,SAAAD,CAAA,MAAAO,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAR,OAAA,EAAAF,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAS,CAAA,MAAAF,CAAA,GAAAJ,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAE,CAAA,CAAAI,GAAA,CAAAX,CAAA,UAAAO,CAAA,CAAAK,GAAA,CAAAZ,CAAA,GAAAO,CAAA,CAAAM,GAAA,CAAAb,CAAA,EAAAS,CAAA,gBAAAN,CAAA,IAAAH,CAAA,gBAAAG,CAAA,OAAAW,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAG,CAAA,OAAAK,CAAA,IAAAD,CAAA,GAAAS,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAG,CAAA,OAAAK,CAAA,CAAAI,GAAA,IAAAJ,CAAA,CAAAK,GAAA,IAAAN,CAAA,CAAAE,CAAA,EAAAN,CAAA,EAAAK,CAAA,IAAAC,CAAA,CAAAN,CAAA,IAAAH,CAAA,CAAAG,CAAA,WAAAM,CAAA,KAAAT,CAAA,EAAAG,CAAA;AAAA,SAAAgB,gBAAAnB,CAAA,EAAAK,CAAA,EAAAF,CAAA,YAAAE,CAAA,GAAAe,cAAA,CAAAf,CAAA,MAAAL,CAAA,GAAAgB,MAAA,CAAAC,cAAA,CAAAjB,CAAA,EAAAK,CAAA,IAAAgB,KAAA,EAAAlB,CAAA,EAAAmB,UAAA,MAAAC,YAAA,MAAAC,QAAA,UAAAxB,CAAA,CAAAK,CAAA,IAAAF,CAAA,EAAAH,CAAA;AAAA,SAAAoB,eAAAjB,CAAA,QAAAK,CAAA,GAAAiB,YAAA,CAAAtB,CAAA,uCAAAK,CAAA,GAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAiB,aAAAtB,CAAA,EAAAE,CAAA,2BAAAF,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAH,CAAA,GAAAG,CAAA,CAAAuB,MAAA,CAAAC,WAAA,kBAAA3B,CAAA,QAAAQ,CAAA,GAAAR,CAAA,CAAAe,IAAA,CAAAZ,CAAA,EAAAE,CAAA,uCAAAG,CAAA,SAAAA,CAAA,YAAAoB,SAAA,yEAAAvB,CAAA,GAAAwB,MAAA,GAAAC,MAAA,EAAA3B,CAAA;AAE5B,MAAM4B,4BAA4B,CAAC;EAwC9CC,WAAWA,CAAA,EAAG;IAAAb,eAAA;IAAAA,eAAA,kBAtCJ,CAAC,CAAC;IAAAA,eAAA,oBACA,CAAC,CAAC;IAAAA,eAAA,iBACL;MACLc,cAAc,EAAE;QACZC,oBAAoB,EAAE,mBAAmB;QACzCC,oBAAoB,EAAE;MAC1B,CAAC;MACDC,SAAS,EAAE,CAAC,CAAC;MACbC,yBAAyB,EAAE;QACvBC,SAAS,EAAE,gBAAgB;QAC3BC,WAAW,EAAE;MACjB,CAAC;MACDC,sCAAsC,EAAE,IAAI;MAAE;MAC9CC,uBAAuB,EAAEC,SAAS;MAClCC,iBAAiB,EAAE;QACjB;QACA;QACA;QACA;QACA;QACA;QACA;MAAA;MAEF;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACJ,CAAC;IAAAxB,eAAA,iBACQ,KAAK;IAAAA,eAAA,uBACC,IAAI;IAAAA,eAAA,4BACC,CAAC,CAAC;IAAAA,eAAA,mCACK,CAAC,CAAC;EACb;EAChB,OAAOyB,WAAWA,CAAA,EAAG;IACjB,OAAO,IAAI,CAACC,SAAS,KAAK,IAAI,CAACA,SAAS,GAAG,IAAId,4BAA4B,CAAC,CAAC,CAAC;EAClF;EACAe,aAAaA,CAAA,EAAG;IACZ,OAAO,cAAc;EACzB;EACAC,kBAAkBA,CAACC,OAAO,EAAE;IACxB,IAAAC,gBAAQ,EAAC,+DAA+DD,OAAO,EAAE,CAAC;IAClFE,4BAAe,CAACC,QAAQ,CAAC,CAAC;IAE1BC,oCAAwB,CAACR,WAAW,CAAC,CAAC,CAACG,kBAAkB,CAACC,OAAO,CAAC;EACtE;EACAK,IAAIA,CAACC,KAAK,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,EAAET,OAAO,EAAEU,MAAM,GAAG,CAAC,CAAC,EAAE;IACzDR,4BAAe,CAACS,YAAY,CAACH,MAAM,CAAC;IAEpC,IAAI,IAAI,CAACI,MAAM,EAAE;MACb,IAAI,CAACC,UAAU,CAAC,CAAC;MACjB7C,MAAM,CAAC8C,MAAM,CAAC,IAAI,CAACJ,MAAM,EAAEA,MAAM,CAAC;MAClC,OAAOK,OAAO,CAACC,OAAO,CAAC,CAAC;IAC5B;IAEA,IAAAf,gBAAQ,EAAC,+CAA+CK,KAAK,aAAaE,MAAM,eAAeC,QAAQ,cAAcT,OAAO,EAAE,CAAC;IAE/H,IAAI,CAACiB,OAAO,GAAG;MAAEX,KAAK;MAAEC;IAAQ,CAAC;IACjC,IAAI,CAACW,SAAS,GAAG;MAAEV,MAAM;MAAEC;IAAS,CAAC;IACrCzC,MAAM,CAAC8C,MAAM,CAAC,IAAI,CAACJ,MAAM,EAAEA,MAAM,CAAC;;IAElC;IACA,MAAM;MACFzB,cAAc;MACdG,SAAS;MACTI,sCAAsC;MACtC2B,gBAAgB;MAChB1B;IACJ,CAAC,GAAG,IAAI,CAACiB,MAAM;IACf;IACAU,0BAAe,CAACC,QAAQ,CAAC,CAAC,CAAChB,IAAI,CAACjB,SAAS,CAAC;IAC1C;IACA,IAAI,CAACkC,YAAY,GAAGC,qBAAQ,CAACC,gBAAgB,CACzC,QAAQ,EACPC,YAAY,IAAK;MACd,IAAIA,YAAY,KAAK,QAAQ,EAAE;QAC7BC,gBAAmB,CAACC,uBAAuB,CAAC,CAAC;MAC/C;IACJ,CACJ,CAAC;IAED,IAAIC,oBAAS,CAACC,aAAa,CAAC,MAAM,CAAC,EAAE;MACnC;MACAD,oBAAS,CAACE,kBAAkB,CAAC,CAAC,CAACC,4CAA4C,CAACZ,gBAAgB,EAAE1B,uBAAuB,EAAE,IAAI,CAACiB,MAAM,CAACsB,OAAO,CAAC;IAC7I,CAAC,MAAM;MACL,IAAA/B,gBAAQ,EAAC,mDAAmD,CAAC;IAC/D;IAEA,IAAIgC,QAAQ,CAACC,EAAE,KAAK,KAAK,IAAI,CAACN,oBAAS,CAACC,aAAa,CAAC,SAAS,CAAC,EAAE;MAChE,IAAA5B,gBAAQ,EAAC,0DAA0D,CAAC;IACtE;IAEAkC,4BAAkB,CAACvC,WAAW,CAAC,CAAC,CAACS,IAAI,CAAC,CAAC;IAEvC+B,eAAkB,CAACC,MAAM,CAAC/B,KAAK,EAAEC,OAAO,EAAE;MACxC,cAAc,EAAE,IAAA+B,kCAAiB,EAAC,CAAC;MACnC,SAAS,EAAE9B;IACb,CAAC,CAAC;IAEF,MAAM+B,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;IAC7B,OAAO,IAAI1B,OAAO,CAAC,CAACC,OAAO,EAAE0B,MAAM,KAAK;MACtCC,UAAU,CAAC,MAAM;QACfjB,gBAAmB,CAACrB,IAAI,CAACC,KAAK,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,EAAET,OAAO,CAAC,CAAC4C,IAAI,CAAC,MAAM;UAC7ER,eAAkB,CAACS,WAAW,CAAC,WAAW,EAAE;YAC1C,OAAO,EAAE,CAAC;YACV,KAAK,EAAE,EAAE;YACT,YAAY,EAAEN;UAChB,CAAC,CAAC;UACFvB,OAAO,CAAC,CAAC;UAETZ,oCAAwB,CAACR,WAAW,CAAC,CAAC,CAACS,IAAI,CAAC,IAAI,CAACK,MAAM,CAAC;UACxDoC,6BAAkB,CAAClD,WAAW,CAAC,CAAC,CAACS,IAAI,CAAC,IAAI,CAACK,MAAM,CAAC;UAElDqC,6BAAqB,CAAC1C,IAAI,CAAC,CAAC;UAC5B2C,aAAU,CAACC,kBAAkB,CAAChE,cAAc,CAAC;UAC7C+D,aAAU,CAACE,iBAAiB,CAAC,CAAC;UAC9BF,aAAU,CAACG,iBAAiB,CAAC,CAAC;UAC9B,IAAI,CAACvC,MAAM,GAAG,IAAI;UAClB,IAAI,CAACC,UAAU,CAAC,CAAC;QACnB,CAAC,CAAC,CAACuC,KAAK,CAAC,MAAM;UACbhB,eAAkB,CAACS,WAAW,CAAC,WAAW,EAAE;YAC1C,OAAO,EAAE,CAAC,CAAC;YACX,KAAK,EAAE,SAAS;YAChB,YAAY,EAAEN;UAChB,CAAC,CAAC;UACFG,MAAM,CAAC,CAAC;QACV,CAAC,CAAC;MACJ,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,CAAC;EACN;EACAW,MAAMA,CAAA,EAAG;IACLjB,eAAkB,CAACS,WAAW,CAAC,aAAa,EAAE,IAAI,CAAC;IACnD,IAAI,IAAI,CAACjC,MAAM,EAAE;MACbc,gBAAmB,CAAC2B,MAAM,CAAC,CAAC;MAC5BL,aAAU,CAACM,oBAAoB,CAAC,CAAC;MACjCN,aAAU,CAACO,oBAAoB,CAAC,CAAC;MACjCR,6BAAqB,CAACM,MAAM,CAAC,CAAC;MAC9B,IAAI,CAAC/B,YAAY,CAACkC,MAAM,CAAC,CAAC;MAC1BpD,oCAAwB,CAACR,WAAW,CAAC,CAAC,CAACyD,MAAM,CAAC,CAAC;MAC/C,IAAI,CAACzC,MAAM,GAAG,KAAK;IACvB;EACJ;EACA6C,WAAWA,CAAA,EAAG;IACV,OAAO,IAAI,CAACvC,SAAS;EACzB;EACAwC,cAAcA,CAAA,EAAG;IACb,OAAO,IAAI,CAACzC,OAAO;EACvB;EACA0C,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACjD,MAAM;EACtB;EACAG,UAAUA,CAAA,EAAG;IACT7C,MAAM,CAAC4F,IAAI,CAAC,IAAI,CAACC,iBAAiB,CAAC,CAACC,OAAO,CAAEC,UAAU,IAAK;MACxD,IAAI,IAAI,CAACF,iBAAiB,CAACE,UAAU,CAAC,EAAE;QACpC,IAAI,CAACF,iBAAiB,CAACE,UAAU,CAAC,CAAC,CAAC;MACxC;IACJ,CAAC,CAAC;EACN;EACAC,MAAMA,CAACD,UAAU,EAAEE,QAAQ,EAAE;IACzB,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;MAChC,OAAO,IAAI,CAACJ,iBAAiB,CAACE,UAAU,CAAC;IAC7C,CAAC,MAAM;MACH,IAAI,CAACF,iBAAiB,CAACE,UAAU,CAAC,GAAGE,QAAQ;IACjD;EACJ;EACAC,MAAMA,CAACC,gBAAgB,GAAG,KAAK,EAAE;IAC7B,IAAAlE,gBAAQ,EAAC,4DAA4DkE,gBAAgB,EAAE,CAAC;IAExF,MAAMC,QAAQ,GAAGC,sBAAY,CAACzE,WAAW,CAAC,CAAC,CAAC0E,WAAW,CAAC,CAAC;IACzD,MAAM5D,MAAM,GAAG,IAAI,CAACA,MAAM,CAAC6D,aAAa,GAAG,IAAI,CAAC7D,MAAM,CAAC6D,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IAC7E,MAAM;MAAEC,SAAS;MAAEC,oBAAoB;MAAEC;IAAkB,CAAC,GAAGhE,MAAM;IAErE,IAAI0D,QAAQ,EAAE;MACZ,IAAAnE,gBAAQ,EAAC,oDAAoDmE,QAAQ,UAAU,CAAC;MAChF;IACF;IAEA,IAAIO,WAAW,GAAGC,wBAAc,CAAChF,WAAW,CAAC,CAAC,CAACiF,cAAc,CAAC,CAAC;IAC/D,IAAI,CAACF,WAAW,CAACG,MAAM,EAAE;MACvB,IAAA7E,gBAAQ,EAAC,kFAAkF,CAAC;MAC5F;IACF;IAEA,IAAI,CAACkE,gBAAgB,EAAE;MACnBE,sBAAY,CAACzE,WAAW,CAAC,CAAC,CAACmF,WAAW,CAAC,IAAI,CAAC;MAC5C,IAAI,CAACC,cAAc,CAACR,SAAS,EAAEG,WAAW,CAACG,MAAM,EAAEG,0BAAiB,CAACC,WAAW,CAAC;MACjFb,sBAAY,CAACzE,WAAW,CAAC,CAAC,CAACmF,WAAW,CAAC,KAAK,CAAC;IACjD,CAAC,MAAM;MACHV,sBAAY,CAACzE,WAAW,CAAC,CAAC,CAACmF,WAAW,CAAC,IAAI,CAAC;MAC5C,MAAMI,IAAI,GAAGV,oBAAoB,IAAIJ,sBAAY,CAACzE,WAAW,CAAC,CAAC,CAACwF,cAAc,CAACC,IAAI,CAAC,IAAI,EAAEX,iBAAiB,CAAC;MAC5GS,IAAI,CAAC,CAAC,CAACvC,IAAI,CAAC,MAAM;QACd,IAAI,CAACoC,cAAc,CAACR,SAAS,EAAEG,WAAW,CAACG,MAAM,EAAEG,0BAAiB,CAACC,WAAW,CAAC;QACjFb,sBAAY,CAACzE,WAAW,CAAC,CAAC,CAACmF,WAAW,CAAC,KAAK,CAAC;MACjD,CAAC,CAAC;IACN;EACJ;EACAO,cAAcA,CAAA,EAAI;IACdC,0BAAgB,CAAC3F,WAAW,CAAC,CAAC,CAAC0F,cAAc,CAAC,CAAC;EACnD;EAEAE,kBAAkBA,CAACC,QAAQ,EAAEC,WAAW,EAAEC,UAAU,EAAEC,OAAO,EAAE;IAC7D,OAAOC,mBAA+B,CAACjG,WAAW,CAAC,CAAC,CAAC4F,kBAAkB,CACrEC,QAAQ,EACRC,WAAW,EACXC,UAAU,EACVC,OACF,CAAC;EACH;EAEAE,wBAAwBA,CAACC,KAAK,EAAE;IAC9B;IACAC,gBAAS,CAACF,wBAAwB,CAACC,KAAK,CAACE,OAAO,EAAEF,KAAK,CAACG,KAAK,EAAEH,KAAK,CAACI,IAAI,CAAC;EAC5E;EAEAnB,cAAcA,CAACR,SAAS,EAAEM,MAAM,EAAEsB,SAAS,EAAE;IAC3C,MAAMC,UAAU,GAAGd,0BAAgB,CAAC3F,WAAW,CAAC,CAAC,CAAC0G,aAAa,CAAC,CAAC;IACjE,IAAArG,gBAAQ,EAAC,yDAAyD,EAAE6E,MAAM,EAAE,aAAa,EAAEsB,SAAS,EAAE,cAAc,EAAEC,UAAU,CAAC;IACjI,MAAME,QAAQ,GAAGC,sBAAY,CAAC5G,WAAW,CAAC,CAAC,CAAC6G,WAAW,CAAC,CAAC;IAEzD,IAAI,OAAOjC,SAAS,KAAK,UAAU,EAAE;MACnCH,sBAAY,CAACzE,WAAW,CAAC,CAAC,CAAC8G,cAAc,CAAC,CAAC;IAC7C,CAAC,MAAM;MACL,IAAAzG,gBAAQ,EAAC,4EAA4E,CAAC;MACtFuE,SAAS,CAACM,MAAM,EAAEsB,SAAS,EAAEG,QAAQ,CAAC;MACtC,IAAAtG,gBAAQ,EAAC,+EAA+E,CAAC;MAEzF,IAAIoG,UAAU,EAAE;QACdzB,wBAAc,CAAChF,WAAW,CAAC,CAAC,CAAC+G,qBAAqB,CAAC,CAAC;MACtD;IACF;EACF;AACJ;AAACC,OAAA,CAAA1J,OAAA,GAAA6B,4BAAA","ignoreList":[]}