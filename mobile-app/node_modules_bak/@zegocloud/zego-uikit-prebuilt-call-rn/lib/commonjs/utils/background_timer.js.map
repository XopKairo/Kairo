{"version":3,"names":["_reactNative","require","ZegoUIKitPrebuiltCallRNModule","NativeModules","Emitter","NativeEventEmitter","BackgroundTimer","constructor","uniqueId","callbacks","addListener","id","callbackById","callback","interval","setTimeout","timeout","timeoutId","clearTimeout","setInterval","intervalId","clearInterval","_default","exports","default"],"sources":["background_timer.js"],"sourcesContent":["import { NativeEventEmitter, NativeModules } from \"react-native\";\n\nconst { ZegoUIKitPrebuiltCallRNModule } = NativeModules;\nconst Emitter = new NativeEventEmitter(ZegoUIKitPrebuiltCallRNModule);\n\nclass BackgroundTimer {\n  constructor() {\n    this.uniqueId = 0;\n    this.callbacks = {};\n\n    Emitter.addListener('backgroundTimer.timeout', (id) => {\n      if (this.callbacks[id]) {\n        const callbackById = this.callbacks[id];\n        const { callback } = callbackById;\n        if (!this.callbacks[id].interval) {\n          delete this.callbacks[id];\n        } else {\n          ZegoUIKitPrebuiltCallRNModule.setTimeout(id, this.callbacks[id].timeout);\n        }\n        callback();\n      }\n    });\n  }\n\n  // New API, allowing for multiple timers\n  setTimeout(callback, timeout) {\n    this.uniqueId += 1;\n    const timeoutId = this.uniqueId;\n    this.callbacks[timeoutId] = {\n      callback,\n      interval: false,\n      timeout,\n    };\n    ZegoUIKitPrebuiltCallRNModule.setTimeout(timeoutId, timeout);\n    return timeoutId;\n  }\n\n  clearTimeout(timeoutId) {\n    if (this.callbacks[timeoutId]) {\n      delete this.callbacks[timeoutId];\n    }\n  }\n\n  setInterval(callback, timeout) {\n    this.uniqueId += 1;\n    const intervalId = this.uniqueId;\n    this.callbacks[intervalId] = {\n      callback,\n      interval: true,\n      timeout,\n    };\n    ZegoUIKitPrebuiltCallRNModule.setTimeout(intervalId, timeout);\n    return intervalId;\n  }\n\n  clearInterval(intervalId) {\n    if (this.callbacks[intervalId]) {\n      delete this.callbacks[intervalId];\n    }\n  }\n}\n\nexport default new BackgroundTimer();"],"mappings":";;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAEA,MAAM;EAAEC;AAA8B,CAAC,GAAGC,0BAAa;AACvD,MAAMC,OAAO,GAAG,IAAIC,+BAAkB,CAACH,6BAA6B,CAAC;AAErE,MAAMI,eAAe,CAAC;EACpBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,QAAQ,GAAG,CAAC;IACjB,IAAI,CAACC,SAAS,GAAG,CAAC,CAAC;IAEnBL,OAAO,CAACM,WAAW,CAAC,yBAAyB,EAAGC,EAAE,IAAK;MACrD,IAAI,IAAI,CAACF,SAAS,CAACE,EAAE,CAAC,EAAE;QACtB,MAAMC,YAAY,GAAG,IAAI,CAACH,SAAS,CAACE,EAAE,CAAC;QACvC,MAAM;UAAEE;QAAS,CAAC,GAAGD,YAAY;QACjC,IAAI,CAAC,IAAI,CAACH,SAAS,CAACE,EAAE,CAAC,CAACG,QAAQ,EAAE;UAChC,OAAO,IAAI,CAACL,SAAS,CAACE,EAAE,CAAC;QAC3B,CAAC,MAAM;UACLT,6BAA6B,CAACa,UAAU,CAACJ,EAAE,EAAE,IAAI,CAACF,SAAS,CAACE,EAAE,CAAC,CAACK,OAAO,CAAC;QAC1E;QACAH,QAAQ,CAAC,CAAC;MACZ;IACF,CAAC,CAAC;EACJ;;EAEA;EACAE,UAAUA,CAACF,QAAQ,EAAEG,OAAO,EAAE;IAC5B,IAAI,CAACR,QAAQ,IAAI,CAAC;IAClB,MAAMS,SAAS,GAAG,IAAI,CAACT,QAAQ;IAC/B,IAAI,CAACC,SAAS,CAACQ,SAAS,CAAC,GAAG;MAC1BJ,QAAQ;MACRC,QAAQ,EAAE,KAAK;MACfE;IACF,CAAC;IACDd,6BAA6B,CAACa,UAAU,CAACE,SAAS,EAAED,OAAO,CAAC;IAC5D,OAAOC,SAAS;EAClB;EAEAC,YAAYA,CAACD,SAAS,EAAE;IACtB,IAAI,IAAI,CAACR,SAAS,CAACQ,SAAS,CAAC,EAAE;MAC7B,OAAO,IAAI,CAACR,SAAS,CAACQ,SAAS,CAAC;IAClC;EACF;EAEAE,WAAWA,CAACN,QAAQ,EAAEG,OAAO,EAAE;IAC7B,IAAI,CAACR,QAAQ,IAAI,CAAC;IAClB,MAAMY,UAAU,GAAG,IAAI,CAACZ,QAAQ;IAChC,IAAI,CAACC,SAAS,CAACW,UAAU,CAAC,GAAG;MAC3BP,QAAQ;MACRC,QAAQ,EAAE,IAAI;MACdE;IACF,CAAC;IACDd,6BAA6B,CAACa,UAAU,CAACK,UAAU,EAAEJ,OAAO,CAAC;IAC7D,OAAOI,UAAU;EACnB;EAEAC,aAAaA,CAACD,UAAU,EAAE;IACxB,IAAI,IAAI,CAACX,SAAS,CAACW,UAAU,CAAC,EAAE;MAC9B,OAAO,IAAI,CAACX,SAAS,CAACW,UAAU,CAAC;IACnC;EACF;AACF;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEc,IAAIlB,eAAe,CAAC,CAAC","ignoreList":[]}