{"version":3,"names":["React","useState","View","StyleSheet","TouchableOpacity","useSafeAreaInsets","ZegoLeaveButton","ZegoSwitchAudioOutputButton","ZegoSwitchCameraButton","ZegoToggleCameraButton","ZegoToggleMicrophoneButton","ZegoMoreButton","ZegoMenuBarButtonName","ZegoMessageButton","ZegoBottomBar","props","insets","menuBarButtonsMaxCount","menuBarButtons","menuBarExtendedButtons","onHangUp","onHangUpConfirmation","turnOnCameraWhenJoining","turnOnMicrophoneWhenJoining","useSpeakerWhenJoining","onMorePress","onSwitchCamera","onMessagePress","buttonBuilders","isNormalStyle","setIsNormalStyle","getButtonByButtonIndex","buttonIndex","toggleCameraButton","createElement","key","isOn","toggleMicrophoneButton","hangUpButton","onLeaveConfirmation","onPressed","iconBuilder","hangupBuilder","switchAudioOutputButton","useSpeaker","switchCameraButton","onPress","messageButton","getDisplayButtons","maxCount","needMoreButton","length","firstLevelButtons","secondLevelButtons","forEach","limitCount","push","button","getButtonStyle","btnStyles","styles","ctrlBtn1","ctrlBtn2","ctrlBtn3","ctrlBtn4","ctrlBtn5","allButtons","style","normalBar","bottom","map","index","popupContainer","fillParent","popupMask","popupBar","marginBottom","marginRight","marginLeft","create","flex","position","flexDirection","justifyContent","alignItems","width","height","zIndex","backgroundColor","opacity","paddingTop","paddingBottom","paddingLeft","paddingRight","flexWrap"],"sources":["ZegoBottomBar.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { View, StyleSheet, TouchableOpacity } from \"react-native\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\"\n\nimport {\n    ZegoLeaveButton,\n    ZegoSwitchAudioOutputButton,\n    ZegoSwitchCameraButton,\n    ZegoToggleCameraButton,\n    ZegoToggleMicrophoneButton\n} from '@zegocloud/zego-uikit-rn'\n\nimport ZegoMoreButton from './ZegoMoreButton';\nimport ZegoMenuBarButtonName from \"./ZegoMenuBarButtonName\";\nimport ZegoMessageButton from \"./ZegoMessageButton\";\n\n\nexport default function ZegoBottomBar(props) {\n    const insets = useSafeAreaInsets();\n\n    const {\n        menuBarButtonsMaxCount = 5,\n        menuBarButtons = [],\n        menuBarExtendedButtons = [],\n        onHangUp,\n        onHangUpConfirmation,\n        turnOnCameraWhenJoining,\n        turnOnMicrophoneWhenJoining,\n        useSpeakerWhenJoining,\n        onMorePress,\n        onSwitchCamera,\n        onMessagePress,\n        buttonBuilders = {},\n    } = props;\n    const [isNormalStyle, setIsNormalStyle] = useState(true);\n\n    const getButtonByButtonIndex = (buttonIndex) => {\n        switch (buttonIndex) {\n            case ZegoMenuBarButtonName.toggleCameraButton:\n                return <ZegoToggleCameraButton key={1} isOn={turnOnCameraWhenJoining} />;\n            case ZegoMenuBarButtonName.toggleMicrophoneButton:\n                return <ZegoToggleMicrophoneButton key={2} isOn={turnOnMicrophoneWhenJoining} />;\n            case ZegoMenuBarButtonName.hangUpButton:\n                return <ZegoLeaveButton key={0} onLeaveConfirmation={onHangUpConfirmation} onPressed={onHangUp} iconBuilder={buttonBuilders.hangupBuilder} />\n            case ZegoMenuBarButtonName.switchAudioOutputButton:\n                return <ZegoSwitchAudioOutputButton key={4} useSpeaker={useSpeakerWhenJoining} />\n            case ZegoMenuBarButtonName.switchCameraButton:\n                return <ZegoSwitchCameraButton key={3} onPress={onSwitchCamera}/>\n            case ZegoMenuBarButtonName.messageButton:\n                return <ZegoMessageButton key={7} onPress={onMessagePress} />\n        }\n    }\n    const getDisplayButtons = () => {\n        var maxCount = menuBarButtonsMaxCount < 1 ? 1 : menuBarButtonsMaxCount;\n        maxCount = maxCount > 5 ? 5 : maxCount;\n        const needMoreButton = (menuBarButtons.length + menuBarExtendedButtons.length) > maxCount;\n        const firstLevelButtons = [];\n        const secondLevelButtons = [];\n        menuBarButtons.forEach(buttonIndex => {\n            const limitCount = needMoreButton ? maxCount - 1 : maxCount;\n            if (firstLevelButtons.length < limitCount) {\n                firstLevelButtons.push(getButtonByButtonIndex(buttonIndex));\n            } else {\n                secondLevelButtons.push(getButtonByButtonIndex(buttonIndex));\n            }\n        });\n        menuBarExtendedButtons.forEach(button => {\n            const limitCount = needMoreButton ? maxCount - 1 : maxCount;\n            if (firstLevelButtons.length < limitCount) {\n                firstLevelButtons.push(button);\n            } else {\n                secondLevelButtons.push(button);\n            }\n        });\n        if (needMoreButton) {\n            firstLevelButtons.push(<ZegoMoreButton onPress={() => { setIsNormalStyle(false); if (onMorePress) onMorePress() }} />)\n        }\n        return {\n            firstLevelButtons: firstLevelButtons,\n            secondLevelButtons: secondLevelButtons\n        }\n    }\n    const getButtonStyle = () => {\n        const btnStyles = [styles.ctrlBtn1, styles.ctrlBtn2, styles.ctrlBtn3, styles.ctrlBtn4, styles.ctrlBtn5,]\n        return btnStyles[firstLevelButtons.length - 1]\n    }\n\n    var allButtons = getDisplayButtons();\n    var firstLevelButtons = allButtons['firstLevelButtons']\n    var secondLevelButtons = allButtons['secondLevelButtons']\n\n    return (\n        isNormalStyle ?\n            <View style={[styles.normalBar, {bottom: insets.bottom}]}>\n                {firstLevelButtons.map((button, index) => (\n                    <View key={index} style={getButtonStyle()}>\n                        {button}\n                    </View>\n                ))}\n            </View> :\n            <View style={[styles.popupContainer, styles.fillParent]}>\n                <View style={[styles.popupMask, styles.fillParent]} >\n                    <TouchableOpacity style={styles.fillParent} onPress={() => { setIsNormalStyle(true) }} />\n                </View>\n                <View style={styles.popupBar}>\n                    {secondLevelButtons.map((button, index) => (\n                        <View key={index} style={{ marginBottom: 20, marginRight: 32 / 2, marginLeft: 32 / 2 }}>\n                            {button}\n                        </View>\n                    ))}\n                </View>\n            </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    normalBar: {\n        flex: 1,\n        position: 'absolute',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'flex-end',\n        marginBottom: 50,\n        width: '100%',\n        height: 50,\n        zIndex: 2,\n    },\n    popupContainer: {\n        flex: 1,\n        justifyContent: 'flex-end',\n    },\n    fillParent: {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n    },\n    popupMask: {\n        backgroundColor: '#262A2D',\n        opacity: 0.3,\n    },\n    popupBar: {\n        flex: 1,\n        paddingTop: 27,\n        paddingBottom: 3,\n        paddingLeft: 28.5,\n        paddingRight: 28.5,\n        position: 'absolute',\n        flexDirection: 'row',\n        flexWrap: \"wrap\",\n        justifyContent: 'flex-start',\n        alignItems: 'flex-end',\n        width: '100%',\n        bottom: 0,\n        zIndex: 2,\n        backgroundColor: '#262A2D'\n    },\n    ctrlBtn1: {\n        marginLeft: 0,\n        marginRight: 0,\n    },\n    ctrlBtn2: {\n        marginLeft: 79 / 2,\n        marginRight: 79 / 2,\n    },\n    ctrlBtn3: {\n        marginLeft: 59.5 / 2,\n        marginRight: 59.5 / 2,\n    },\n    ctrlBtn4: {\n        marginLeft: 37 / 2,\n        marginRight: 37 / 2,\n    },\n    ctrlBtn5: {\n        marginLeft: 23 / 2,\n        marginRight: 23 / 2,\n    }\n});"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,IAAI,EAAEC,UAAU,EAAEC,gBAAgB,QAAQ,cAAc;AACjE,SAASC,iBAAiB,QAAQ,gCAAgC;AAElE,SACIC,eAAe,EACfC,2BAA2B,EAC3BC,sBAAsB,EACtBC,sBAAsB,EACtBC,0BAA0B,QACvB,0BAA0B;AAEjC,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,qBAAqB,MAAM,yBAAyB;AAC3D,OAAOC,iBAAiB,MAAM,qBAAqB;AAGnD,eAAe,SAASC,aAAaA,CAACC,KAAK,EAAE;EACzC,MAAMC,MAAM,GAAGX,iBAAiB,CAAC,CAAC;EAElC,MAAM;IACFY,sBAAsB,GAAG,CAAC;IAC1BC,cAAc,GAAG,EAAE;IACnBC,sBAAsB,GAAG,EAAE;IAC3BC,QAAQ;IACRC,oBAAoB;IACpBC,uBAAuB;IACvBC,2BAA2B;IAC3BC,qBAAqB;IACrBC,WAAW;IACXC,cAAc;IACdC,cAAc;IACdC,cAAc,GAAG,CAAC;EACtB,CAAC,GAAGb,KAAK;EACT,MAAM,CAACc,aAAa,EAAEC,gBAAgB,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAExD,MAAM8B,sBAAsB,GAAIC,WAAW,IAAK;IAC5C,QAAQA,WAAW;MACf,KAAKpB,qBAAqB,CAACqB,kBAAkB;QACzC,oBAAOjC,KAAA,CAAAkC,aAAA,CAACzB,sBAAsB;UAAC0B,GAAG,EAAE,CAAE;UAACC,IAAI,EAAEd;QAAwB,CAAE,CAAC;MAC5E,KAAKV,qBAAqB,CAACyB,sBAAsB;QAC7C,oBAAOrC,KAAA,CAAAkC,aAAA,CAACxB,0BAA0B;UAACyB,GAAG,EAAE,CAAE;UAACC,IAAI,EAAEb;QAA4B,CAAE,CAAC;MACpF,KAAKX,qBAAqB,CAAC0B,YAAY;QACnC,oBAAOtC,KAAA,CAAAkC,aAAA,CAAC5B,eAAe;UAAC6B,GAAG,EAAE,CAAE;UAACI,mBAAmB,EAAElB,oBAAqB;UAACmB,SAAS,EAAEpB,QAAS;UAACqB,WAAW,EAAEb,cAAc,CAACc;QAAc,CAAE,CAAC;MACjJ,KAAK9B,qBAAqB,CAAC+B,uBAAuB;QAC9C,oBAAO3C,KAAA,CAAAkC,aAAA,CAAC3B,2BAA2B;UAAC4B,GAAG,EAAE,CAAE;UAACS,UAAU,EAAEpB;QAAsB,CAAE,CAAC;MACrF,KAAKZ,qBAAqB,CAACiC,kBAAkB;QACzC,oBAAO7C,KAAA,CAAAkC,aAAA,CAAC1B,sBAAsB;UAAC2B,GAAG,EAAE,CAAE;UAACW,OAAO,EAAEpB;QAAe,CAAC,CAAC;MACrE,KAAKd,qBAAqB,CAACmC,aAAa;QACpC,oBAAO/C,KAAA,CAAAkC,aAAA,CAACrB,iBAAiB;UAACsB,GAAG,EAAE,CAAE;UAACW,OAAO,EAAEnB;QAAe,CAAE,CAAC;IACrE;EACJ,CAAC;EACD,MAAMqB,iBAAiB,GAAGA,CAAA,KAAM;IAC5B,IAAIC,QAAQ,GAAGhC,sBAAsB,GAAG,CAAC,GAAG,CAAC,GAAGA,sBAAsB;IACtEgC,QAAQ,GAAGA,QAAQ,GAAG,CAAC,GAAG,CAAC,GAAGA,QAAQ;IACtC,MAAMC,cAAc,GAAIhC,cAAc,CAACiC,MAAM,GAAGhC,sBAAsB,CAACgC,MAAM,GAAIF,QAAQ;IACzF,MAAMG,iBAAiB,GAAG,EAAE;IAC5B,MAAMC,kBAAkB,GAAG,EAAE;IAC7BnC,cAAc,CAACoC,OAAO,CAACtB,WAAW,IAAI;MAClC,MAAMuB,UAAU,GAAGL,cAAc,GAAGD,QAAQ,GAAG,CAAC,GAAGA,QAAQ;MAC3D,IAAIG,iBAAiB,CAACD,MAAM,GAAGI,UAAU,EAAE;QACvCH,iBAAiB,CAACI,IAAI,CAACzB,sBAAsB,CAACC,WAAW,CAAC,CAAC;MAC/D,CAAC,MAAM;QACHqB,kBAAkB,CAACG,IAAI,CAACzB,sBAAsB,CAACC,WAAW,CAAC,CAAC;MAChE;IACJ,CAAC,CAAC;IACFb,sBAAsB,CAACmC,OAAO,CAACG,MAAM,IAAI;MACrC,MAAMF,UAAU,GAAGL,cAAc,GAAGD,QAAQ,GAAG,CAAC,GAAGA,QAAQ;MAC3D,IAAIG,iBAAiB,CAACD,MAAM,GAAGI,UAAU,EAAE;QACvCH,iBAAiB,CAACI,IAAI,CAACC,MAAM,CAAC;MAClC,CAAC,MAAM;QACHJ,kBAAkB,CAACG,IAAI,CAACC,MAAM,CAAC;MACnC;IACJ,CAAC,CAAC;IACF,IAAIP,cAAc,EAAE;MAChBE,iBAAiB,CAACI,IAAI,cAACxD,KAAA,CAAAkC,aAAA,CAACvB,cAAc;QAACmC,OAAO,EAAEA,CAAA,KAAM;UAAEhB,gBAAgB,CAAC,KAAK,CAAC;UAAE,IAAIL,WAAW,EAAEA,WAAW,CAAC,CAAC;QAAC;MAAE,CAAE,CAAC,CAAC;IAC1H;IACA,OAAO;MACH2B,iBAAiB,EAAEA,iBAAiB;MACpCC,kBAAkB,EAAEA;IACxB,CAAC;EACL,CAAC;EACD,MAAMK,cAAc,GAAGA,CAAA,KAAM;IACzB,MAAMC,SAAS,GAAG,CAACC,MAAM,CAACC,QAAQ,EAAED,MAAM,CAACE,QAAQ,EAAEF,MAAM,CAACG,QAAQ,EAAEH,MAAM,CAACI,QAAQ,EAAEJ,MAAM,CAACK,QAAQ,CAAE;IACxG,OAAON,SAAS,CAACP,iBAAiB,CAACD,MAAM,GAAG,CAAC,CAAC;EAClD,CAAC;EAED,IAAIe,UAAU,GAAGlB,iBAAiB,CAAC,CAAC;EACpC,IAAII,iBAAiB,GAAGc,UAAU,CAAC,mBAAmB,CAAC;EACvD,IAAIb,kBAAkB,GAAGa,UAAU,CAAC,oBAAoB,CAAC;EAEzD,OACIrC,aAAa,gBACT7B,KAAA,CAAAkC,aAAA,CAAChC,IAAI;IAACiE,KAAK,EAAE,CAACP,MAAM,CAACQ,SAAS,EAAE;MAACC,MAAM,EAAErD,MAAM,CAACqD;IAAM,CAAC;EAAE,GACpDjB,iBAAiB,CAACkB,GAAG,CAAC,CAACb,MAAM,EAAEc,KAAK,kBACjCvE,KAAA,CAAAkC,aAAA,CAAChC,IAAI;IAACiC,GAAG,EAAEoC,KAAM;IAACJ,KAAK,EAAET,cAAc,CAAC;EAAE,GACrCD,MACC,CACT,CACC,CAAC,gBACPzD,KAAA,CAAAkC,aAAA,CAAChC,IAAI;IAACiE,KAAK,EAAE,CAACP,MAAM,CAACY,cAAc,EAAEZ,MAAM,CAACa,UAAU;EAAE,gBACpDzE,KAAA,CAAAkC,aAAA,CAAChC,IAAI;IAACiE,KAAK,EAAE,CAACP,MAAM,CAACc,SAAS,EAAEd,MAAM,CAACa,UAAU;EAAE,gBAC/CzE,KAAA,CAAAkC,aAAA,CAAC9B,gBAAgB;IAAC+D,KAAK,EAAEP,MAAM,CAACa,UAAW;IAAC3B,OAAO,EAAEA,CAAA,KAAM;MAAEhB,gBAAgB,CAAC,IAAI,CAAC;IAAC;EAAE,CAAE,CACtF,CAAC,eACP9B,KAAA,CAAAkC,aAAA,CAAChC,IAAI;IAACiE,KAAK,EAAEP,MAAM,CAACe;EAAS,GACxBtB,kBAAkB,CAACiB,GAAG,CAAC,CAACb,MAAM,EAAEc,KAAK,kBAClCvE,KAAA,CAAAkC,aAAA,CAAChC,IAAI;IAACiC,GAAG,EAAEoC,KAAM;IAACJ,KAAK,EAAE;MAAES,YAAY,EAAE,EAAE;MAAEC,WAAW,EAAE,EAAE,GAAG,CAAC;MAAEC,UAAU,EAAE,EAAE,GAAG;IAAE;EAAE,GAClFrB,MACC,CACT,CACC,CACJ,CAAC;AAEnB;AAEA,MAAMG,MAAM,GAAGzD,UAAU,CAAC4E,MAAM,CAAC;EAC7BX,SAAS,EAAE;IACPY,IAAI,EAAE,CAAC;IACPC,QAAQ,EAAE,UAAU;IACpBC,aAAa,EAAE,KAAK;IACpBC,cAAc,EAAE,QAAQ;IACxBC,UAAU,EAAE,UAAU;IACtBR,YAAY,EAAE,EAAE;IAChBS,KAAK,EAAE,MAAM;IACbC,MAAM,EAAE,EAAE;IACVC,MAAM,EAAE;EACZ,CAAC;EACDf,cAAc,EAAE;IACZQ,IAAI,EAAE,CAAC;IACPG,cAAc,EAAE;EACpB,CAAC;EACDV,UAAU,EAAE;IACRQ,QAAQ,EAAE,UAAU;IACpBI,KAAK,EAAE,MAAM;IACbC,MAAM,EAAE;EACZ,CAAC;EACDZ,SAAS,EAAE;IACPc,eAAe,EAAE,SAAS;IAC1BC,OAAO,EAAE;EACb,CAAC;EACDd,QAAQ,EAAE;IACNK,IAAI,EAAE,CAAC;IACPU,UAAU,EAAE,EAAE;IACdC,aAAa,EAAE,CAAC;IAChBC,WAAW,EAAE,IAAI;IACjBC,YAAY,EAAE,IAAI;IAClBZ,QAAQ,EAAE,UAAU;IACpBC,aAAa,EAAE,KAAK;IACpBY,QAAQ,EAAE,MAAM;IAChBX,cAAc,EAAE,YAAY;IAC5BC,UAAU,EAAE,UAAU;IACtBC,KAAK,EAAE,MAAM;IACbhB,MAAM,EAAE,CAAC;IACTkB,MAAM,EAAE,CAAC;IACTC,eAAe,EAAE;EACrB,CAAC;EACD3B,QAAQ,EAAE;IACNiB,UAAU,EAAE,CAAC;IACbD,WAAW,EAAE;EACjB,CAAC;EACDf,QAAQ,EAAE;IACNgB,UAAU,EAAE,EAAE,GAAG,CAAC;IAClBD,WAAW,EAAE,EAAE,GAAG;EACtB,CAAC;EACDd,QAAQ,EAAE;IACNe,UAAU,EAAE,IAAI,GAAG,CAAC;IACpBD,WAAW,EAAE,IAAI,GAAG;EACxB,CAAC;EACDb,QAAQ,EAAE;IACNc,UAAU,EAAE,EAAE,GAAG,CAAC;IAClBD,WAAW,EAAE,EAAE,GAAG;EACtB,CAAC;EACDZ,QAAQ,EAAE;IACNa,UAAU,EAAE,EAAE,GAAG,CAAC;IAClBD,WAAW,EAAE,EAAE,GAAG;EACtB;AACJ,CAAC,CAAC","ignoreList":[]}