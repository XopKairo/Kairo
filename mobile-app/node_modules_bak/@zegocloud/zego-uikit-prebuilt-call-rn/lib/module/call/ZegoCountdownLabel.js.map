{"version":3,"names":["React","useEffect","useState","View","StyleSheet","Text","SafeAreaView","durationFormat","TimingHelper","ZegoCountdownLabel","props","maxDuration","onCountdownFinished","duration","setDuration","Math","max","getInstance","getDuration","countdownFinished","setCountdownFinished","onDurationUpdate","v","createElement","style","styles","container","pointerEvents","timing","create","flex","position","width","height","top","zIndex","alignItems","color"],"sources":["ZegoCountdownLabel.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, StyleSheet, Text, SafeAreaView } from 'react-native';\nimport { durationFormat } from \"../utils\";\nimport TimingHelper, { } from \"../services/timing_helper\"\n\nexport default function ZegoCountdownLabel(props) {\n    const { maxDuration, onCountdownFinished } = props;\n    const [duration, setDuration] = useState(Math.max(maxDuration - TimingHelper.getInstance().getDuration(), 0));\n    const [countdownFinished, setCountdownFinished] = useState(false);\n    useEffect(() => {\n        TimingHelper.getInstance().onDurationUpdate(\"ZegoCountdownLabelDuration\", (v) => {\n            if (v == maxDuration) {\n                if (typeof onCountdownFinished === \"function\") {\n                    onCountdownFinished()\n                }\n            }\n             else if (v > maxDuration) return;\n            \n            setDuration(Math.max(maxDuration - v, 0))\n        });\n\n        return () => {\n            TimingHelper.getInstance().onDurationUpdate(\"ZegoCountdownLabelDuration\");\n        }\n    }, [])\n\n    return (\n        <View style={styles.container} pointerEvents={'box-none'}>\n            <SafeAreaView ><Text style={styles.timing}>{durationFormat(duration)}</Text></SafeAreaView>\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        top: 26,\n        zIndex: 5,\n        alignItems: 'center',\n    },\n    timing: {\n        color: 'white',\n    },\n});"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,IAAI,EAAEC,UAAU,EAAEC,IAAI,EAAEC,YAAY,QAAQ,cAAc;AACnE,SAASC,cAAc,QAAQ,UAAU;AACzC,OAAOC,YAAY,MAAW,2BAA2B;AAEzD,eAAe,SAASC,kBAAkBA,CAACC,KAAK,EAAE;EAC9C,MAAM;IAAEC,WAAW;IAAEC;EAAoB,CAAC,GAAGF,KAAK;EAClD,MAAM,CAACG,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAACa,IAAI,CAACC,GAAG,CAACL,WAAW,GAAGH,YAAY,CAACS,WAAW,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAC7G,MAAM,CAACC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EACjED,SAAS,CAAC,MAAM;IACZO,YAAY,CAACS,WAAW,CAAC,CAAC,CAACI,gBAAgB,CAAC,4BAA4B,EAAGC,CAAC,IAAK;MAC7E,IAAIA,CAAC,IAAIX,WAAW,EAAE;QAClB,IAAI,OAAOC,mBAAmB,KAAK,UAAU,EAAE;UAC3CA,mBAAmB,CAAC,CAAC;QACzB;MACJ,CAAC,MACK,IAAIU,CAAC,GAAGX,WAAW,EAAE;MAE3BG,WAAW,CAACC,IAAI,CAACC,GAAG,CAACL,WAAW,GAAGW,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7C,CAAC,CAAC;IAEF,OAAO,MAAM;MACTd,YAAY,CAACS,WAAW,CAAC,CAAC,CAACI,gBAAgB,CAAC,4BAA4B,CAAC;IAC7E,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,oBACIrB,KAAA,CAAAuB,aAAA,CAACpB,IAAI;IAACqB,KAAK,EAAEC,MAAM,CAACC,SAAU;IAACC,aAAa,EAAE;EAAW,gBACrD3B,KAAA,CAAAuB,aAAA,CAACjB,YAAY,qBAAEN,KAAA,CAAAuB,aAAA,CAAClB,IAAI;IAACmB,KAAK,EAAEC,MAAM,CAACG;EAAO,GAAErB,cAAc,CAACM,QAAQ,CAAQ,CAAe,CACxF,CAAC;AAEf;AAEA,MAAMY,MAAM,GAAGrB,UAAU,CAACyB,MAAM,CAAC;EAC7BH,SAAS,EAAE;IACPI,IAAI,EAAE,CAAC;IACPC,QAAQ,EAAE,UAAU;IACpBC,KAAK,EAAE,MAAM;IACbC,MAAM,EAAE,MAAM;IACdC,GAAG,EAAE,EAAE;IACPC,MAAM,EAAE,CAAC;IACTC,UAAU,EAAE;EAChB,CAAC;EACDR,MAAM,EAAE;IACJS,KAAK,EAAE;EACX;AACJ,CAAC,CAAC","ignoreList":[]}