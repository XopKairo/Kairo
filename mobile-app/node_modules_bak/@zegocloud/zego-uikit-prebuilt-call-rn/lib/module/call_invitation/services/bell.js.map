{"version":3,"names":["NativeModules","Vibration","Sound","zloginfo","zlogerror","zlogwarning","ZegoUIKitPrebuiltCallRNModule","BellManage","_incomingCallFileName","_outgoingCallFileName","_whooshIncoming","_whooshOutgoing","vibrate","cancleVirate","cancel","initRingtoneConfig","ringtoneConfig","incomingCallFileName","outgoingCallFileName","initIncomingSound","Promise","resolve","reject","MAIN_BUNDLE","error","setNumberOfLoops","initOutgoingSound","playIncomingSound","changeToSpeaker","play","success","stopIncomingSound","stop","playOutgoingSound","changeToReceiver","stopOutgoingSound","releaseIncomingSound","release","releaseOutgoingSound"],"sources":["bell.js"],"sourcesContent":["import { NativeModules, Vibration } from 'react-native';\nimport Sound from 'react-native-sound';\nimport { zloginfo, zlogerror, zlogwarning } from '../../utils/logger';\n\nconst { ZegoUIKitPrebuiltCallRNModule } = NativeModules;\n\n// console.warn('Sound', Sound);\n// console.warn('Vibration', Vibration);\n\nconst BellManage = {\n  _incomingCallFileName: '',\n  _outgoingCallFileName: '',\n  _whooshIncoming: null,\n  _whooshOutgoing: null,\n  vibrate: () => {\n    Vibration.vibrate([0, 500, 1000, 500], true);\n  },\n  cancleVirate: () => {\n    Vibration.cancel();\n  },\n  initRingtoneConfig: (ringtoneConfig) => {\n    BellManage._incomingCallFileName = ringtoneConfig.incomingCallFileName;\n    BellManage._outgoingCallFileName = ringtoneConfig.outgoingCallFileName;\n  },\n  initIncomingSound: () => {\n    zloginfo('[BellManage][initIncomingSound]')\n    // Sound.setCategory('Playback');\n    return new Promise((resolve, reject) => {\n      BellManage._whooshIncoming = new Sound(\n        BellManage._incomingCallFileName,\n        Sound.MAIN_BUNDLE,\n        (error) => {\n          if (error) {\n            zlogerror('Failed to load the sound of zego_incoming', error);\n            reject();\n          } else {\n            zloginfo('Load the sound of zego_incoming successfully');\n            BellManage._whooshIncoming.setNumberOfLoops(-1);\n            resolve(BellManage._whooshIncoming);\n          }\n        }\n      );\n    });\n  },\n  initOutgoingSound: () => {\n    return new Promise((resolve, reject) => {\n      BellManage._whooshOutgoing = new Sound(\n        BellManage._outgoingCallFileName,\n        Sound.MAIN_BUNDLE,\n        (error) => {\n          if (error) {\n            zlogerror('Failed to load the sound of zego_outgoing', error);\n            reject();\n          } else {\n            zloginfo('Load the sound of zego_outgoing successfully');\n            BellManage._whooshOutgoing.setNumberOfLoops(-1);\n            resolve(BellManage._whooshOutgoing);\n          }\n        }\n      );\n    });\n  },\n  playIncomingSound: () => {\n    ZegoUIKitPrebuiltCallRNModule.changeToSpeaker()\n    \n    BellManage._whooshIncoming.play((success) => {\n      if (success) {\n        zloginfo('successfully finished playing zego_incoming');\n      } else {\n        zloginfo(\n          'playback zego_incoming failed due to audio decoding errors'\n        );\n      }\n    });\n    zloginfo('successfully playing zego_incoming');\n  },\n  stopIncomingSound: () => {\n    if (!BellManage._whooshIncoming) {\n      zloginfo('[BellManage][stopOutgoingSound] _whooshIncoming is null');\n      return\n    }\n    BellManage._whooshIncoming.stop(() => {\n      zloginfo('successfully stop playing zego_incoming');\n    });\n  },\n  playOutgoingSound: () => {\n    ZegoUIKitPrebuiltCallRNModule.changeToReceiver()\n\n    BellManage._whooshOutgoing.play((success) => {\n      if (success) {\n        zloginfo('successfully finished playing zego_outgoing');\n      } else {\n        zloginfo(\n          'playback zego_outgoing failed due to audio decoding errors'\n        );\n      }\n    });\n    zloginfo('successfully playing zego_outgoing');\n  },\n  stopOutgoingSound: () => {\n    BellManage._whooshOutgoing.stop(() => {\n      zloginfo('successfully stop playing zego_outgoing');\n    });\n  },\n  releaseIncomingSound: () => {\n    zloginfo('[BellManage][releaseIncomingSound]')\n    BellManage._whooshIncoming.release();\n    BellManage._whooshIncoming = null;\n    zloginfo('successfully release the audio player resource');\n  },\n  releaseOutgoingSound: () => {\n    BellManage._whooshOutgoing.release();\n    BellManage._whooshOutgoing = null;\n    zloginfo('successfully release the audio player resource');\n  },\n};\n\nexport default BellManage;\n"],"mappings":"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","ignoreList":[]}