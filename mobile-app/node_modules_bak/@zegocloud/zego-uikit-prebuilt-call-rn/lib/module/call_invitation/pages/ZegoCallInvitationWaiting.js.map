{"version":3,"names":["React","useEffect","StyleSheet","View","Platform","PermissionsAndroid","BackHandler","useNavigation","ZegoUIKit","ZegoAudioVideoView","ZegoSwitchCameraButton","ZegoUIKitPrebuiltCallService","zloginfo","zlogwarning","BellManage","CallEventNotifyApp","CallInviteStateManage","ZegoPrebuiltPlugins","ZegoCallInvationForeground","ZegoUIKitPrebuiltCallWaitingScreen","props","TAG","navigation","appID","appSign","getInstance","getInitAppInfo","userID","userName","getInitUser","initConfig","getInitConfig","avatarBuilder","waitingPageConfig","route","roomID","isVideoCall","invitees","inviterID","invitationID","callName","params","getInviteeIDList","map","invitee","grantPermissions","callback","OS","grantedAudio","check","PERMISSIONS","RECORD_AUDIO","grantedCamera","CAMERA","ungrantedPermissions","isAudioGranted","isVideoGranted","push","error","requestMultiple","then","result","hangUpHandle","uninit","notifyEvent","isAutoCancelInvite","getSignalingPlugin","cancelInvitation","JSON","stringify","getLocalUser","updateInviteDataAfterCancel","stopOutgoingSound","initInviteData","goBack","playOutgoingSound","init","turnCameraOn","turnMicrophoneOn","setAudioOutputToSpeaker","unsubscribe1","addListener","unsubscribe2","unsubscribe3","handleBackButton","callbackID","String","Math","floor","random","length","onInvitationResponseTimeout","callID","data","dataParsed","parse","dataInDataParsed","call_id","onInvitationRefused","callIDs","Array","from","_invitationMap","keys","includes","reason","onInvitationCanceled","onInviteCompletedWithNobody","onInvitationAccepted","state","getState","routes","r","name","join","isAlreadyInCall","some","navigate","origin","inviter","useFrontFacingCamera","isUsingFrontFacingCamera","backHandler","addEventListener","setOptions","gestureEnabled","remove","createElement","style","styles","container","useVideoViewAspectFill","foregroundBuilder","onHangUp","isGroupCall","topMenuContainer","iconBuilder","switchCameraBuilder","create","width","height","flex","zIndex","paddingRight","top","alignItems"],"sources":["ZegoCallInvitationWaiting.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { StyleSheet, View, Platform, PermissionsAndroid, BackHandler } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\n\nimport ZegoUIKit, {\n  ZegoAudioVideoView,\n  ZegoSwitchCameraButton,\n} from '@zegocloud/zego-uikit-rn';\n\nimport ZegoUIKitPrebuiltCallService from '../../services';\nimport { zloginfo, zlogwarning } from '../../utils/logger';\nimport BellManage from '../services/bell';\nimport CallEventNotifyApp from '../services/callevent_notify_app';\nimport CallInviteStateManage from '../services/invite_state_manager';\nimport ZegoPrebuiltPlugins from '../services/plugins';\nimport ZegoCallInvationForeground from './ZegoCallInvationForeground';\n\nexport default function ZegoUIKitPrebuiltCallWaitingScreen(props) {\n  const TAG = 'ZegoUIKitPrebuiltCallWaitingScreen';\n\n  const navigation = useNavigation();\n  const { appID, appSign } = ZegoUIKitPrebuiltCallService.getInstance().getInitAppInfo();\n  const { userID, userName } = ZegoUIKitPrebuiltCallService.getInstance().getInitUser();\n  const initConfig = ZegoUIKitPrebuiltCallService.getInstance().getInitConfig();\n  const { avatarBuilder, waitingPageConfig } = initConfig;\n  const { route } = props;\n  const {\n    roomID,\n    isVideoCall,\n    invitees,\n    inviterID,\n    invitationID,\n    callName,\n  } = route.params;\n\n  const getInviteeIDList = () => {\n    return invitees.map(invitee => {\n      return invitee.userID\n    });\n  }\n  const grantPermissions = async (callback) => {\n    // Android: Dynamically obtaining device permissions\n    if (Platform.OS === 'android') {\n      // Check if permission granted\n      let grantedAudio = PermissionsAndroid.check(\n        PermissionsAndroid.PERMISSIONS.RECORD_AUDIO\n      );\n      let grantedCamera = PermissionsAndroid.check(\n        PermissionsAndroid.PERMISSIONS.CAMERA\n      );\n      const ungrantedPermissions = [];\n      try {\n        const isAudioGranted = await grantedAudio;\n        const isVideoGranted = await grantedCamera;\n        if (!isAudioGranted) {\n          ungrantedPermissions.push(\n            PermissionsAndroid.PERMISSIONS.RECORD_AUDIO\n          );\n        }\n        if (!isVideoGranted && isVideoCall) {\n          ungrantedPermissions.push(PermissionsAndroid.PERMISSIONS.CAMERA);\n        }\n      } catch (error) {\n        ungrantedPermissions.push(\n          PermissionsAndroid.PERMISSIONS.RECORD_AUDIO,\n          PermissionsAndroid.PERMISSIONS.CAMERA\n        );\n      }\n      // If not, request it\n      zloginfo(`[ZegoUIKitPrebuiltCallWaitingScreen] requestMultiple, ungrantedPermissions: ${ungrantedPermissions}`);\n      return PermissionsAndroid.requestMultiple(ungrantedPermissions).then(\n        (result) => {\n          zloginfo(`[ZegoUIKitPrebuiltCallWaitingScreen] requestMultiple, result: ${result}`);\n          if (callback) {\n            callback();\n          }\n        }\n      );\n    } else if (callback) {\n      callback();\n    }\n  };\n  const hangUpHandle = () => {\n    zloginfo('[ZegoUIKitPrebuiltCallWaitingScreen] hangUpHandle, Leave room on waiting page');\n\n    ZegoUIKit.uninit();\n    CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallCancelButtonPressed', navigation, roomID, invitees, isVideoCall ? 1 : 0)\n    if (CallInviteStateManage.isAutoCancelInvite(invitationID)) {\n      ZegoUIKit.getSignalingPlugin().cancelInvitation(getInviteeIDList(), JSON.stringify({\n        \"call_id\": roomID, \n        \"operation_type\": \"cancel_invitation\",\n        'inviter': {userID: ZegoPrebuiltPlugins.getLocalUser().userID, userName: ZegoPrebuiltPlugins.getLocalUser().userName}\n      }));\n      CallInviteStateManage.updateInviteDataAfterCancel(invitationID);\n    }\n    BellManage.stopOutgoingSound();\n    CallInviteStateManage.initInviteData();\n    navigation.goBack();\n  };\n\n  useEffect(() => {\n    BellManage.playOutgoingSound();\n    ZegoUIKit.init(appID, appSign, { userID, userName }).then(() => {\n      grantPermissions(() => {\n        ZegoUIKit.turnCameraOn('', isVideoCall);\n        ZegoUIKit.turnMicrophoneOn('', true);\n        ZegoUIKit.setAudioOutputToSpeaker(true);\n      });\n    });\n    const unsubscribe1 = navigation.addListener('blur', () => {  \n      zloginfo('[Navigation] ZegoUIKitPrebuiltCallWaitingScreen, blur');\n    })\n    const unsubscribe2 = navigation.addListener('focus', () => {  \n      zloginfo('[Navigation] ZegoUIKitPrebuiltCallWaitingScreen, focus');\n    })\n    const unsubscribe3 = navigation.addListener('beforeRemove', () => {  \n      zloginfo('[Navigation] ZegoUIKitPrebuiltCallWaitingScreen, beforeRemove');\n    })\n    return () => {\n      BellManage.stopOutgoingSound();\n      unsubscribe1();\n      unsubscribe2();\n      unsubscribe3();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleBackButton = () => {\n    return true;\n  }\n\n  useEffect(() => {\n    zloginfo(`ZegoUIKitPrebuiltCallWaitingScreen useEffect, invitationID: ${invitationID}`);\n\n    const callbackID =\n      'ZegoUIKitPrebuiltCallWaitingScreen' + String(Math.floor(Math.random() * 10000));\n    if (invitees.length === 1) {\n      ZegoUIKit.getSignalingPlugin().onInvitationResponseTimeout(callbackID, ({callID, invitees, data}) => {\n        zloginfo(`onInvitationResponseTimeout implement by ${TAG}, callID: ${callID}, data: ${data}`);\n\n        ZegoUIKit.uninit();\n        BellManage.stopOutgoingSound();\n        // ZegoUIKit.leaveRoom();\n        CallInviteStateManage.initInviteData();\n        navigation.goBack();\n\n        let dataParsed = data ? JSON.parse(data) : {}\n        const dataInDataParsed = dataParsed.data ? JSON.parse(dataParsed.data) : {}\n        CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallTimeout',\n          dataInDataParsed.call_id,\n          dataParsed.invitees\n        )\n\n        zloginfo(`onInvitationResponseTimeout implement by ${TAG}, process done`);\n      });\n      ZegoUIKit.getSignalingPlugin().onInvitationRefused(callbackID, ({callID, invitee, data}) => {\n        zloginfo(`onInvitationRefused implement by ${TAG}, callID: ${callID}, data: ${data}`);\n  \n        ZegoUIKit.uninit();\n        const callIDs = Array.from(CallInviteStateManage._invitationMap.keys());\n        if (callIDs.includes(callID)) {\n          BellManage.stopOutgoingSound();\n          // ZegoUIKit.leaveRoom();\n          CallInviteStateManage.initInviteData();\n          navigation.goBack();\n        }\n\n        let dataParsed = data ? JSON.parse(data) : {}\n        if (dataParsed.reason === 'busy') {\n          CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallRejectedCauseBusy', dataParsed.call_id, dataParsed.invitee)\n        } else {\n          CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallDeclined', dataParsed.call_id, dataParsed.invitee)\n        }\n      });\n\n      // After the caller initiates a call and then loses network connectivity, \n      // the server will cancel the call and notify both the caller and the callee that the call has been canceled.\n      ZegoUIKit.getSignalingPlugin().onInvitationCanceled(callbackID, (result) => {\n        zloginfo(`[ZegoUIKitPrebuiltCallWaitingScreen] onInvitationCanceled, result: ${JSON.stringify(result)}`);\n        if (result.callID !== invitationID) {\n          zlogwarning('[ZegoUIKitPrebuiltCallWaitingScreen] onInvitationCanceled, callID not match')\n          return\n        }\n\n        ZegoUIKit.uninit();\n        BellManage.stopOutgoingSound();\n        CallInviteStateManage.initInviteData();\n        navigation.goBack();\n      });\n    } else {\n      // CallInviteStateManage.onSomeoneAcceptedInvite(callbackID, () => {\n      //   zloginfo('Someone accepted the invitation');\n      //   BellManage.stopOutgoingSound();\n      // });\n      CallInviteStateManage.onInviteCompletedWithNobody(callbackID, () => {\n        zloginfo('[ZegoUIKitPrebuiltCallWaitingScreen] onInviteCompletedWithNobody');\n\n        ZegoUIKit.uninit();\n        navigation.goBack();\n      });\n    }\n    ZegoUIKit.getSignalingPlugin().onInvitationAccepted(callbackID, ({ invitee, data }) => {\n      zloginfo(`onInvitationAccepted implement by ${TAG}, invitee: ${JSON.stringify(invitee)}, data: ${data}`);\n\n      BellManage.stopOutgoingSound();\n\n        // ZegoUIKit.leaveRoom().then(() => {\n          zloginfo('Jump to call room page.');\n\n          const state = navigation.getState();\n          zloginfo(`Current navigation routes: [${state.routes.map(r => r.name).join(', ')}]`)\n          \n          const isAlreadyInCall = state.routes.some(r => r.name === 'ZegoUIKitPrebuiltCallInCallScreen');\n          if (isAlreadyInCall) {\n            zloginfo('Already in ZegoUIKitPrebuiltCallInCallScreen page, do not need to jump again.')\n          } else {\n            zloginfo('Navigate to ZegoUIKitPrebuiltCallInCallScreen')\n            navigation.navigate('ZegoUIKitPrebuiltCallInCallScreen', {\n              origin: 'ZegoUIKitPrebuiltCallWaitingScreen',\n              roomID,\n              isVideoCall,\n              invitees: getInviteeIDList(),\n              inviter: inviterID,\n              invitationID,\n              useFrontFacingCamera: ZegoUIKit.isUsingFrontFacingCamera()\n            });\n          }\n        // });\n\n      let dataParsed = data ? JSON.parse(data) : {}\n      CallEventNotifyApp.getInstance().notifyEvent('onOutgoingCallAccepted', dataParsed.call_id, dataParsed.invitee)\n\n      zloginfo(`onInvitationAccepted implement by ${TAG}, process done`);\n    });\n\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', handleBackButton);\n    navigation.setOptions({ gestureEnabled: false });\n\n    return () => {\n      ZegoUIKit.getSignalingPlugin().onInvitationResponseTimeout(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationRefused(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationCanceled(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationAccepted(callbackID);\n      CallInviteStateManage.onInviteCompletedWithNobody(callbackID);\n      backHandler.remove()\n      navigation.setOptions({ gestureEnabled: true });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      {isVideoCall ? (\n        <ZegoAudioVideoView\n          userID={userID}\n          roomID={roomID}\n          useVideoViewAspectFill={true}\n          // eslint-disable-next-line react/no-unstable-nested-components\n          foregroundBuilder={() => (\n            <ZegoCallInvationForeground\n              isVideoCall={isVideoCall}\n              invitee={invitees[0]}\n              onHangUp={hangUpHandle}\n              avatarBuilder={avatarBuilder}\n              waitingPageConfig={waitingPageConfig}\n              callName={callName}\n              isGroupCall={invitees.length > 1}\n            />\n          )}\n        />\n      ) : (\n        <ZegoCallInvationForeground\n          isVideoCall={isVideoCall}\n          invitee={invitees[0]}\n          onHangUp={hangUpHandle}\n          avatarBuilder={avatarBuilder}\n          waitingPageConfig={waitingPageConfig}\n          callName={callName}\n          isGroupCall={invitees.length > 1}\n        />\n      )}\n      {isVideoCall ? (\n        <View style={styles.topMenuContainer}>\n          <ZegoSwitchCameraButton iconBuilder={waitingPageConfig.switchCameraBuilder} />\n        </View>\n      ) : (\n        <View />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    height: '100%',\n    flex: 1,\n  },\n  topMenuContainer: {\n    zIndex: 2,\n    width: '100%',\n    paddingRight: 15,\n    top: 30,\n    alignItems: 'flex-end',\n  },\n});\n"],"mappings":"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","ignoreList":[]}